{"version":3,"sources":["webpack:///./assets/containers-m/FlashDetail/index.js","webpack:///./_multiappsharing/components/ImgPopup/index.js"],"names":["connect","state","flashDetails","flash","props","titleContent","flashRecognize","title","content","t","useTranslation","_useState","useState","_useState2","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","imgSrc","setImgSrc","_useState3","_useState4","imgShow","setImgShow","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","flashTime","createdTime","dangerouslySetInnerHTML","__html","replace","href","url","style","display","concat","images","onClick","src","_Users_admin_Desktop_HUOXING_hx_news_huoxing24_com_multiappsharing_components_ImgPopup__WEBPACK_IMPORTED_MODULE_6__","close","show","ImgPopup","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default","height","width","imgStyle","setImgStyle","useEffect","imgTemp","Image","onload","ih","iw","isPc","maxWidth","maxHeight","wh","windowOffset","ww","_useState5","_useState6","equipment","setEquipment","Hammer","require","$ele","document","getElementById","hammertime","get","set","enable","posX","posY","scale","lastScale","lastPosX","lastPosY","maxPosX","maxPosY","transform","el","on","ev","type","window","getComputedStyle","getPropertyValue","toString","err","console","log","webkitTransform","deltaX","deltaY","Math","ceil","clientWidth","clientHeight","max","min","react__WEBPACK_IMPORTED_MODULE_2___default","id","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","alt","propTypes","bool","isRequired","func"],"mappings":"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","file":"containers-m-FlashDetail-0c7eda86.js","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { useTranslation } from 'react-i18next'\nimport './index.scss'\nimport { flashRecognize, flashTime } from 'multiPublic/index'\nimport ImgPopup from 'multiComps/ImgPopup'\n\nconst FlashDetail = (props) => {\n    const { flashDetails } = props\n    const titleContent = flashRecognize(flashDetails)\n    const title = titleContent.title\n    const content = titleContent.content\n    const { t } = useTranslation()\n\n    const [imgSrc, setImgSrc] = useState('')\n    const [imgShow, setImgShow] = useState(false)\n\n    return <div className=\"m-flash-share-detail\">\n        <div className=\"detail-cont\">\n            <h6>{title}</h6>\n            <div className=\"cont-time\"><p>MarsBit{t('headernavtwo')}</p><span>{flashTime(flashDetails.createdTime, 'yyyy-MM-dd hh:mm')}</span></div>\n            <div className=\"detail-cont\">\n                <div className=\"content-words\" dangerouslySetInnerHTML={{ __html: content.replace(/\\n/g, '</br>') }} />\n                <a href={flashDetails.url} className=\"original\" style={{ display: `${!flashDetails.url ? 'none' : 'inline-block'}` }}>查看原文 ></a>\n                {flashDetails.images && <img onClick={() => {\n                    setImgShow(!imgShow)\n                    setImgSrc(flashDetails.images)\n                }} src={flashDetails.images}/>}\n                <ImgPopup close={() => setImgShow(!imgShow)} show={imgShow} src={imgSrc}/>\n            </div>\n        </div>\n        <div className=\"live-hint\">{t('disclaimer_in')}</div>\n    </div>\n}\nconst mapStateToProps = (state) => ({\n    flashDetails: state.flash.flashDetails\n})\n\nexport default connect(mapStateToProps)(FlashDetail)\n","import React, { useState, useEffect } from 'react'\nimport { bool, func } from 'prop-types'\nimport { isPc, windowOffset } from '../../public/index'\n\nimport './index.scss'\n\nconst ImgPopup = (props) => {\n    const { src, show, close } = props\n\n    const [imgShow, setImgShow] = useState(false)\n    const [imgStyle, setImgStyle] = useState({\n        height: 'auto',\n        width: '100%'\n    })\n\n    useEffect(() => {\n        if (!src) return\n        const imgTemp = new Image()\n        imgTemp.src = src\n        imgTemp.onload = function () {\n            const ih = imgTemp.height\n            const iw = imgTemp.width\n            if (isPc()) {\n                if (iw >= ih && ((iw >= 1000 && ih * 1000 / iw <= 600) || (iw < 1000 && ih <= 600))) {\n                    setImgStyle({\n                        height: 'auto',\n                        maxWidth: '1000px'\n                    })\n                } else {\n                    setImgStyle({\n                        maxHeight: '600px',\n                        width: 'auto'\n                    })\n                }\n            } else {\n                const wh = windowOffset().height * 0.8\n                const ww = windowOffset().width\n                if ((iw >= ww && ih * ww / iw <= wh) || (iw < ww && ih <= wh)) {\n                    setImgStyle({\n                        height: 'auto',\n                        width: '100%'\n                    })\n                } else {\n                    setImgStyle({\n                        height: wh,\n                        width: 'auto'\n                    })\n                }\n            }\n\n            setImgShow(true)\n        }\n    }, [src])\n\n    const [equipment, setEquipment] = useState('pc')\n    useEffect(() => {\n        if (isPc()) return\n        setEquipment('mobile')\n        const Hammer = require('hammerjs')\n\n        const $ele = document.getElementById('imgPopContent')\n        const hammertime = new Hammer($ele, {})\n        hammertime.get('pinch').set({\n            enable: true\n        })\n        let posX = 0\n        let posY = 0\n        let scale = 1\n        let lastScale = 1\n        let lastPosX = 0\n        let lastPosY = 0\n        let maxPosX = 0\n        let maxPosY = 0\n        let transform = ''\n        const el = $ele\n\n        hammertime.on('doubletap pan pinch panend pinchend', function (ev) {\n            if (ev.type === 'doubletap') {\n                transform = 'translate3d(0, 0, 0) scale3d(2, 2, 1)'\n                scale = 2\n                lastScale = 2\n                try {\n                    if (window.getComputedStyle(el, null).getPropertyValue('-webkit-transform').toString() !== 'matrix(1, 0, 0, 1, 0, 0)') {\n                        transform = 'translate3d(0, 0, 0) scale3d(1, 1, 1)'\n                        scale = 1\n                        lastScale = 1\n                    }\n                } catch (err) {\n                    console.log(err)\n                }\n                el.style.webkitTransform = transform\n                transform = ''\n            }\n\n            // pan\n            if (scale !== 1) {\n                posX = lastPosX + ev.deltaX\n                posY = lastPosY + ev.deltaY\n                maxPosX = Math.ceil((scale - 1) * el.clientWidth / 2)\n                maxPosY = Math.ceil((scale - 1) * el.clientHeight / 2)\n                if (posX > maxPosX) posX = maxPosX\n                if (posX < -maxPosX) posX = -maxPosX\n                if (posY > maxPosY) posY = maxPosY\n                if (posY < -maxPosY) posY = -maxPosY\n            }\n\n            // pinch\n            if (ev.type === 'pinch') scale = Math.max(0.999, Math.min(lastScale * (ev.scale), 4))\n            if (ev.type === 'pinchend') lastScale = scale\n\n            // panend\n            if (ev.type === 'panend') {\n                lastPosX = posX < maxPosX ? posX : maxPosX\n                lastPosY = posY < maxPosY ? posY : maxPosY\n            }\n\n            if (scale !== 1) transform = 'translate3d(' + posX + 'px,' + posY + 'px, 0) ' + 'scale3d(' + scale + ', ' + scale + ', 1)'\n            if (transform) el.style.webkitTransform = transform\n        })\n    }, [])\n\n    return <div className={`img-popup-wrapper ${equipment}`} style={{ display: show && imgShow ? 'flex' : 'none' }}>\n        <div className=\"img-position\" onClick={close}>\n            <div\n                id=\"imgPopContent\"\n                className={`img-content ${equipment === 'pc' ? 'beautify-scroll' : ''}`}>\n                {src && <img src={src} style={{ ...imgStyle }} alt=\"img-viewer\"/>}\n            </div>\n            <a className=\"close-icon\" onClick={close}/>\n        </div>\n        <div className=\"img-popup-mask\" onClick={close}/>\n    </div>\n}\n\nImgPopup.propTypes = {\n    show: bool.isRequired,\n    close: func.isRequired\n}\n\nexport default ImgPopup\n"],"sourceRoot":""}