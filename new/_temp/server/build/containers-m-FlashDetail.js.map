{"version":3,"sources":["webpack:///./_multiappsharing/components/ImgPopup/index.js","webpack:///./assets/containers-m/FlashDetail/index.js"],"names":["ImgPopup","props","src","show","close","useState","imgShow","setImgShow","height","width","imgStyle","setImgStyle","useEffect","imgTemp","Image","onload","ih","iw","isPc","maxWidth","maxHeight","wh","windowOffset","ww","equipment","setEquipment","Hammer","require","$ele","document","getElementById","hammertime","get","set","enable","posX","posY","scale","lastScale","lastPosX","lastPosY","maxPosX","maxPosY","transform","el","on","ev","type","window","getComputedStyle","getPropertyValue","toString","err","console","log","style","webkitTransform","deltaX","deltaY","Math","ceil","clientWidth","clientHeight","max","min","display","propTypes","bool","isRequired","func","FlashDetail","flashDetails","titleContent","flashRecognize","title","content","useTranslation","t","imgSrc","setImgSrc","flashTime","createdTime","__html","replace","url","images","mapStateToProps","state","flash","connect"],"mappings":"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","file":"containers-m-FlashDetail.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { bool, func } from 'prop-types'\nimport { isPc, windowOffset } from '../../public/index'\n\nimport './index.scss'\n\nconst ImgPopup = (props) => {\n    const { src, show, close } = props\n\n    const [imgShow, setImgShow] = useState(false)\n    const [imgStyle, setImgStyle] = useState({\n        height: 'auto',\n        width: '100%'\n    })\n\n    useEffect(() => {\n        if (!src) return\n        const imgTemp = new Image()\n        imgTemp.src = src\n        imgTemp.onload = function () {\n            const ih = imgTemp.height\n            const iw = imgTemp.width\n            if (isPc()) {\n                if (iw >= ih && ((iw >= 1000 && ih * 1000 / iw <= 600) || (iw < 1000 && ih <= 600))) {\n                    setImgStyle({\n                        height: 'auto',\n                        maxWidth: '1000px'\n                    })\n                } else {\n                    setImgStyle({\n                        maxHeight: '600px',\n                        width: 'auto'\n                    })\n                }\n            } else {\n                const wh = windowOffset().height * 0.8\n                const ww = windowOffset().width\n                if ((iw >= ww && ih * ww / iw <= wh) || (iw < ww && ih <= wh)) {\n                    setImgStyle({\n                        height: 'auto',\n                        width: '100%'\n                    })\n                } else {\n                    setImgStyle({\n                        height: wh,\n                        width: 'auto'\n                    })\n                }\n            }\n\n            setImgShow(true)\n        }\n    }, [src])\n\n    const [equipment, setEquipment] = useState('pc')\n    useEffect(() => {\n        if (isPc()) return\n        setEquipment('mobile')\n        const Hammer = require('hammerjs')\n\n        const $ele = document.getElementById('imgPopContent')\n        const hammertime = new Hammer($ele, {})\n        hammertime.get('pinch').set({\n            enable: true\n        })\n        let posX = 0\n        let posY = 0\n        let scale = 1\n        let lastScale = 1\n        let lastPosX = 0\n        let lastPosY = 0\n        let maxPosX = 0\n        let maxPosY = 0\n        let transform = ''\n        const el = $ele\n\n        hammertime.on('doubletap pan pinch panend pinchend', function (ev) {\n            if (ev.type === 'doubletap') {\n                transform = 'translate3d(0, 0, 0) scale3d(2, 2, 1)'\n                scale = 2\n                lastScale = 2\n                try {\n                    if (window.getComputedStyle(el, null).getPropertyValue('-webkit-transform').toString() !== 'matrix(1, 0, 0, 1, 0, 0)') {\n                        transform = 'translate3d(0, 0, 0) scale3d(1, 1, 1)'\n                        scale = 1\n                        lastScale = 1\n                    }\n                } catch (err) {\n                    console.log(err)\n                }\n                el.style.webkitTransform = transform\n                transform = ''\n            }\n\n            // pan\n            if (scale !== 1) {\n                posX = lastPosX + ev.deltaX\n                posY = lastPosY + ev.deltaY\n                maxPosX = Math.ceil((scale - 1) * el.clientWidth / 2)\n                maxPosY = Math.ceil((scale - 1) * el.clientHeight / 2)\n                if (posX > maxPosX) posX = maxPosX\n                if (posX < -maxPosX) posX = -maxPosX\n                if (posY > maxPosY) posY = maxPosY\n                if (posY < -maxPosY) posY = -maxPosY\n            }\n\n            // pinch\n            if (ev.type === 'pinch') scale = Math.max(0.999, Math.min(lastScale * (ev.scale), 4))\n            if (ev.type === 'pinchend') lastScale = scale\n\n            // panend\n            if (ev.type === 'panend') {\n                lastPosX = posX < maxPosX ? posX : maxPosX\n                lastPosY = posY < maxPosY ? posY : maxPosY\n            }\n\n            if (scale !== 1) transform = 'translate3d(' + posX + 'px,' + posY + 'px, 0) ' + 'scale3d(' + scale + ', ' + scale + ', 1)'\n            if (transform) el.style.webkitTransform = transform\n        })\n    }, [])\n\n    return <div className={`img-popup-wrapper ${equipment}`} style={{ display: show && imgShow ? 'flex' : 'none' }}>\n        <div className=\"img-position\" onClick={close}>\n            <div\n                id=\"imgPopContent\"\n                className={`img-content ${equipment === 'pc' ? 'beautify-scroll' : ''}`}>\n                {src && <img src={src} style={{ ...imgStyle }} alt=\"img-viewer\"/>}\n            </div>\n            <a className=\"close-icon\" onClick={close}/>\n        </div>\n        <div className=\"img-popup-mask\" onClick={close}/>\n    </div>\n}\n\nImgPopup.propTypes = {\n    show: bool.isRequired,\n    close: func.isRequired\n}\n\nexport default ImgPopup\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { useTranslation } from 'react-i18next'\nimport './index.scss'\nimport { flashRecognize, flashTime } from 'multiPublic/index'\nimport ImgPopup from 'multiComps/ImgPopup'\n\nconst FlashDetail = (props) => {\n    const { flashDetails } = props\n    const titleContent = flashRecognize(flashDetails)\n    const title = titleContent.title\n    const content = titleContent.content\n    const { t } = useTranslation()\n\n    const [imgSrc, setImgSrc] = useState('')\n    const [imgShow, setImgShow] = useState(false)\n\n    return <div className=\"m-flash-share-detail\">\n        <div className=\"detail-cont\">\n            <h6>{title}</h6>\n            <div className=\"cont-time\"><p>MarsBit{t('headernavtwo')}</p><span>{flashTime(flashDetails.createdTime, 'yyyy-MM-dd hh:mm')}</span></div>\n            <div className=\"detail-cont\">\n                <div className=\"content-words\" dangerouslySetInnerHTML={{ __html: content.replace(/\\n/g, '</br>') }} />\n                <a href={flashDetails.url} className=\"original\" style={{ display: `${!flashDetails.url ? 'none' : 'inline-block'}` }}>查看原文 ></a>\n                {flashDetails.images && <img onClick={() => {\n                    setImgShow(!imgShow)\n                    setImgSrc(flashDetails.images)\n                }} src={flashDetails.images}/>}\n                <ImgPopup close={() => setImgShow(!imgShow)} show={imgShow} src={imgSrc}/>\n            </div>\n        </div>\n        <div className=\"live-hint\">{t('disclaimer_in')}</div>\n    </div>\n}\nconst mapStateToProps = (state) => ({\n    flashDetails: state.flash.flashDetails\n})\n\nexport default connect(mapStateToProps)(FlashDetail)\n"],"sourceRoot":""}