{"version":3,"sources":["webpack:///./_multiappsharing/public/hooks/useAppDownload.js","webpack:///./_multiappsharing/components-m/WebchatOpenInBrowser/index.js","webpack:///./_multiappsharing/components-m/WebchatOpenInBrowser/images/wechat-download-tips.png","webpack:///./_multiappsharing/components-m/DownloadBtn/index.js","webpack:///./_multiappsharing/components-m/DownloadBtn/images/cellphone-icon.png","webpack:///./assets/containers-m/Flash/FlashListItem/index.js","webpack:///./assets/containers-m/Flash/index.js"],"names":["checkOpen","callback","_clickTime","Date","_count","intHandle","setInterval","elsTime","clearInterval","document","hidden","webkitHidden","console","log","iosUrl","andUrl","useRef","openApp","useCallback","url","doNotDownload","location","href","isIos","isAndroid","current","appDownload","type","id","obj","openInBrowser","isWechat","useEffect","getAndroidDownloadUrl","then","res","code","Toast","info","msg","err","props","setOpenInBrowser","tipsImg","useState","iphonex","setIphonex","useAppDownload","clickDownload","isIphoneX","phoneIcon","FlashListItem","item","serverTime","openMsg","setOpenMsg","titleContent","flashRecognize","title","contentHTML","content","replace","reg","cont","exec","GetLength","handleClick","flashTime","createdTime","mixUrl","m","display","images","propTypes","number","isRequired","Flash","flashList","dispatch","paramsObj","currentPage","pageSize","params","setParams","isLoading","loadType","isMounted","scrollFunc","windowScroll","$btnMore","getElementById","scrollOffset","top","windowOffset","height","elementOffset","loadMore","window","removeEventListener","refreshTime","inforList","length","createTime","Promise","all","getFlashList","list","isArray","map","index","currentTime","mapStateToProps","state","multi","flash","connect"],"mappings":"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","file":"containers-m-Flash.js","sourcesContent":["import { useEffect, useCallback, useRef } from 'react'\nimport { getAndroidDownloadUrl } from '../../redux/actions/public'\nimport Toast from '../../components/Toast'\nimport { isAndroid, isIos, isWechat } from '../../public'\n\nconst checkOpen = (callback) => {\n    let _clickTime = +(new Date())\n    // 启动间隔20ms运行的定时器，并检测累计消耗时间是否超过3000ms，超过则结束\n    let _count = 0\n    let intHandle\n    intHandle = setInterval(() => {\n        _count++\n        let elsTime = +(new Date()) - _clickTime\n        if (_count >= 100 || elsTime > 3000) {\n            clearInterval(intHandle)\n            if (elsTime > 3000 || document.hidden || document.webkitHidden) {\n                console.log('正在打开app')\n            } else {\n                callback()\n            }\n        }\n    }, 20)\n}\n\n/**\n * @params type 当前页面类型 id文章视频等相对应的id\n * newsDetail新闻详情，newsList新闻列表\n * flashDetail快讯详情，flashList快讯列表\n * videoDetail视频详情，videoList视频列表\n * authorCenter作者中心\n * 不传type默认跳转到首页\n * 返回appDownload 传递以上参数\n * 并返回openInBrowser是否提示浏览器中打开\n * */\nexport default () => {\n    const iosUrl = 'https://itunes.apple.com/cn/app/id1343659925?mt=8'\n    const andUrl = useRef('')\n\n    const openApp = useCallback((url, doNotDownload) => {\n        location.href = url\n        checkOpen(() => {\n            if (isIos() && !doNotDownload) location.href = iosUrl\n            if (isAndroid() && !doNotDownload) location.href = andUrl.current\n        })\n    }, [andUrl])\n\n    const appDownload = useCallback((type, id, obj) => {\n        const doNotDownload = obj ? obj.doNotDownload : false\n        let openInBrowser = false\n        if (isWechat() && isIos()) {\n            // 打开appStore\n            location.href = iosUrl\n        } else if (isWechat() && isAndroid()) {\n            // 提示浏览器中打开\n            openInBrowser = true\n        } else {\n            switch (type) {\n                case 'liveshare':\n                    openApp(`marsbusiness://liveshare/${id}`, doNotDownload)\n                    break\n                case 'newsDetail':\n                    openApp(`marsbusiness://news/${id}`, doNotDownload)\n                    break\n                case 'newsList':\n                    openApp(`marsbusiness://newlist/${id}`, doNotDownload)\n                    break\n                case 'flashDetail':\n                    openApp(`marsbusiness://fast/${id}`, doNotDownload)\n                    break\n                case 'flashList':\n                    openApp(`marsbusiness://home/fast`, doNotDownload)\n                    break\n                case 'videoDetail':\n                    openApp(`marsbusiness://video/${id}`, doNotDownload)\n                    break\n                case 'videoList':\n                    openApp(`marsbusiness://home/video`, doNotDownload)\n                    break\n                case 'authorCenter':\n                    openApp(`marsbusiness://authorCenter/${id}`, doNotDownload)\n                    break\n                case 'noticeDetail':\n                    openApp(`marsbusiness://noticeDetail/${id}`, doNotDownload)\n                    break\n                default:\n                    openApp(`marsbusiness://home/new`, doNotDownload)\n            }\n        }\n\n        return openInBrowser\n    }, [andUrl])\n\n    useEffect(() => {\n        getAndroidDownloadUrl().then(function (res) {\n            if (res.code === 1) {\n                andUrl.current = res.obj\n            } else {\n                Toast.info(res.msg)\n            }\n        }).catch(function (err) {\n            throw err\n        })\n    }, [])\n\n    return appDownload\n}\n","import React from 'react'\nimport './index.scss'\nimport tipsImg from './images/wechat-download-tips.png'\n\nexport default (props) => {\n    return props.openInBrowser && <div\n        className=\"download-app-wechat-tips\"\n        onClick={() => props.setOpenInBrowser(false)}>\n        <div className=\"download-app-img\">\n            <img src={tipsImg} alt=\"请在浏览器中打开\" />\n        </div>\n    </div>\n}\n","module.exports = __webpack_public_path__ + \"wechat-download-tips-fef770a1.png\";","import React, { useState, useCallback, useEffect } from 'react'\nimport './index.scss'\n\nimport { isIphoneX } from 'multiPublic/index'\nimport WebchatOpenInBrowser from '../../components-m/WebchatOpenInBrowser'\nimport useAppDownload from '../../public/hooks/useAppDownload'\nimport phoneIcon from './images/cellphone-icon.png'\n\nexport default (props) => {\n    const [iphonex, setIphonex] = useState(false)\n    const [openInBrowser, setOpenInBrowser] = useState(false)\n    const appDownload = useAppDownload()\n    const clickDownload = useCallback(() => {\n        setOpenInBrowser(appDownload(props.type, props.id))\n    }, [])\n    useEffect(() => {\n        isIphoneX() && setIphonex(true)\n    }, [])\n    return <div className={`download-app-wrapper ${iphonex ? 'iphonex' : ''}`}>\n        <a className=\"download-app-btn\" onClick={clickDownload}>\n            <img src={phoneIcon} alt=\"下载MarsBit\"/>\n            下载MarsBit APP\n        </a>\n        <WebchatOpenInBrowser openInBrowser={openInBrowser} setOpenInBrowser={setOpenInBrowser} />\n    </div >\n}\n","module.exports = __webpack_public_path__ + \"cellphone-icon-524dafc5.png\";","import React, { useCallback, useState } from 'react'\nimport { number } from 'prop-types'\nimport { mixUrl, flashTime, flashRecognize, GetLength } from 'multiPublic/index'\nimport './index.scss'\n\nconst FlashListItem = (props) => {\n    const { item, serverTime } = props\n    const [openMsg, setOpenMsg] = useState(false)\n    item.openMsg = false\n    const titleContent = flashRecognize(item)\n    const title = titleContent.title\n    const contentHTML = titleContent.content.replace(/<\\/?.+?>/g, '')\n    const content = contentHTML.replace(/ /g, '')\n    // const content = titleContent.content\n\n    let reg = /【([^【】]+)】([^【】]*)/\n    const cont = reg.exec(content) ? reg.exec(content)[2] : content\n    if (GetLength(cont) > 80) item.openMsg = openMsg\n    // const url = 'https://m.marsbit.co/flash/' + item.id + '.html'\n    const handleClick = useCallback(() => {\n        setOpenMsg(true)\n    })\n    console.log()\n\n    // 点击展开和，查看原文，增加创建时间\n    return <div className=\"new-fash-list\" data-date=\"创建时间\">\n        <i className=\"iconfont iconfont-fangkuai fangkuai\"></i>\n        <div className=\"time-flash\">{flashTime(item.createdTime, serverTime)}</div>\n        <div className=\"text-flash clearfix\">\n            <div className=\"text-box\">\n                <a className=\"text-title\" href={mixUrl.m(`/flash/${item.id}.html`)}>\n                    {title}\n                </a>\n                <p className={`text-msg ${item.openMsg ? '' : 'maxH'}`}>\n                    {content}\n                    <a href={item.url} className=\"original\" title=\"查看原文\">\n                        查看原文\n                    </a>\n                </p>\n                <p className=\"open-msg\" style={{ display: openMsg ? 'none' : 'inline-block' }} onClick={() => handleClick()}>展开 <i className=\"iconfont iconfont-open\"></i></p>\n                {item.images && <div className=\"text-img\"><img className=\"item-img\" src={item.images}/></div>}\n            </div>\n        </div>\n    </div>\n}\nFlashListItem.propTypes = {\n    // item: object.iuRequired,\n    serverTime: number.isRequired\n}\n\nexport default FlashListItem\n","import React, { useState, useCallback, useRef, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport FlashListItem from './FlashListItem'\nimport DownloadBtn from 'multiCompsM/DownloadBtn'\nimport './index.scss'\nimport Toast from 'multiComps/Toast'\nimport { getFlashList } from 'multiRedux/actions/flash'\nimport { windowScroll, scrollOffset, windowOffset, elementOffset } from 'multiPublic/index'\nimport { isArray } from '../../../_multiappsharing/public'\n\nconst Flash = (props) => {\n    const { flashList, dispatch } = props\n    const paramsObj = {\n        currentPage: flashList.currentPage,\n        pageSize: 30\n    }\n    const [params, setParams] = useState(paramsObj)\n\n    const isLoading = useRef(false)\n    const loadType = useRef(false) // 加载跟是更多，点击切换是false ，这里没有切换\n    const isMounted = useRef(false) // 组件是否已经挂载\n\n    /** @desc 滚动加载更多 */\n    useEffect(() => {\n        const scrollFunc = windowScroll(function (res) {\n            if (res !== 'down' || isLoading.current) return false\n            loadType.current = 'more'\n            const $btnMore = document.getElementById('btnMore')\n\n            if (scrollOffset().top + windowOffset().height > elementOffset($btnMore).top - windowOffset().height / 2) {\n                loadMore()\n            }\n        })\n        return () => {\n            window.removeEventListener('scroll', scrollFunc, false)\n        }\n    }, [isLoading])\n\n    /** @desc 获取刷新时间 */\n    const refreshTime = useRef(flashList.inforList[flashList.inforList.length - 1].createTime)\n    useEffect(() => {\n        refreshTime.current = flashList.inforList[flashList.inforList.length - 1].createTime\n    }, [flashList])\n\n    const loadMore = useCallback(() => {\n        console.log(1111)\n        if (isLoading.current) return false\n        setParams({\n            ...params,\n            currentPage: params.currentPage + 1,\n            refreshTime: refreshTime.currentPage\n        })\n    }, [params, isLoading, refreshTime])\n\n    // 获取快讯列表，更新isMount，flashList, isLoading,\n    /** @desc 获取快讯列表 */\n    useEffect(() => {\n        if (isMounted.current && !isLoading.current) {\n            isLoading.current = true\n            Promise.all([\n\n                dispatch(getFlashList(params, loadType.current)).catch(function (err) {\n                    console.log(err)\n                    Toast.info('获取快讯列表错误')\n                })\n            ]).then(function (res) {\n                isLoading.current = false\n                if (res[0].code === 1) {\n                    const list = res[0].obj.inforList\n                    if (!isArray(list) || list.length === 0) {\n                        Toast.info('暂无更多快讯')\n                    }\n                } else {\n                    Toast.info(res[0].msg)\n                }\n            })\n        } else {\n            isMounted.current = true\n        }\n    }, [isLoading, isMounted, params])\n    return <div className=\"news-fash page-con-wrap\" id=\"currNewsBox\">\n        <div className=\"lives-box\">\n            {flashList.inforList.map(function (item, index) {\n                return <FlashListItem item={item} serverTime={flashList.currentTime} key={item.id} key={index} />\n            })}\n        </div>\n        <div className=\"flash-more-btn\">\n            <div className=\"btn-more\" id=\"btnMore\">加载更多</div>\n        </div>\n        <DownloadBtn/>\n    </div>\n}\n\nconst mapStateToProps = (state) => {\n    const multi = state.multi\n    return {\n        flashList: multi.flash.flashList\n    }\n}\n\nexport default connect(mapStateToProps)(Flash)\n"],"sourceRoot":""}