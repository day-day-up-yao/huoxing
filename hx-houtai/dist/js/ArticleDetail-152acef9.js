(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1453:function(e,a,t){"use strict";t.r(a),function(e){t(675);var n=t(676),c=t.n(n),s=(t(1394),t(1395)),r=t.n(s),o=(t(1381),t(1382)),i=t.n(o),l=(t(1383),t(1384)),m=t.n(l),p=(t(247),t(183)),u=t.n(p),d=(t(361),t(20)),f=t.n(d),E=(t(184),t(1378)),y=t.n(E),g=(t(1376),t(1377)),N=t.n(g),v=t(0),b=t.n(v),h=t(246),O=t(10),w=t(1605),S=t(1620),P=t(48),k=t(248),_=t(1617);t(1618),t(1610);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(){return(J=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function C(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(a){M(e,a,t[a])})}return e}function x(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,a){return(A=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function M(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var L=N.a.confirm,R=y.a.TextArea,D=function(a){function t(){var e,a,n;return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=I(t).call(this),e=!n||"object"!==j(n)&&"function"!=typeof n?T(a):n,M(T(e),"edit",function(){var a=e.props.info;O.hashHistory.push({pathname:"/checkArticle-edit",query:{id:a.id}}),sessionStorage.setItem("hx_content",JSON.stringify(a))}),M(T(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),M(T(e),"showModal",function(a){e.setState({previewVisible:!0,previewImage:a})}),M(T(e),"getReason",function(a){e.setState({reason:a.target.value})}),M(T(e),"closeWindow",function(){e.setState({closeLoading:!0})}),M(T(e),"handleSubmit",function(a){var t=T(e),n=a.target.getAttribute("data-status"),c="审核通过";switch(n){case"1":c="审核通过并发表";break;case"4":c="暂存至审核中";break;case"2":c="不通过审核";break;default:c="审核通过"}a.preventDefault();var s=e.props.info;if("1"===n){if(!Object(P.G)(s.coverPic))return f.a.error("新闻封面暂无，请先上传相关封面！"),!1;if(!JSON.parse(s.coverPic).pc&&!JSON.parse(s.coverPic).pc_recommend)return f.a.error("新闻封面暂无，请先上传相关封面！"),!1}L({title:"提示",content:"确认要".concat(c,"吗 ?"),onOk:function(){var e={id:s.id,status:n};"2"===n?L({title:"提示",content:b.a.createElement("div",{className:"modal-input"},b.a.createElement("span",{style:{marginRight:10}},"请填写文章不通过原因："),b.a.createElement(R,{rows:3,autoFocus:!0,onChange:function(e){t.getReason(e)}})),onOk:function(){t.setState({loading:!0}),""!==t.state.reason.trim()&&Object(P.i)("POST","/news/nopass",{newsId:s.id,reason:t.state.reason},function(e){1===e.code?Object(P.i)("POST","/news/status",{id:s.id,status:2,reason:t.state.reason},function(e){1===e.code?(f.a.success("操作成功！"),t.closeWindow()):(t.setState({loading:!1}),f.a.error(e.msg))}):(t.setState({loading:!1}),f.a.error(e.msg))})}}):Object(P.i)("POST","/news/status",C({},e),function(e){1===e.code?(f.a.success("操作成功"),t.closeWindow()):f.a.error(e.msg)})}})}),e.state={isEdit:!1,loading:!0,previewVisible:!1,previewImage:"",reason:"",closeLoading:!1},e}var n,s,o;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&A(e,a)}(t,v["Component"]),n=t,(s=[{key:"componentWillMount",value:function(){var e=this,a=this.props,t=a.dispatch,n=a.location;t(Object(k.f)()),t(Object(S.b)({id:n.query.id},function(){e.setState({loading:!1})}))}},{key:"_delPost",value:function(){var e=this.props.location,a=this;L({title:"提示",content:"确认要删除吗 ?",onOk:function(){var t={status:-1,id:e.query.id};Object(P.i)("POST","/news/status",C({},t),function(e){1===e.code?(f.a.success("删除成功"),a.closeWindow()):f.a.error(e.msg)})}})}},{key:"_forbidcomment",value:function(a){var t=this.props,n=t.location,c=t.dispatch,s={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(P.i)("post","/post/forbidcomment",s,function(e){200===e.status?c(Object(S.b)({id:n.query.id})):f.a.error(e.msg)})}},{key:"_isTop",value:function(a){var t=this.props,n=t.location,c=t.dispatch,s={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(P.i)("post","/post/top",s,function(e){200===e.status?c(Object(S.b)({id:n.query.id})):f.a.error(e.msg)})}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"channelName",value:function(e){var a="";return this.props.channelList.map(function(t,n){parseInt(t.value)===e&&(a=t.label)}),a}},{key:"render",value:function(){var e=this,a={md:{span:15},lg:{span:7,offset:1}},t=this.props.info;return b.a.createElement("div",null,b.a.createElement(c.a,{spinning:this.state.loading,size:"large"},t.id?b.a.createElement("div",{className:"post-detail"},b.a.createElement(i.a,null,b.a.createElement(m.a,{className:""},b.a.createElement(u.a,{onClick:this.edit,className:"mr10",type:"primary"},b.a.createElement(w.a,{type:"icon-edit"}),"编辑"),b.a.createElement(u.a,{onClick:function(){return e._delPost()}},b.a.createElement(w.a,{type:"icon-clear"}),"删除"))),2===t.status?b.a.createElement(i.a,{className:"nopass"},b.a.createElement(m.a,{className:""},b.a.createElement("span",{className:"name"},"审核不通过：",t.nopassReason))):"",b.a.createElement(i.a,{className:"news-detail-info"},b.a.createElement(m.a,J({className:"section"},a),b.a.createElement("span",{className:"name"},"作者："),b.a.createElement("span",{className:"desc"},"".concat(t.author||"无")," ")),b.a.createElement(m.a,J({className:"section"},a),b.a.createElement("span",{className:"name"},"文章来源："),b.a.createElement("span",{className:"desc"},"".concat(t.source||"无")," ")),b.a.createElement(m.a,J({className:"section"},a),b.a.createElement("span",{className:"name"},"频道："),b.a.createElement("span",{className:"desc"},"".concat(this.channelName(t.channelId)||"无")," ")),b.a.createElement(m.a,J({className:"section"},a),b.a.createElement("span",{className:"name"},"类别："),b.a.createElement("span",{className:"desc"},"".concat(1===t.cateId?"原创":"转载")," ")),b.a.createElement(m.a,J({className:"section"},a),b.a.createElement("span",{className:"name"},"独家："),b.a.createElement("span",{className:"desc"},"".concat(t.original&&1===parseInt(t.original)?"是":"否")," ")),b.a.createElement(m.a,J({className:"section"},a),b.a.createElement("span",{className:"name"},"策略分类："),b.a.createElement("span",{className:"desc"},"".concat(t.strategyCat||"")," "))),b.a.createElement(i.a,{className:"news-tags"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"标签："),t.tags&&""!==t.tags?t.tags.split(",").map(function(e,a){return b.a.createElement(r.a,{key:a,color:"blue",style:{marginLeft:5}},e)}):"无")),b.a.createElement(i.a,{className:"news-title"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"文章标题："),b.a.createElement("span",{className:"desc"},"".concat(t.title)," "))),b.a.createElement(i.a,{className:"news-summary"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"文章摘要："),b.a.createElement("span",{className:"desc"},"".concat(t.synopsis)," "))),b.a.createElement(i.a,{className:"news-summary"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"音频："),t.audio&&Object(P.G)(t.audio)&&JSON.parse(t.audio)[0]?b.a.createElement("a",{target:"_blank",href:JSON.parse(t.audio)[0].fileUrl,className:""},JSON.parse(t.audio)[0].fileName," "):b.a.createElement("span",{className:"desc"},"暂无音频"))),b.a.createElement(i.a,{className:"news-summary"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"视频："),t.video&&Object(P.G)(t.video)&&JSON.parse(t.video)[0]?b.a.createElement("a",{target:"_blank",href:JSON.parse(t.video)[0].fileUrl,className:""},JSON.parse(t.video)[0].fileName," "):b.a.createElement("span",{className:"desc"},"暂无视频"))),Object(P.G)(t.coverPic)?b.a.createElement("div",null,b.a.createElement(i.a,{className:"news-cover-img"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"PC-文章封面："),JSON.parse(t.coverPic).pc?b.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).pc)},src:"".concat(JSON.parse(t.coverPic).pc)}):b.a.createElement("span",{style:{padding:6}},"暂无文章封面"))),b.a.createElement(i.a,{className:"news-cover-img"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"PC-推荐位封面："),JSON.parse(t.coverPic).pc_recommend&&""!==JSON.parse(t.coverPic).pc_recommend?b.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).pc_recommend)},src:"".concat(JSON.parse(t.coverPic).pc_recommend)}):b.a.createElement("span",{style:{padding:6}},"暂无推荐位封面"))),b.a.createElement(i.a,{className:"news-cover-img"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-文章封面："),JSON.parse(t.coverPic).wap_small?b.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).wap_small)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).wap_small)}):b.a.createElement("span",{style:{padding:6}},"暂无文章封面"))),b.a.createElement(i.a,{className:"news-cover-img"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-推荐："),JSON.parse(t.coverPic).wap_big?b.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).wap_big)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).wap_big)}):b.a.createElement("span",{style:{padding:6}},"暂无推荐封面"))),b.a.createElement(i.a,{className:"news-cover-img"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"视频PC封面："),JSON.parse(t.coverPic).video_pc?b.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).video_pc)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).video_pc)}):b.a.createElement("span",{style:{padding:6}},"暂无视频封面"))),b.a.createElement(i.a,{className:"news-cover-img"},b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"视频M端封面："),JSON.parse(t.coverPic).video_m?b.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).video_m)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).video_m)}):b.a.createElement("span",{style:{padding:6}},"暂无视频封面")))):b.a.createElement(i.a,null,b.a.createElement(m.a,{className:"section"},b.a.createElement("span",{className:"name"},"文章封面："),b.a.createElement("span",{style:{paddingTop:"6px"}},"暂无"))),b.a.createElement(N.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},b.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),b.a.createElement(i.a,null,b.a.createElement(m.a,{style:{fontSize:"15px",fontWeight:"bolder",padding:"5px",color:"#000"}},"文章内容: "),b.a.createElement(m.a,{className:"page-box post-content simditor"},b.a.createElement("div",{className:"post-main simditor-body"},b.a.createElement("div",{className:"content-text",dangerouslySetInnerHTML:this.createMarkup(t.content)})))),b.a.createElement("div",{className:"btns",style:{margin:"20px 0"}},b.a.createElement(u.a,{type:"primary","data-status":"1",onClick:this.handleSubmit,style:{marginRight:"10px"}},"审核通过并发表"),b.a.createElement(u.a,{type:"primary","data-status":"4",onClick:this.handleSubmit,style:{marginRight:"10px"}},"暂存到审核中"),b.a.createElement(u.a,{type:"primary","data-status":"2",onClick:this.handleSubmit,style:{marginRight:"10px"}},"审核驳回"),b.a.createElement(u.a,{type:"primary",className:"cancel",onClick:this.closeWindow},"取消"))):b.a.createElement("div",{style:{height:300}},"加载中...")),this.state.closeLoading&&b.a.createElement(_.a,{handleCancel:function(a){clearInterval(a),e.setState({closeLoading:!1})},closeLoading:this.state.closeLoading}))}}])&&x(n.prototype,s),o&&x(n,o),t}();a.default=Object(h.connect)(function(e){return{info:e.articleAudit.info,channelList:e.channelListInfo}})(D)}.call(this,t(97))},1618:function(e,a,t){var n=t(1619);"string"==typeof n&&(n=[[e.i,n,""]]);var c={transform:void 0};t(186)(n,c);n.locals&&(e.exports=n.locals)},1619:function(e,a,t){(e.exports=t(185)(!1)).push([e.i,"",""])},1620:function(e,a,t){"use strict";t.d(a,"e",function(){return l}),t.d(a,"c",function(){return m}),t.d(a,"b",function(){return p}),t.d(a,"d",function(){return u}),t.d(a,"a",function(){return f}),t.d(a,"h",function(){return E}),t.d(a,"f",function(){return y}),t.d(a,"g",function(){return g});t(361);var n=t(20),c=t.n(n),s=t(48),r=t(2);function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(a){i(e,a,t[a])})}return e}function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var l=function(e){return{type:r.xb,data:e}},m=function(e,a,t){return function(n){var r="init"===e?"/news/shownews":"/post/search";Object(s.i)("get",r,a?o({},a,{createrType:1}):{},function(e){if(1===e.code){var a=e.obj;n(d({list:a.inforList})),n(g({totalCount:a.recordCount,pageSize:a.pageSize,currPage:a.currentPage})),t&&t(a)}else c.a.error(e.msg)})}},p=function(e,a){return function(t){Object(s.i)("post","/news/getbyid",o({},e),function(e){if(1===e.code){var n=e.obj;t(d({info:n})),a&&a(n)}else c.a.error(e.msg)})}},u=function(e,a){return function(t){Object(s.i)("post","/news/setorder",o({},e),function(t){1===t.code?(0===parseInt(e.topOrder)?c.a.success("取消置顶成功！"):c.a.success("置顶成功！"),a&&a()):c.a.error(t.msg)})}},d=function(e){return{type:r.k.ADD_DATA,data:e}},f=function(e,a){return{type:r.k.EDIT_LIST_ITEM,data:e,index:a}},E=function(e){return{type:r.k.SET_SEARCH_QUERY,data:e}},y=function(e){return{type:r.k.SET_FILTER_DATA,data:e}},g=function(e){return{type:r.k.SET_PAGE_DATA,data:e}}}}]);