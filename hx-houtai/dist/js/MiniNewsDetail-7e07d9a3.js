(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{1487:function(e,a,t){"use strict";t.r(a),function(e){t(675);var n=t(676),c=t.n(n),s=(t(1394),t(1395)),r=t.n(s),l=(t(1381),t(1382)),i=t.n(l),o=(t(1383),t(1384)),m=t.n(o),p=(t(247),t(183)),u=t.n(p),d=(t(361),t(20)),f=t.n(d),N=(t(1376),t(1377)),E=t.n(N),v=t(0),y=t.n(v),h=t(246),g=t(10),b=t(1663),w=t(48);t(1662),t(1610);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){return(S=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function k(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,a){return(j=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function J(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var I=E.a.confirm,C=function(a){function t(){var e,a,n;return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=P(t).call(this),e=!n||"object"!==O(n)&&"function"!=typeof n?_(a):n,J(_(e),"edit",function(){var a=e.props.info;g.hashHistory.push({pathname:"/miniNews-send",query:{id:a.id}}),sessionStorage.setItem("hx_content",JSON.stringify(a))}),J(_(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),J(_(e),"showModal",function(a){e.setState({previewVisible:!0,previewImage:a})}),e.state={isEdit:!1,loading:!0,previewVisible:!1,previewImage:""},e}var n,s,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&j(e,a)}(t,v["Component"]),n=t,(s=[{key:"componentWillMount",value:function(){var e=this,a=this.props,t=a.dispatch,n=a.location;t(Object(b.c)({id:n.query.id},function(){e.setState({loading:!1})}))}},{key:"_delMiniApp",value:function(){var e=this.props.location;I({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={status:-1,id:e.query.id};Object(w.i)("POST","/miniapp/status",function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(a){J(e,a,t[a])})}return e}({},a),function(e){1===e.code?(f.a.success("删除成功"),g.hashHistory.goBack()):f.a.error(e.msg)})}})}},{key:"_forbidcomment",value:function(a){var t=this.props,n=t.location,c=t.dispatch,s={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(w.i)("post","/post/forbidcomment",s,function(e){200===e.status?c(Object(b.c)({id:n.query.id})):f.a.error(e.msg)})}},{key:"_isTop",value:function(a){var t=this.props,n=t.location,c=t.dispatch,s={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(w.i)("post","/post/top",s,function(e){200===e.status?c(Object(b.c)({id:n.query.id})):f.a.error(e.msg)})}},{key:"sendPost",value:function(a){var t=this.props.location,n={appId:e.cookie("gameId"),id:t.query.id,title:a.postTitle,content:"".concat(a.postContent)};console.log(n)}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"channelName",value:function(e){var a="";return this.props.channelList.map(function(t,n){parseInt(t.value)===e&&(a=t.label)}),a}},{key:"render",value:function(){var e=this,a={span:5,offset:1},t=this.props.info;return y.a.createElement(c.a,{spinning:this.state.loading,size:"large"},t.id?y.a.createElement("div",{className:"miniApp-detail"},y.a.createElement(i.a,null,y.a.createElement(m.a,{span:1},y.a.createElement(u.a,{shape:"circle",icon:"arrow-left",onClick:function(){return g.hashHistory.goBack()}}))),y.a.createElement(i.a,{className:"news-detail-info"},y.a.createElement(m.a,S({className:"section"},a),y.a.createElement("span",{className:"name"},"作者："),y.a.createElement("span",{className:"desc"},"".concat(t.author)," ")),y.a.createElement(m.a,S({className:"section"},a),y.a.createElement("span",{className:"name"},"新闻来源："),y.a.createElement("span",{className:"desc"},"".concat(t.source)," ")),y.a.createElement(m.a,S({className:"section"},a),y.a.createElement("span",{className:"name"},"频道："),y.a.createElement("span",{className:"desc"},"".concat(this.channelName(t.channelId))," ")),y.a.createElement(m.a,S({className:"section"},a),y.a.createElement("span",{className:"name"},"类别："),y.a.createElement("span",{className:"desc"},"".concat(1===t.cateId?"原创":"转载")," ")),y.a.createElement(m.a,S({className:"section"},a),y.a.createElement("span",{className:"name"},"独家："),y.a.createElement("span",{className:"desc"},"".concat(t.original&&1===parseInt(t.original)?"是":"否")," "))),y.a.createElement(i.a,{className:"news-tags"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"标签："),t.tags&&t.tags.split(",").map(function(e,a){return y.a.createElement(r.a,{key:a,color:"blue",style:{marginLeft:5}},e)}))),y.a.createElement(i.a,{className:"news-title"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"新闻标题："),y.a.createElement("span",{className:"desc"},"".concat(t.title)," "))),y.a.createElement(i.a,{className:"news-summary"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"新闻摘要："),y.a.createElement("span",{className:"desc"},"".concat(t.synopsis)," "))),y.a.createElement(i.a,{className:"news-summary"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name",style:{verticalAlign:"middle"}},"音频："),y.a.createElement("ul",{className:"desc",style:{display:"inline-block",verticalAlign:"middle"}},Object(w.G)(t.audio)&&0!==JSON.parse(t.audio).length?JSON.parse(t.audio).map(function(e,a){return y.a.createElement("li",{className:"clearfix",key:a,style:{margin:"5px 0"}},y.a.createElement("span",{style:{verticalAlign:"middle"}},e.fileName),y.a.createElement("audio",{style:{verticalAlign:"middle"},src:e.fileUrl,controls:"controls"}))}):y.a.createElement("span",null,"暂无")))),y.a.createElement(i.a,{className:"news-summary"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name",style:{verticalAlign:"middle"}},"视频："),y.a.createElement("ul",{className:"desc",style:{display:"inline-block",verticalAlign:"middle"}},Object(w.G)(t.video)&&0!==JSON.parse(t.video).length?JSON.parse(t.video).map(function(e,a){return y.a.createElement("li",{className:"clearfix",key:a,style:{margin:"5px 0"}},y.a.createElement("video",{width:"200",style:{verticalAlign:"middle"},src:e.fileUrl,preload:"metadata",controls:"controls"}))}):y.a.createElement("span",null,"暂无")))),Object(w.G)(t.coverPic)?y.a.createElement("div",null,Object(w.G)(t.video)&&0!==JSON.parse(t.video).length?y.a.createElement(i.a,{className:"news-cover-img"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"PC-视频封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).video_pc)},src:"".concat(JSON.parse(t.coverPic).video_pc)})),y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"M-视频封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).video_m)},src:"".concat(JSON.parse(t.coverPic).video_m)}))):"",y.a.createElement(i.a,{className:"news-cover-img"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"PC-新闻封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).pc)},src:"".concat(JSON.parse(t.coverPic).pc)}))),y.a.createElement(i.a,{className:"news-cover-img"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"PC-推荐位封面："),JSON.parse(t.coverPic).pc_recommend&&""!==JSON.parse(t.coverPic).pc_recommend?y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).pc_recommend)},src:"".concat(JSON.parse(t.coverPic).pc_recommend)}):y.a.createElement("span",{style:{padding:6}},"暂无推荐位封面"))),y.a.createElement(i.a,{className:"news-cover-img"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-新闻封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).wap_small)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).wap_small)}))),y.a.createElement(i.a,{className:"news-cover-img"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-推荐："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).wap_big)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).wap_big)})))):y.a.createElement(i.a,{className:"news-cover-img"},y.a.createElement(m.a,{className:"section"},y.a.createElement("span",{className:"name"},"新闻封面："),y.a.createElement("span",null,"暂无"))),y.a.createElement(E.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},y.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),y.a.createElement(i.a,null,y.a.createElement(m.a,{style:{fontSize:"15px",fontWeight:"bolder",padding:"5px",color:"#000"}},"新闻内容: "),y.a.createElement(m.a,{className:"page-box miniApp-content simditor"},y.a.createElement("div",{className:"miniApp-main simditor-body"},y.a.createElement("div",{className:"content-text",dangerouslySetInnerHTML:this.createMarkup(t.content)}))))):y.a.createElement("div",{style:{height:300}},"加载中..."))}}])&&k(n.prototype,s),l&&k(n,l),t}();a.default=Object(h.connect)(function(e){return{info:e.miniAppInfo.info,channelList:e.channelListInfo}})(C)}.call(this,t(97))}}]);