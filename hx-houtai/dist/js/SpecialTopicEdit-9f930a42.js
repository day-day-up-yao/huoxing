(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{1466:function(e,a,t){"use strict";t.r(a);t(675);var c=t(676),l=t.n(c),r=(t(247),t(183)),n=t.n(r),i=(t(1376),t(1377)),s=t.n(i),o=(t(1388),t(1389)),m=t.n(o),p=(t(184),t(1378)),u=t.n(p),g=(t(1387),t(50)),d=t.n(g),h=(t(361),t(20)),f=t.n(h),S=(t(1379),t(1380)),I=t.n(S),b=t(0),v=t.n(b),y=t(246),w=t(10),E=t(1660),N=t(48);t(1649);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e}).apply(this,arguments)}function F(e,a){for(var t=0;t<a.length;t++){var c=a[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,a){return(P=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function C(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var O=I.a.Item,x=function(e){function a(){var e,t,c,l;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return c=this,l=(e=B(a)).call.apply(e,[this].concat(n)),t=!l||"object"!==k(l)&&"function"!=typeof l?T(c):l,C(T(t),"state",{updateOrNot:!1,previewVisible:!1,previewImage:"",pcImgSrcFileList:[],pcNewImgSrcFileList:[],mImgSrcFileList:[],pcImgSrc:"",pcNewImgSrc:"",mImgSrc:"",pcBackImageFileList:[],mBackImageFileList:[],pcBackImage:"",mBackImage:"",loading:!0}),C(T(t),"handleCancel",function(){return t.setState({previewVisible:!1})}),C(T(t),"handlePreview",function(e){t.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),C(T(t),"handlePcNewImgChange",function(e){var a=e.file,c=e.fileList;t.setState({pcNewImgSrcFileList:c}),"removed"===a.status&&t.setState({pcNewImgSrc:""}),a.response&&(1===a.response.code&&"done"===a.status&&t.setState({pcNewImgSrc:a.response.obj}),"error"===a.status&&(f.a.error("网络错误，上传失败！"),t.setState({pcNewImgSrc:"",pcNewImgSrcFileList:[]})))}),C(T(t),"handlePcImgChange",function(e){var a=e.file,c=e.fileList;t.setState({pcImgSrcFileList:c}),"removed"===a.status&&t.setState({pcImgSrc:""}),a.response&&(1===a.response.code&&"done"===a.status&&t.setState({pcImgSrc:a.response.obj}),"error"===a.status&&(f.a.error("网络错误，上传失败！"),t.setState({pcImgSrc:"",pcImgSrcFileList:[]})))}),C(T(t),"handleMImgChange",function(e){var a=e.file,c=e.fileList;t.setState({mImgSrcFileList:c}),"removed"===a.status&&t.setState({mImgSrc:""}),a.response&&(1===a.response.code&&"done"===a.status&&t.setState({mImgSrc:a.response.obj}),"error"===a.status&&(f.a.error("网络错误，上传失败！"),t.setState({mImgSrc:"",mImgSrcFileList:[]})))}),C(T(t),"handlePcBackImgChange",function(e){var a=e.file,c=e.fileList;t.setState({pcBackImageFileList:c}),"removed"===a.status&&t.setState({pcBackImage:""}),a.response&&(1===a.response.code&&"done"===a.status&&t.setState({pcBackImage:a.response.obj}),"error"===a.status&&(f.a.error("网络错误，上传失败！"),t.setState({pcBackImage:"",pcBackImageFileList:[]})))}),C(T(t),"handleMBackImgChange",function(e){var a=e.file,c=e.fileList;t.setState({mBackImageFileList:c}),"removed"===a.status&&t.setState({mBackImage:""}),a.response&&(1===a.response.code&&"done"===a.status&&t.setState({mBackImage:a.response.obj}),"error"===a.status&&(f.a.error("网络错误，上传失败！"),t.setState({mBackImage:"",mBackImageFileList:[]})))}),C(T(t),"handleSubmit",function(e){e.preventDefault(),t.props.form.setFieldsValue({pcImgSrc:t.state.pcImgSrc,mImgSrc:t.state.mImgSrc,pcBackImage:t.state.pcBackImage,mBackImage:t.state.mBackImage,pcNewImgSrc:t.state.pcNewImgSrc}),t.props.form.validateFieldsAndScroll(function(e,a){e||(t.setState({loading:!0}),a.id=t.props.location.query.id,a.type=4,a.setTop=t.props.specialTopicInfo.setTop,a.newSmallPcImgSrc=t.state.pcNewImgSrc,delete a.pcNewImgSrc,Object(N.i)("post","/topic/update",a,function(e){1===e.code?(t.setState({loading:!1}),f.a.success("修改成功！"),w.hashHistory.push("/specialTopic-list")):(t.setState({loading:!1}),f.a.error(e.msg))}))})}),C(T(t),"createMarkup",function(e){return{__html:e}}),t}var t,c,r;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&P(e,a)}(a,b["Component"]),t=a,(c=[{key:"componentWillMount",value:function(){var e=this,a=this.props,t=a.dispatch,c=a.location;c.query.id?t(Object(E.a)({id:c.query.id},function(a){e.setState({updateOrNot:!0,pcImgSrcFileList:[{uid:0,name:"xxx.png",status:"done",url:a.pcImgSrc}],pcNewImgSrcFileList:a.newSmallPcImgSrc?[{uid:0,name:"xxx.png",status:"done",url:a.newSmallPcImgSrc}]:[],mImgSrcFileList:[{uid:0,name:"xxx.png",status:"done",url:a.mImgSrc}],pcBackImageFileList:[{uid:0,name:"xxx.png",status:"done",url:a.pcBackImage}],mBackImageFileList:[{uid:0,name:"xxx.png",status:"done",url:a.mBackImage}],pcImgSrc:a.pcImgSrc,pcNewImgSrc:a.newSmallPcImgSrc,mImgSrc:a.mImgSrc,pcBackImage:a.pcBackImage,mBackImage:a.mBackImage,loading:!1})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.props.specialTopicInfo,t=this.state,c=t.previewVisible,r=t.previewImage,i=t.pcNewImgSrcFileList,o=t.pcImgSrcFileList,p=t.pcBackImageFileList,g=t.mBackImageFileList,h=t.updateOrNot,f=t.mImgSrcFileList,S={labelCol:{span:1},wrapperCol:{span:15,offset:1}},b=v.a.createElement("div",null,v.a.createElement(d.a,{type:"plus"}),v.a.createElement("div",{className:"ant-upload-text"},"上传图片"));return v.a.createElement("div",{className:"specialTopic-send"},v.a.createElement(l.a,{spinning:this.state.loading,size:"large"},v.a.createElement(I.a,{onSubmit:this.handleSubmit},v.a.createElement(O,L({className:"specialTopicTitle"},S,{label:"专题名称 "}),e("topicName",{initialValue:h&&a?"".concat(a.topicName):"",rules:[{required:!0,message:"请输入专题名称！"}]})(v.a.createElement(u.a,{className:"specialTopic-name",placeholder:"请输入专题名称"}))),v.a.createElement(O,L({className:"specialTopicTitle"},S,{label:"专题关键字 "}),e("tags",{initialValue:h&&a?"".concat(a.tags||""):"",rules:[{required:!0,message:"请输入专题关键字！"}]})(v.a.createElement(u.a,{className:"specialTopic-tags",placeholder:"请输入专题关键字"}))),v.a.createElement(O,L({className:"specialTopicTitle"},S,{label:"KeyWords "}),e("keyword",{initialValue:h&&a?"".concat(a.keyword||""):"",rules:[{required:!0,message:"请输入专题的 KeyWords！"}]})(v.a.createElement(u.a,{className:"specialTopic-tags",placeholder:"专题 KeyWords (用于 SEO 优化)"}))),v.a.createElement(O,L({className:"specialTopicTitle"},S,{label:"Description "}),e("description",{initialValue:h&&a?"".concat(a.description||""):"",rules:[{required:!0,message:"请输入专题的介绍！"}]})(v.a.createElement(u.a,{className:"specialTopic-tags",placeholder:"专题顶部介绍"}))),v.a.createElement(O,L({className:"specialTopicTitle"},S,{label:"DescForSEO "}),e("descriptionForSEO",{initialValue:h&&a?"".concat(a.descriptionForSEO||""):"",rules:[{message:"请输入专题的 SEO 描述！"}]})(v.a.createElement(u.a,{className:"specialTopic-tags",placeholder:"专题描述(用于 SEO 优化)"}))),v.a.createElement(O,L({},S,{className:"specialTopicTitle",label:"专题链接："}),e("typeLink",{initialValue:h&&a?"".concat(a.typeLink||""):"",rules:[{type:"url",message:"请输入正确的超链接地址！"}]})(v.a.createElement(u.a,{placeholder:"专题跳转的超链接地址(非必填)"}))),v.a.createElement(O,L({},S,{label:"pc 首页封面(新): ",className:"upload-div"}),v.a.createElement("div",{className:"dropbox"},e("pcNewImgSrc",{initialValue:h&&a?i:"",rules:[{required:!0,message:"请上传新首页pc 封面图！"}]})(v.a.createElement(m.a,{headers:{"Sign-Param":Object(N.A)()},action:"".concat(N.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:i,onPreview:this.handlePreview,onChange:this.handlePcNewImgChange},i.length>=1?null:b)),v.a.createElement(s.a,{visible:c,footer:null,onCancel:this.handleCancel},v.a.createElement("img",{alt:"example",style:{width:"100%"},src:r})),v.a.createElement("span",{className:"cover-img-tip"},"用于 pc 端新首页推荐的封面图展示, 长宽比例: ",v.a.createElement("font",{style:{color:"red"}},"90 * 65")))),v.a.createElement(O,L({},S,{label:"pc 封面: ",className:"upload-div"}),v.a.createElement("div",{className:"dropbox"},e("pcImgSrc",{initialValue:h&&a?o:"",rules:[{required:!0,message:"请上传pc 封面图！"}]})(v.a.createElement(m.a,{headers:{"Sign-Param":Object(N.A)()},action:"".concat(N.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:o,onPreview:this.handlePreview,onChange:this.handlePcImgChange},o.length>=1?null:b)),v.a.createElement(s.a,{visible:c,footer:null,onCancel:this.handleCancel},v.a.createElement("img",{alt:"example",style:{width:"100%"},src:r})),v.a.createElement("span",{className:"cover-img-tip"},"用于 pc 端首页推荐的封面图展示, 长宽比例: ",v.a.createElement("font",{style:{color:"red"}},"300 * 100")))),v.a.createElement(O,L({},S,{label:"pc 专题背景: ",className:"upload-div"}),v.a.createElement("div",{className:"dropbox"},e("pcBackImage",{initialValue:h&&a?p:"",rules:[{required:!0,message:"请上传 pc 专题背景！"}]})(v.a.createElement(m.a,{headers:{"Sign-Param":Object(N.A)()},action:"".concat(N.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:p,onPreview:this.handlePreview,onChange:this.handlePcBackImgChange},p.length>=1?null:b)),v.a.createElement(s.a,{visible:c,footer:null,onCancel:this.handleCancel},v.a.createElement("img",{alt:"example",style:{width:"100%"},src:r})),v.a.createElement("span",{className:"cover-img-tip"},"用于专题页面的背景图展示, 长宽比例: ",v.a.createElement("font",{style:{color:"red"}},"1920 * 300")))),v.a.createElement(O,L({},S,{label:"M 端专题封面: ",className:"upload-div"}),v.a.createElement("div",{className:"dropbox"},e("mImgSrc",{initialValue:h&&a?f:"",rules:[{required:!0,message:"请上传 m 专题封面图！"}]})(v.a.createElement(m.a,{headers:{"Sign-Param":Object(N.A)()},action:"".concat(N.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:f,onPreview:this.handlePreview,onChange:this.handleMImgChange},f.length>=1?null:b)),v.a.createElement(s.a,{visible:c,footer:null,onCancel:this.handleCancel},v.a.createElement("img",{alt:"example",style:{width:"100%"},src:r})),v.a.createElement("span",{className:"cover-img-tip"},"用于 M 端首页推荐的封面图展示, 长宽比例: ",v.a.createElement("font",{style:{color:"red"}},"252 * 136")))),v.a.createElement(O,L({},S,{label:"M 端专题背景: ",className:"upload-div"}),v.a.createElement("div",{className:"dropbox"},e("mBackImage",{initialValue:h&&a?g:"",rules:[{required:!0,message:"请上传 M 端专题背景！"}]})(v.a.createElement(m.a,{headers:{"Sign-Param":Object(N.A)()},action:"".concat(N.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:g,onPreview:this.handlePreview,onChange:this.handleMBackImgChange},g.length>=1?null:b)),v.a.createElement(s.a,{visible:c,footer:null,onCancel:this.handleCancel},v.a.createElement("img",{alt:"example",style:{width:"100%"},src:r})),v.a.createElement("span",{className:"cover-img-tip"},"用于 M 端专题页面的背景图展示, 长宽比例: ",v.a.createElement("font",{style:{color:"red"}},"待定")))),v.a.createElement(O,{wrapperCol:{span:12,offset:2}},v.a.createElement(n.a,{type:"primary","data-status":"1",htmlType:"submit",style:{marginRight:"10px"}},"保存"),v.a.createElement(n.a,{type:"primary",className:"cancel",onClick:function(){w.hashHistory.goBack()}},"取消")))))}}])&&F(t.prototype,c),r&&F(t,r),a}();a.default=Object(y.connect)(function(e){return{specialTopicInfo:e.specialTopicInfo.info,selectData:e.specialTopicInfo.selectedData}})(I.a.create()(x))}}]);