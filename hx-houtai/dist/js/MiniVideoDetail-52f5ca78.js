(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{1490:function(e,a,t){"use strict";t.r(a),function(e){t(675);var n=t(676),c=t.n(n),r=(t(1394),t(1395)),s=t.n(r),o=(t(1381),t(1382)),l=t.n(o),i=(t(1383),t(1384)),m=t.n(i),p=(t(247),t(183)),u=t.n(p),d=(t(361),t(20)),f=t.n(d),E=(t(1376),t(1377)),y=t.n(E),v=t(0),N=t.n(v),b=t(246),h=t(10),g=t(1605),w=t(1682),O=t(48);t(1681),t(1610);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function S(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,a){return(J=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function C(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var M=y.a.confirm,I=function(a){function t(){var e,a,n;return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=_(t).call(this),e=!n||"object"!==k(n)&&"function"!=typeof n?j(a):n,C(j(e),"edit",function(){var a=e.props.info;h.hashHistory.push({pathname:"/miniVideo-send",query:{id:a.id}})}),C(j(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),C(j(e),"showModal",function(a){e.setState({previewVisible:!0,previewImage:a})}),e.state={isEdit:!1,loading:!0,previewVisible:!1,previewImage:""},e}var n,r,o;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&J(e,a)}(t,v["Component"]),n=t,(r=[{key:"componentWillMount",value:function(){var e=this,a=this.props,t=a.dispatch,n=a.location;t(Object(w.b)({id:n.query.id},function(){e.setState({loading:!1})}))}},{key:"_delMiniVideo",value:function(){var e=this.props.location;M({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={status:-1,id:e.query.id};Object(O.i)("POST","/miniappvideo/status",function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(a){C(e,a,t[a])})}return e}({},a),function(e){1===e.code?(f.a.success("删除成功"),h.hashHistory.goBack()):f.a.error(e.msg)})}})}},{key:"_forbidcomment",value:function(a){var t=this.props,n=t.location,c=t.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(O.i)("post","/post/forbidcomment",r,function(e){200===e.status?c(Object(w.b)({id:n.query.id})):f.a.error(e.msg)})}},{key:"_isTop",value:function(a){var t=this.props,n=t.location,c=t.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(O.i)("post","/post/top",r,function(e){200===e.status?c(Object(w.b)({id:n.query.id})):f.a.error(e.msg)})}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"channelName",value:function(e){var a="";return O.p.map(function(t,n){parseInt(t.value)===e&&(a=t.label)}),a}},{key:"render",value:function(){var e=this,a={span:5,offset:1},t=this.props.info;return N.a.createElement(c.a,{spinning:this.state.loading,size:"large"},t.id?N.a.createElement("div",{className:"miniVideo-detail"},N.a.createElement(l.a,null,N.a.createElement(m.a,{span:1},N.a.createElement(u.a,{shape:"circle",icon:"arrow-left",onClick:function(){return h.hashHistory.goBack()}})),N.a.createElement(m.a,{className:"text-right",span:20,offset:3},N.a.createElement(u.a,{onClick:this.edit,className:"mr10",type:"primary"},N.a.createElement(g.a,{type:"icon-edit"}),"编辑"),N.a.createElement(u.a,{onClick:function(){return e._delMiniVideo()}},N.a.createElement(g.a,{type:"icon-clear"}),"删除"))),N.a.createElement(l.a,{className:"news-detail-info"},N.a.createElement(m.a,P({className:"section"},a),N.a.createElement("span",{className:"name"},"作者："),N.a.createElement("span",{className:"desc"},"".concat(t.author)," ")),N.a.createElement(m.a,P({className:"section"},a),N.a.createElement("span",{className:"name"},"视频来源："),N.a.createElement("span",{className:"desc"},t.source," ")),N.a.createElement(m.a,P({className:"section"},a),N.a.createElement("span",{className:"name"},"发布时间："),N.a.createElement("span",{className:"desc"},Object(O.w)(t.publishTime)," "))),N.a.createElement(l.a,{className:"news-tags"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"标签："),t.tags&&t.tags.split(",").map(function(e,a){return N.a.createElement(s.a,{key:a,color:"blue",style:{marginLeft:5}},e)}))),N.a.createElement(l.a,{className:"news-title"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"视频标题："),N.a.createElement("span",{className:"desc"},"".concat(t.title)," "))),N.a.createElement(l.a,{className:"news-summary"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"视频简介："),N.a.createElement("span",{className:"desc"},"".concat(t.content)," "))),N.a.createElement(l.a,{className:"news-summary"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name",style:{verticalAlign:"middle"}},"视频："),N.a.createElement("ul",{className:"desc",style:{display:"inline-block",verticalAlign:"middle"}},Object(O.G)(t.url)&&0!==JSON.parse(t.url).length?JSON.parse(t.url).map(function(e,a){return N.a.createElement("li",{className:"clearfix",key:a,style:{margin:"5px 0"}},N.a.createElement("video",{width:"200",style:{verticalAlign:"middle"},src:e.fileUrl,preload:"metadata",controls:"controls"}))}):N.a.createElement("span",null,"暂无")))),Object(O.G)(t.coverPic)?N.a.createElement("div",null,Object(O.G)(t.url)&&0!==JSON.parse(t.url).length?N.a.createElement(l.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"PC-播放器封面："),N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).video_pc)},src:"".concat(JSON.parse(t.coverPic).video_pc)})),N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"M-播放器封面："),N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).video_m)},src:"".concat(JSON.parse(t.coverPic).video_m)}))):"",N.a.createElement(l.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"PC-缩略图："),N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).pc)},src:"".concat(JSON.parse(t.coverPic).pc)}))),N.a.createElement(l.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"PC-推荐缩略图："),JSON.parse(t.coverPic).pc_recommend&&""!==JSON.parse(t.coverPic).pc_recommend?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).pc_recommend)},src:"".concat(JSON.parse(t.coverPic).pc_recommend)}):N.a.createElement("span",{style:{padding:6}},"暂无推荐位封面"))),N.a.createElement(l.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-缩略图："),N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).wap_small)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).wap_small)}))),N.a.createElement(l.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-推荐缩略图："),N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(t.coverPic).wap_big)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(t.coverPic).wap_big)})))):N.a.createElement(l.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"缩略图："),N.a.createElement("span",null,"暂无"))),N.a.createElement(y.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},N.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage}))):N.a.createElement("div",{style:{height:300}},"加载中..."))}}])&&S(n.prototype,r),o&&S(n,o),t}();a.default=Object(b.connect)(function(e){return{info:e.miniVideoInfo.info}})(I)}.call(this,t(97))}}]);