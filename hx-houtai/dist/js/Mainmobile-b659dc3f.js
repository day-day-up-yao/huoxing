(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{1528:function(e,t,n){"use strict";n.r(t);n(1400);var a=n(1401),r=n.n(a),o=n(0),i=n.n(o),c=(n(1381),n(1382)),l=n.n(c),u=(n(1383),n(1384)),s=n.n(u),f=(n(247),n(183)),p=n.n(f),m=n(89),y=n(10),h=n(246),d=n(51),b=n.n(d),v=n(248);n(1714);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function E(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=r.a.Header,k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,j(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,o["Component"]),n=t,(a=[{key:"loginOut",value:function(){this.props.actions.logout({passportId:b.a.get("hx_passportId")})}},{key:"goAdd",value:function(){y.hashHistory.push("/mflash-edit")}},{key:"goMainPage",value:function(){y.hashHistory.push("/mobile")}},{key:"render",value:function(){var e=this;return i.a.createElement(S,{style:{textAlign:"center"}},i.a.createElement(l.a,{type:"flex",justify:"center"},i.a.createElement(s.a,{align:"center",span:8},i.a.createElement("div",{className:"header-item"},i.a.createElement(p.a,{type:"primary",onClick:function(){e.goAdd()}},"新增"))),i.a.createElement(s.a,{align:"center",span:8},i.a.createElement("div",{className:"header-item"},i.a.createElement(p.a,{type:"primary",onClick:function(){e.goMainPage()}},"回首页"))),i.a.createElement(s.a,{align:"center",span:8},i.a.createElement("div",{className:"header-item"},i.a.createElement(p.a,{type:"primary",onClick:function(){e.loginOut()}},"退出登录")))))}}])&&O(n.prototype,a),r&&O(n,r),t}(),P=Object(h.connect)(function(e){return{loginInfo:e.loginInfo}},function(e){return{actions:Object(m.bindActionCreators)({breadcrumb:v.b,navigation:v.o,logout:v.n},e)}})(k),C=(n(683),n(684)),_=n.n(C),T=(n(361),n(20)),A=n.n(T),D=(n(678),n(363)),I=n.n(D),x=(n(1379),n(1380)),N=n.n(x),M=(n(184),n(1378)),R=n.n(M),F=(n(1376),n(1377)),q=n.n(F),L=n(1625),H=n(1621),V=n(48);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){U(e,t,n[t])})}return e}function W(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=q.a.confirm,Y=R.a.TextArea,Z=N.a.Item,$=I.a.Group,ee={labelCol:{sm:{span:6}},wrapperCol:{sm:{span:16}}},te=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=B(t).call(this),e=!a||"object"!==z(a)&&"function"!=typeof a?K(n):a,U(K(e),"cancelModal",function(){e.props.form.resetFields(),e.setState({visible:!1})}),U(K(e),"showTopModal",function(t){var n=e.props.dispatch;e.setState({visible:!0}),n(Object(L.d)(t))}),U(K(e),"handleRecommend",function(t){var n=e.props.dispatch,a=K(e);X({title:"提示",content:"".concat(1===t.recCreaterType?"确认要撤回吗":"确认要推荐吗"," "),onOk:function(){var e={livesId:t.id,status:1===t.recCreaterType?0:1};Object(V.i)("POST","/lives/changeRecCreaterType",G({},e),function(e){1===e.code?(A.a.success("".concat(1===t.recCreaterType?"撤回成功":"推荐成功"," ")),a.doSearch("init"),n(Object(L.f)({type:"init"}))):A.a.error(e.msg)})}})}),e.state={visible:!1,loading:!0,terminal:"1, 2",apiAdd:""},e}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentWillMount",value:function(){var e=this.props.search;this.doSearch(e.type?e.type:"init")}},{key:"doSearch",value:function(e,t){var n=this,a=this.props,r=a.dispatch,o=a.pageData,i={title:a.search.title,currentPage:o.currPage,apiAdd:this.state.apiAdd};this.setState({loading:!0}),i=G({},i,t),r(Object(L.b)(e,i,function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1,apiAdd:this.state.apiAdd}),e(Object(L.e)({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,n=t.dispatch,a=t.search;n(Object(L.e)({currPage:e})),this.doSearch(a.type,{currentPage:e,apiAdd:this.state.apiAdd})}},{key:"delFlash",value:function(e){var t=this.props.dispatch,n=this;X({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={id:e.id,status:-1};Object(V.i)("POST","/lives/status",G({},a),function(e){1===e.code?(A.a.success("删除成功"),n.doSearch("init"),t(Object(L.f)({type:"init"}))):A.a.error(e.msg)})}})}},{key:"submitAccount",value:function(){var e=this.props,t=e.dispatch,n=e.form,a=e.selectedData,r=this;n.validateFields(function(e,o){if(o.type="flash",o.id=a.id,o.terminal="1",o.content=o.notifyContent,o.createTime=Date.parse(new Date),e)return!1;X({title:"提示",content:"确认要推送本条快讯吗 ?",onOk:function(){t(Object(H.a)(o,function(){r.setState({visible:!1}),n.resetFields(),r.doSearch("init")}))}})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.pageData,r=t.search,o=t.dispatch,c=t.form,l=t.selectedData,u=c.getFieldDecorator;return i.a.createElement("div",{className:"flash-index"},i.a.createElement("div",{style:{padding:"2% 3%"}},i.a.createElement(R.a,{onPressEnter:function(){e._search()},value:r.title,style:{width:"75%",marginRight:"7%"},onChange:function(e){return o(Object(L.f)({title:e.target.value}))},placeholder:"请输入要搜索的内容"}),i.a.createElement(p.a,{type:"primary",onClick:function(){e._search()}},"搜索")),n.map(function(t,n){return i.a.createElement("div",{id:n,key:n},i.a.createElement("div",{className:"item"},(a=t.content,"【".concat(a.split("【")[1].split("】")[0],"】"))),i.a.createElement("span",null,Object(V.x)(t.createdTime,"MM月dd日 h:m")),i.a.createElement("div",{className:"option"},i.a.createElement("p",null,i.a.createElement("a",{onClick:function(){return e.handleRecommend(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},1===t.recCreaterType?"从首页撤回":"推至首页")),i.a.createElement("p",null,i.a.createElement("a",{onClick:function(){e.showTopModal(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},"一键推送")),i.a.createElement(y.Link,{className:"mr10 opt-btn",to:{pathname:"/mflash-edit",query:{id:t.id}}},"编辑"),i.a.createElement("p",null,i.a.createElement("a",{onClick:function(){return e.delFlash(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},"删除"))));var a}),i.a.createElement("div",{className:"pagination"},i.a.createElement(_.a,{current:a.currPage,total:a.totalCount,pageSize:a.pageSize,onChange:function(t){return e.changePage(t)}})),i.a.createElement(q.a,{title:"添加推送信息",visible:this.state.visible,onOk:function(){return e.submitAccount()},onCancel:this.cancelModal,footer:[i.a.createElement(p.a,{key:"back",onClick:this.cancelModal},"取消"),i.a.createElement(p.a,{key:"submit",type:"primary",onClick:function(){e.submitAccount()}},"确定")]},i.a.createElement(N.a,null,i.a.createElement(Z,J({},ee,{label:"推送类型"}),"快讯"),i.a.createElement(Z,J({},ee,{label:"目标用户"}),u("pastDays",{initialValue:"3",rules:[{required:!0,message:"请选择目标用户类型！"}]})(i.a.createElement($,null,i.a.createElement(I.a,{value:"3"},"3日活跃"),i.a.createElement(I.a,{value:"7"},"7日活跃"),i.a.createElement(I.a,{value:"14"},"14日活跃"),i.a.createElement(I.a,{value:"0"},"全部"))),i.a.createElement("div",{style:{color:"rgb(255, 79, 62)"}},"推荐使用3日活跃，推送的目标用户过多会导致推送无法到达")),i.a.createElement(Z,J({},ee,{label:"快讯ID: "}),l.id?l.id:""),i.a.createElement(Z,J({},ee,{label:"推送标题: "}),u("title",{initialValue:l.id?Object(V.C)(l.content,!0):"",rules:[{required:!0,message:"请输入推送标题！"}]})(i.a.createElement(R.a,{placeholder:"推送标题"}))),i.a.createElement(Z,J({},ee,{label:"推送描述: "}),u("notifyContent",{initialValue:l.id?Object(V.y)(l.content):"",rules:[{required:!0,message:"请输入推送描述！"},{max:200,message:"推送描述保持在200字以内！"}]})(i.a.createElement(Y,{rows:6,placeholder:"推送描述",maxLength:200}))))))}}])&&W(n.prototype,a),r&&W(n,r),t}(),ne=Object(h.connect)(function(e){return{selectedData:e.flashInfo.selectedData,flashInfo:e.flashInfo,list:e.flashInfo.list,search:e.flashInfo.search,pageData:e.flashInfo.pageData,flashTypeList:e.flashTypeListInfo}})(N.a.create()(te));function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oe(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",function(){return le});var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,ie(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){return i.a.createElement(r.a,null,i.a.createElement(P,null),i.a.createElement(r.a,null,i.a.createElement(ne,null)))}}])&&re(n.prototype,a),c&&re(n,c),t}()},1714:function(e,t,n){var a=n(1851);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1851:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);