(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1564:function(e,t,n){"use strict";n.r(t);n(1376);var a=n(1377),r=n.n(a),o=(n(675),n(676)),i=n.n(o),l=(n(1385),n(1386)),c=n.n(l),s=(n(1381),n(1382)),u=n.n(s),p=(n(1383),n(1384)),f=n.n(p),m=(n(247),n(183)),h=n.n(m),d=(n(184),n(1378)),y=n.n(d),b=(n(361),n(20)),g=n.n(b),v=(n(1379),n(1380)),E=n.n(v),w=(n(677),n(362)),O=n.n(w),P=n(0),j=n.n(P),k=n(246),S=n(48),N=n(2),C=function(e,t){return function(n){Object(S.i)("get","/account/author/phone/update/list",e,function(e){if(1===e.code){var a=e.obj;n({type:N.h.AMENDPHONE_LIST,actionData:a}),t&&t(a)}else e.msg&&g.a.error(e.msg)})}},M=(n(1803),n(1605));function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=O.a.Option,z=E.a.Item,q=[],A={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},$=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return a=this,r=(e=_(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==x(r)&&"function"!=typeof r?F(a):r,L(F(n),"state",{loading:!0,visible:!1,previewVisible:!1,serchVal:""}),L(F(n),"doInit",function(e,t,a){(0,n.props.dispatch)(C({pageSize:20,search:e,page:t,status:a},function(){n.setState({loading:!1})}))}),L(F(n),"changePage",function(e){n.setState({loading:!0}),n.doInit(n.state.serchVal,e,"")}),L(F(n),"submitForm",function(){var e=F(n),t=n.props.form;t.validateFields(function(n,a){if(n)return!1;a.newMarsPhone2===a.newMarsPhone?Object(S.i)("post","/account/author/phone/update",{originMarsPhone:a.originMarsPhone,newMarsPhone:a.newMarsPhone},function(n){1===n.code?(g.a.success("修改成功!"),e.doInit(e.state.serchVal,1,""),e.setState({visible:!1}),t.resetFields()):g.a.success(n.msg)}):g.a.success("输入手机号码不一致!")})}),L(F(n),"cancelModal",function(){n.props.form.resetFields(),n.setState({visible:!1})}),L(F(n),"handleChange",function(e){var t=e.target.value;n.setState({serchVal:t})}),L(F(n),"handleSelectChange",function(e){n.doInit("",1,e)}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,P["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.doInit(this.state.serchVal,1,""),q=[{title:"旧手机号",key:"authorOriginPhone",render:function(e,t){return j.a.createElement("p",null,t.authorOriginPhone)}},{title:"新手机号",key:"authorNewPhone",render:function(e,t){return t&&j.a.createElement("div",{className:"flashAccount-info clearfix"},j.a.createElement("div",null,j.a.createElement("h4",{title:t.authorNewPhone},t.authorNewPhone)))}},{title:"昵称",key:"authorNickName",render:function(e,t){return t&&j.a.createElement("p",null,t.authorNickName)}},{title:"修改人",key:"adminNickName",render:function(e,t){return j.a.createElement("p",null,t.adminNickName)}},{title:"状态",key:"result",render:function(e,t){return j.a.createElement("p",{className:"phone-state"},0===t.result?j.a.createElement("span",{className:"defeated"},"修改失败"):j.a.createElement("span",{className:"succeed"},"修改成功"))}},{title:"修改时间",key:"createTime",render:function(e,t){return j.a.createElement("p",null,Object(S.w)(t.updateTime)||"时间格式错误")}}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.phoneObj,o=this.state.visible,l=n.getFieldDecorator,s=void 0===a.inforList?[]:a.inforList;return j.a.createElement("div",{className:"cooperation"},j.a.createElement(u.a,null,j.a.createElement(f.a,null,j.a.createElement(y.a,{style:{width:150,marginRight:"15px"},onChange:function(t){e.handleChange(t)},placeholder:"请输入手机号搜索"}),j.a.createElement(h.a,{type:"primary",onClick:function(){e.doInit(e.state.serchVal,1)}},"搜索"),j.a.createElement("span",{style:{marginLeft:20}},"状态筛选："),j.a.createElement(O.a,{defaultValue:"",style:{width:120},onChange:this.handleSelectChange},[{type:"",text:"全部"},{type:"0",text:"修改失败"},{type:"1",text:"修改成功"}].map(function(e,t){return j.a.createElement(T,{value:e.type,key:t},e.text)})),j.a.createElement("span",null,j.a.createElement(h.a,{type:"primary",style:{margin:"0 0 0 15px"},onClick:function(){e.setState({imageList:[],image:"",visible:!0})}},j.a.createElement(M.a,{type:"icon-post-send"}),"更换注册账号")))),j.a.createElement("div",{className:"mt30"},j.a.createElement(i.a,{spinning:this.state.loading,size:"large"},j.a.createElement(c.a,{dataSource:s.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){L(e,t,n[t])})}return e}({},e,{key:t})}),columns:q,bordered:!0,pagination:{current:a.currentPage,total:a.recordCount,pageSize:a.pageSize,onChange:function(t){return e.changePage(t)}}}))),j.a.createElement(r.a,{title:"用户手机号替换",visible:o,maskClosable:!1,onOk:this.submitForm,onCancel:this.cancelModal},j.a.createElement(E.a,null,j.a.createElement(z,V({},A,{label:"当前手机号"}),l("originMarsPhone",{rules:[{required:!0,pattern:/^1\d{10}$/,message:"手机号码不正确!"}],initialValue:""})(j.a.createElement(y.a,null))),j.a.createElement(z,V({},A,{label:"新手机号"}),l("newMarsPhone",{rules:[{required:!0,pattern:/^1\d{10}$/,message:"手机号码不正确!"}],initialValue:""})(j.a.createElement(y.a,null))),j.a.createElement(z,V({},A,{label:"确认手机号"}),l("newMarsPhone2",{rules:[{required:!0,pattern:/^1\d{10}$/,message:"手机号码不正确!"}],initialValue:""})(j.a.createElement(y.a,null))))))}}])&&I(n.prototype,a),o&&I(n,o),t}();t.default=Object(k.connect)(function(e){return{phoneObj:e.amendPhoneInfo.phoneObj}})(E.a.create()($))},1803:function(e,t,n){var a=n(1804);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1804:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);