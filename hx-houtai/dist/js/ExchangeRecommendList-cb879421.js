(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1541:function(e,t,n){"use strict";n.r(t);n(1379);var a=n(1380),r=n.n(a),o=(n(675),n(676)),i=n.n(o),c=(n(1385),n(1386)),l=n.n(c),u=(n(1381),n(1382)),s=n.n(u),f=(n(1383),n(1384)),p=n.n(f),m=(n(247),n(183)),d=n.n(m),y=(n(361),n(20)),b=n.n(y),h=(n(677),n(362)),v=n.n(h),g=(n(1376),n(1377)),k=n.n(g),O=n(0),E=n.n(O),S=n(246),w=(n(1830),n(1605)),j=(n(184),n(1378)),_=n.n(j),C=(n(678),n(363)),P=n.n(C),R=n(48);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M,H,V=r.a.Item,q=v.a.Option,z=P.a.Group,L=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=A(t).call(this,e),n=!r||"object"!==x(r)&&"function"!=typeof r?I(a):r,F(I(n),"typeOnChange",function(e){n.setState({type:e.target.value})}),F(I(n),"getAuthorList",function(e,t){M&&(clearTimeout(M),M=null),H=e;M=setTimeout(function(){Object(R.P)("post","/market/tickers/market/collect_list",{},function(a){if(n.setState({searching:!1}),H===e){var r=a.data,o=[];console.log(r),r.forEach(function(e,t){o.push({value:e,text:e})}),t(o)}})},300)}),n.state={data:[],value:"",description:"",loading:!0,userType:"1",searching:!1,type:1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,O["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.getAuthorList("",function(t){return e.setState({data:t})})}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onCancel,a=e.onCreate,o=e.form,c=e.selectedData,l=o.getFieldDecorator,u={labelCol:{span:4},wrapperCol:{span:18,offset:1}},s=this.state.data.map(function(e){return E.a.createElement(q,{key:e.value},e.text)});return E.a.createElement(k.a,{visible:t,title:"新增交易所",okText:"确定",onCancel:n,onOk:a},E.a.createElement(r.a,null,E.a.createElement(V,D({},u,{label:"交易所名称"}),l("coinId",{initialValue:c.id?{key:c.market,label:c.market}:{key:"",label:""},rules:[{required:!0,message:"请选择交易所！"}]})(E.a.createElement(v.a,{disabled:c.id?1:0,labelInValue:!0,showSearch:!0,style:{width:"100%"},placeholder:"请输入交易所名",defaultActiveFirstOption:!1,notFoundContent:this.state.searching?E.a.createElement(i.a,{size:"small"}):"未查询到相关内容",showArrow:!0,filterOption:!0},s))),E.a.createElement(V,D({},u,{label:"交易所别名"}),l("alias",{initialValue:c.alias?c.alias:"",rules:[{required:!1}]})(E.a.createElement(_.a,{placeholder:"交易所别名"}))),E.a.createElement(V,D({},u,{label:"添加类型"}),l("type",{initialValue:c.id?c.type:1,rules:[{required:!0,message:"请选择类型！"}]})(E.a.createElement(z,{disabled:c.id?1:0,onChange:this.typeOnChange},E.a.createElement(P.a,{value:1},"前三交易对占比"),E.a.createElement(P.a,{value:2},"24H 成交额占比")))),E.a.createElement(V,D({},u,{label:"排序"}),l("rank",{rules:[{required:!0,message:"请输入排序号!"},{pattern:/^\d+$/,message:"只能输入数字"}],initialValue:""===c.rank?"":c.rank})(E.a.createElement(_.a,{placeholder:"排序值越小, 顺序越靠前"})))))}}])&&T(n.prototype,a),o&&T(n,o),t}(),G=r.a.create()(L),J=n(2);function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){W(e,t,n[t])})}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(e){return{type:J.xb,data:e}},Y=function(e,t){return function(n){Object(R.i)("post","/coin/summary/market_add",U({},e),function(e){1===e.code?(b.a.success("添加成功！"),t&&t()):b.a.error(e.msg)})}},$=function(e){return{type:J.C.ADD_DATA,data:e}},B=function(e){return{type:J.C.SET_SEARCH_QUERY,data:e}},K=function(e){return{type:J.C.SET_FILTER_DATA,data:e}},X=function(e){return{type:J.C.SET_PAGE_DATA,data:e}};function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){oe(e,t,n[t])})}return e}function te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=k.a.confirm,ce=v.a.Option,le=[],ue=[{label:"前三交易对占比",value:1},{label:"24H 成交额占比",value:2}],se=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=ne(t).call(this),e=!a||"object"!==Z(a)&&"function"!=typeof a?ae(n):a,oe(ae(e),"cancelModal",function(){var t=e.formRef.props.form;e.setState({visible:!1}),t.resetFields()}),oe(ae(e),"submitAccount",function(){var t=e.props,n=t.dispatch,a=t.selectedData,r=e.formRef.props.form,o=ae(e);r.validateFields(function(t,i){if(t)return!1;var c={market:i.coinId.label,type:i.type,alias:i.alias,rank:i.rank};a.id?Object(R.i)("post","/coin/summary/market_update",ee({id:a.id},c),function(t){1===t.code?(b.a.success("操作成功!"),e.setState({visible:!1}),r.resetFields(),o.doSearch("init")):b.a.error(t.msg)}):n(Y(ee({},c),function(){e.setState({visible:!1}),r.resetFields(),e.doSearch("init")}))})}),oe(ae(e),"typeHandleChange",function(t){(0,e.props.dispatch)(K({type:t})),e.setState({loading:!0,type:t}),e.doSearch("init",{currentPage:1,type:t})}),oe(ae(e),"saveFormRef",function(t){e.formRef=t}),e.state={loading:!0,newsStatus:null,editNewsId:"",visible:!1,passwordModal:!1,confirmDirty:!1},e}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,O["Component"]),n=t,(a=[{key:"channelName",value:function(e){var t="";return ue.map(function(n,a){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.search,a=t.filter;this.doSearch("init",ee({},a,{value:n.value})),le=[{title:"名称",key:"market",render:function(t,n){return n&&E.a.createElement("div",{className:"exchangeRecommend-info clearfix"},E.a.createElement("div",null,E.a.createElement("h4",{title:n.market,dangerouslySetInnerHTML:e.createMarkup(Object(R.q)(n.market,30))})))}},{title:"类型",key:"type",render:function(t,n){return 1===n.type?E.a.createElement("span",{className:"opt-btn recommend-btn"},e.channelName(n.type)):E.a.createElement("span",{className:"opt-btn type-btn"},e.channelName(n.type))}},{title:"排序",key:"rank",render:function(e,t){return t.rank?t.rank:"无"}},{title:"交易所别名",key:"alias",render:function(e,t){return t.alias?t.alias:"无"}},{title:"创建时间",key:"createTime",render:function(e){return Object(R.w)(e.createTime)}},{title:"操作",key:"action",render:function(t){return E.a.createElement("div",{className:"btns"},E.a.createElement("p",null,E.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.updateAccount(t)},style:{background:"#108ee9"}},"编辑")),E.a.createElement("p",null,E.a.createElement("a",{onClick:function(){return e.delExchangeRecommend(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(X({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"updateAccount",value:function(e){this.props.dispatch(Q(e)),this.setState({visible:!0})}},{key:"doSearch",value:function(e,t){var n=this,a=this.props,r=a.dispatch,o=a.pageData,i=a.search,c=ee({},a.filter,{value:i.value,pageSize:500,currentPage:o.currPage});r(function(e,t,n){return function(a){var r="init"===e?"/coin/summary/market_list":"/post/search";Object(R.i)("get",r,t?U({},t):{},function(e){if(1===e.code){var t=e.obj;a($({list:t})),n&&n(t)}else b.a.error(e.msg)})}}(e,c=ee({},c,t),function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(B({type:"init"})),e(X({currPage:1}))}},{key:"delExchangeRecommend",value:function(e){var t=this.props.dispatch,n=this;ie({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={type:e.type,id:e.id};Object(R.i)("POST","/coin/summary/market_del",ee({},a),function(e){1===e.code?(b.a.success("删除成功"),n.doSearch("init"),t(B({type:"init"}))):b.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.dispatch,r=t.selectedData,o=t.filter;return E.a.createElement("div",{className:"exchangeRecommend-index"},E.a.createElement(s.a,null,E.a.createElement(p.a,null,E.a.createElement(v.a,{defaultValue:"".concat(o.type),style:{width:120,marginRight:10},onChange:this.typeHandleChange},E.a.createElement(ce,{value:""},"全部"),E.a.createElement(ce,{value:1},"前三交易对占比"),E.a.createElement(ce,{value:2},"24H 成交额占比")),E.a.createElement(d.a,{type:"primary",style:{margin:0},onClick:function(){e.setState({visible:!0}),a(Q({}))}},E.a.createElement(w.a,{type:"icon-post-send"}),"新增"))),E.a.createElement("div",{className:"mt30"},E.a.createElement(i.a,{spinning:this.state.loading,size:"large"},E.a.createElement(l.a,{dataSource:n.map(function(e,t){return ee({},e,{key:t})}),columns:le,bordered:!0,pagination:!1}))),E.a.createElement(G,{selectedData:r,wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.cancelModal,onCreate:this.submitAccount}))}}])&&te(n.prototype,a),r&&te(n,r),t}();t.default=Object(S.connect)(function(e){return{exchangeRecommendInfo:e.exchangeRecommendInfo,list:e.exchangeRecommendInfo.list,search:e.exchangeRecommendInfo.search,filter:e.exchangeRecommendInfo.filter,pageData:e.exchangeRecommendInfo.pageData,selectedData:e.exchangeRecommendInfo.selectedData}})(r.a.create()(se))},1830:function(e,t,n){var a=n(1831);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1831:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);