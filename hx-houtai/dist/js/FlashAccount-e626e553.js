(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{1538:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),o=(a(1385),a(1386)),s=a.n(o),i=(a(1381),a(1382)),c=a.n(i),l=(a(1383),a(1384)),u=a.n(l),p=(a(247),a(183)),f=a.n(p),d=(a(184),a(1378)),m=a.n(d),h=(a(361),a(20)),v=a.n(h),y=(a(1379),a(1380)),b=a.n(y),g=(a(677),a(362)),w=a.n(g),E=(a(678),a(363)),O=a.n(E),S=(a(1376),a(1377)),k=a.n(S),P=a(0),j=a.n(P),C=a(246),N=(a(1793),a(1605)),I=a(48),_=a(2);function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){F(e,t,a[t])})}return e}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var A=function(e){return{type:_.xb,data:e}},T=function(e){return{type:_.F.ADD_DATA,data:e}},x=function(e){return{type:_.F.SET_SEARCH_QUERY,data:e}},M=function(e){return{type:_.F.SET_FILTER_DATA,data:e}},V=function(e){return{type:_.F.SET_PAGE_DATA,data:e}};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function R(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var J=b.a.Item,U={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},W=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=B(t).call(this),e=!n||"object"!==q(n)&&"function"!=typeof n?L(a):n,H(L(e),"validateToNextPassword",function(t,a,n){var r=e.props.form;a&&e.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()}),H(L(e),"handleConfirmBlur",function(t){var a=t.target.value;e.setState({confirmDirty:e.state.confirmDirty||!!a})}),H(L(e),"compareToFirstPassword",function(t,a,n){var r=e.props.form;a&&a!==r.getFieldValue("password")?n("两次密码输入不一致!"):n()}),e.state={passwordModal:!1,confirmDirty:!1},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,P["Component"]),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form.getFieldDecorator;return j.a.createElement(k.a,{visible:t,okText:"确定",onCancel:a,onOk:n,title:"修改密码"},j.a.createElement(b.a,null,j.a.createElement(J,z({},U,{label:"新密码"}),r("password",{rules:[{required:!0,message:"请输入密码!"},{validator:this.validateToNextPassword}],initialValue:""})(j.a.createElement(m.a,null))),j.a.createElement(J,z({},U,{label:"确认密码"}),r("confirm",{rules:[{required:!0,message:"请确认密码!"},{validator:this.compareToFirstPassword}],initialValue:""})(j.a.createElement(m.a,{type:"password",onBlur:this.handleConfirmBlur})))))}}])&&R(a.prototype,n),r&&R(a,r),t}(),Q=b.a.create()(W);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){ae(e,t,a[t])})}return e}function X(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=k.a.confirm,re=O.a.Group,oe=w.a.Option,se={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},ie=[],ce=b.a.Item,le=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=Z(t).call(this),e=!n||"object"!==Y(n)&&"function"!=typeof n?ee(a):n,ae(ee(e),"handleChange",function(t){(0,e.props.dispatch)(M({status:t})),e.setState({newsStatus:t}),e.doSearch("init",{currentPage:1,status:t})}),ae(ee(e),"validateToNextPassword",function(t,a,n){var r=e.props.form;a&&e.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()}),ae(ee(e),"handleConfirmBlur",function(t){var a=t.target.value;e.setState({confirmDirty:e.state.confirmDirty||!!a})}),ae(ee(e),"compareToFirstPassword",function(t,a,n){var r=e.props.form;a&&a!==r.getFieldValue("password")?n("两次密码输入不一致!"):n()}),ae(ee(e),"cancelModal",function(){var t=e.props.form;e.setState({visible:!1}),t.resetFields()}),ae(ee(e),"changePassword",function(){var t=ee(e),a=e.props,n=a.selectedData,r=a.dispatch,o=e.passwordForm.props.form;o.validateFields(function(a,s){if(a)return!1;Object(I.i)("post","/liveaccount/updatepwd",{passportId:n.passportId,password:s.password},function(a){1===a.code?(v.a.success("操作成功!"),e.setState({passwordModal:!1}),o.resetFields(),t.doSearch("init"),r(A({}))):v.a.success(a.msg)})})}),ae(ee(e),"cancelPasswordModal",function(){var t=e.props.dispatch,a=e.passwordForm.props.form;e.setState({passwordModal:!1}),a.resetFields(),t(A({}))}),e.state={loading:!0,newsStatus:null,editNewsId:"",visible:!1,passwordModal:!1,confirmDirty:!1},e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,P["Component"]),a=t,(n=[{key:"channelName",value:function(e){var t="";return I.p.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.search,n=t.filter,r=t.dispatch;this.doSearch("init",K({},n,{value:a.value})),ie=[{title:"昵称",key:"nickName",render:function(t,a){return a&&j.a.createElement("div",{className:"flashAccount-info clearfix"},j.a.createElement("div",null,j.a.createElement("h4",{title:a.title,dangerouslySetInnerHTML:e.createMarkup(Object(I.q)(a.nickName,30))})))}},{title:"手机号 ",dataIndex:"phoneNum",key:"phoneNum"},{title:"账号 ID ",dataIndex:"passportId",key:"passportId"},{title:"账号状态",key:"status",render:function(e){return e&&1===e.status?j.a.createElement("span",{className:"news-status"},"正常"):e&&-1===e.status?j.a.createElement("span",{className:"news-status cont-publish"},"封禁"):j.a.createElement("span",{className:"news-status pre-publish"},"暂无")}},{title:"发布权限",key:"role",render:function(e){return j.a.createElement("div",{className:"btns"},j.a.createElement("p",null,1===parseInt(e.role)?j.a.createElement("span",{className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#ff8978"}},"需要审核"):j.a.createElement("span",{className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#46c1ff"}},"不需要审核")))}},{title:"操作",key:"action",render:function(t){return j.a.createElement("div",{className:"btns"},j.a.createElement("p",null,j.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.updateAccount(t)},style:{background:"#108ee9"}},"编辑")),j.a.createElement("p",null,j.a.createElement("a",{className:"mr10 opt-btn",href:"javascript:void(0)",onClick:function(){return e._isPublish(t)},style:{background:"#00a854"}},1===t.status?"封禁":-1===t.status?"解封":void 0)),j.a.createElement("p",null,j.a.createElement("a",{onClick:function(){return e.delFlashAccount(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")),j.a.createElement("p",null,j.a.createElement("a",{onClick:function(){e.setState({passwordModal:!0}),r(A(t))},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#64a5f8"}},"修改密码")))}}]}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(V({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"submitAccount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.form,r=t.selectedData,o=this;n.validateFields(function(t,s){if(t)return!1;var i,c;delete s.confirm,r.passportId?Object(I.i)("post","/liveaccount/updateeditor",{passportId:r.passportId,phoneNum:s.phoneNum,nickName:s.nickName,introduce:"",role:s.role},function(t){1===t.code?(v.a.success("操作成功!"),e.setState({visible:!1}),n.resetFields(),o.doSearch("init")):v.a.success(t.msg)}):a((i=s,c=function(){e.setState({visible:!1}),n.resetFields(),e.doSearch("init")},function(e){Object(I.i)("post","/liveaccount/addeditor",D({},i),function(e){1===e.code?(v.a.success("添加成功！"),c&&c()):v.a.error(e.msg)})}))})}},{key:"updateAccount",value:function(e){this.props.dispatch(A(e)),this.setState({visible:!0})}},{key:"doSearch",value:function(e,t){var a=this,n=this.props,r=n.dispatch,o=n.pageData,s=n.search,i=K({},n.filter,{value:s.value,pageSize:20,currentPage:o.currPage});r(function(e,t,a){return function(n){var r="init"===e?"/liveaccount/list":"/post/search";Object(I.i)("get",r,t?D({},t):{},function(e){if(1===e.code){var t=e.obj;n(T({list:t.inforList})),n(V({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),a&&a(t)}else v.a.error(e.msg)})}}(e,i=K({},i,t),function(){a.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(x({type:"init"})),e(V({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(V({currPage:e})),this.doSearch(n.type,K({currentPage:e},r))}},{key:"delFlashAccount",value:function(e){var t=this.props.dispatch,a=this;ne({title:"提示",content:"确认要删除吗 ?",onOk:function(){var n={passportId:e.passportId};Object(I.i)("POST","/liveaccount/delete",K({},n),function(e){1===e.code?(v.a.success("删除成功"),a.doSearch("init"),t(x({type:"init"}))):v.a.error(e.msg)})}})}},{key:"_isPublish",value:function(e){var t=this.props.dispatch,a=this;ne({title:"提示",content:"确认要".concat(1===e.status?"封禁":"解封","用户吗 ?"),onOk:function(){var n={passportId:e.passportId,status:1===e.status?-1:1};Object(I.i)("POST","/liveaccount/status",K({},n),function(e){1===e.code?(v.a.success("操作成功"),a.doSearch("init"),t(x({type:"init"}))):v.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,o=t.filter,i=t.search,l=t.dispatch,p=t.form,d=t.selectedData,h=p.getFieldDecorator;return j.a.createElement("div",{className:"flashAccount-index"},j.a.createElement(c.a,null,j.a.createElement(u.a,null,j.a.createElement("span",null,"账号状态："),j.a.createElement(w.a,{defaultValue:"".concat(o.status),style:{width:100},onChange:this.handleChange},j.a.createElement(oe,{value:""},"全部"),j.a.createElement(oe,{value:"1"},"正常"),j.a.createElement(oe,{value:"-1"},"封禁")),j.a.createElement("span",{style:{marginLeft:15}},"账号昵称："),j.a.createElement(m.a,{value:i.value,style:{width:150,marginRight:15},onChange:function(e){return l(x({value:e.target.value}))},placeholder:"输入昵称/手机号搜索"}),j.a.createElement("span",null,j.a.createElement(f.a,{type:"primary",onClick:function(){e._search()}},j.a.createElement(N.a,{type:"icon-search"}),"搜索"),j.a.createElement(f.a,{type:"primary",style:{margin:"0 0 0 15px"},onClick:function(){e.setState({visible:!0}),l(A({}))}},j.a.createElement(N.a,{type:"icon-post-send"}),"新增账号")))),j.a.createElement("div",{className:"mt30"},j.a.createElement(r.a,{spinning:this.state.loading,size:"large"},j.a.createElement(s.a,{dataSource:a.map(function(e,t){return K({},e,{key:t})}),columns:ie,bordered:!0,pagination:{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))),j.a.createElement(k.a,{title:"添加/修改账号",visible:this.state.visible,onOk:function(){return e.submitAccount()},onCancel:this.cancelModal},j.a.createElement(b.a,null,j.a.createElement(ce,$({},se,{label:"账号昵称"}),h("nickName",{rules:[{required:!0,message:"请输入昵称!"}],initialValue:""===d.nickName?"":d.nickName})(j.a.createElement(m.a,null))),j.a.createElement(ce,$({},se,{label:"手机号"}),h("phoneNum",{rules:[{required:!0,message:"请输入手机号!"},{pattern:/^1[3|4|5|8][0-9]\d{8}$/,message:"请输入正确的手机号!"}],initialValue:""===d.phoneNum?"":d.phoneNum})(j.a.createElement(m.a,null))),!d.passportId&&j.a.createElement("div",null,j.a.createElement(ce,$({},se,{label:"账号密码"}),h("password",{rules:[{required:!d.passportId&&""!==d.passportId,message:"请输入密码!"},{validator:this.validateToNextPassword}],initialValue:""===d.password?"":d.password})(j.a.createElement(m.a,null))),j.a.createElement(ce,$({},se,{label:"确认密码"}),h("confirm",{rules:[{required:!d.passportId&&""!==d.passportId,message:"请确认密码!"},{validator:this.compareToFirstPassword}],initialValue:""===d.password?"":d.password})(j.a.createElement(m.a,{type:"password",onBlur:this.handleConfirmBlur})))),j.a.createElement(ce,$({},se,{label:"发表权限"}),h("role",{initialValue:d.role?"".concat(d.role):"1"})(j.a.createElement(re,null,j.a.createElement(O.a,{value:"1"},"需要审核"),j.a.createElement(O.a,{value:"2"},"无需审核")))))),j.a.createElement(Q,{wrappedComponentRef:function(t){e.passwordForm=t},visible:this.state.passwordModal,onCreate:this.changePassword,onCancel:this.cancelPasswordModal}))}}])&&X(a.prototype,n),o&&X(a,o),t}();t.default=Object(C.connect)(function(e){return{flashAccountInfo:e.flashAccountInfo,list:e.flashAccountInfo.list,search:e.flashAccountInfo.search,filter:e.flashAccountInfo.filter,pageData:e.flashAccountInfo.pageData,selectedData:e.flashAccountInfo.selectedData}})(b.a.create()(le))},1793:function(e,t,a){var n=a(1794);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1794:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])}}]);