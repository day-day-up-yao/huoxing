(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{1479:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),i=(a(1385),a(1386)),l=a.n(i),o=(a(1381),a(1382)),c=a.n(o),s=(a(1383),a(1384)),u=a.n(s),p=(a(247),a(183)),f=a.n(p),h=(a(361),a(20)),m=a.n(h),d=(a(1379),a(1380)),y=a.n(d),b=(a(677),a(362)),g=a.n(b),v=(a(184),a(1378)),E=a.n(v),O=(a(678),a(363)),k=a.n(O),w=(a(679),a(249)),P=a.n(w),j=(a(1376),a(1377)),S=a.n(j),C=a(0),I=a.n(C),D=a(246),_=(a(1809),a(1621)),x=a(48);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){F(e,t,a[t])})}return e}function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var G=S.a.confirm,J=P.a.Group,R=k.a.Group,W=E.a.TextArea,B=g.a.Option,L={labelCol:{sm:{span:6}},wrapperCol:{sm:{span:16}}},U={"财经App":{key:1,class:"news-status"},"币优":{key:2,class:"news-status cont-publish"}},H=[],K=y.a.Item,Q=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=z(t).call(this),e=!n||"object"!==q(n)&&"function"!=typeof n?N(a):n,F(N(e),"handleChange",function(t){var a=e.props.dispatch,n=N(e),r={pageSize:20,type:t,currentPage:1};e.setState({type:t},function(){a(Object(_.b)("init",r,function(){n.setState({loading:!1})}))})}),F(N(e),"cancelModal",function(){e.props.form.resetFields(),e.setState({visible:!1})}),F(N(e),"terminalChange",function(t){e.setState({terminal:t.join(",")})}),e.state={loading:!0,visible:!1,terminal:"",type:"flash"},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,C["Component"]),a=t,(n=[{key:"channelName",value:function(e){var t="";return x.p.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"componentWillMount",value:function(){var e=this.props,t=e.search,a=e.filter;this.doSearch("init",M({},a,{search:t.value})),H=[{title:"推送 ID",key:"id",width:160,render:function(e,t){return t&&I.a.createElement("div",{className:"flashPush-info clearfix"},I.a.createElement("div",null,I.a.createElement("h4",{title:t.id},t.id)))}},{title:"推送标题",dataIndex:"title",key:"title",render:function(e){return e?I.a.createElement("span",{title:e},Object(x.q)(e,30)):"--"}},{title:"推送内容",dataIndex:"content",key:"content",render:function(e){return e?I.a.createElement("span",{title:e},Object(x.q)(e,40)):"--"}},{title:"推送描述",dataIndex:"notifyContent",key:"notifyContent",render:function(e){return e?I.a.createElement("span",{title:e},Object(x.q)(e,40)):"--"}},{title:"推送方",key:"terminal",width:90,render:function(e){return e.terminal.split(",").map(function(e,t){for(var a in U)if(parseInt(e)===U[a].key)return I.a.createElement("p",{className:U[a].class,key:t},a)})}},{title:"推送类型",key:"type",render:function(e){return e&&"flash"===e.type?"快讯":e&&"news"===e.type?"新闻":e&&"lives"===e.type?"直播":e&&"video"===e.type?"视频":void 0}}]}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(Object(_.c)({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"doSearch",value:function(e,t){var a=this,n=this.props,r=n.dispatch,i=n.pageData,l=n.search,o=n.filter;this.setState({loading:!0});var c=M({},o,{search:l.value,pageSize:20,type:this.state.type,currentPage:i.currPage});c=M({},c,t),r(Object(_.b)(e,c,function(){a.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(Object(_.d)({type:"init"})),e(Object(_.c)({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(Object(_.c)({currPage:e})),this.doSearch(n.type,M({currentPage:e},r))}},{key:"delManagerAccount",value:function(e){var t=this.props.dispatch,a=this;G({title:"提示",content:"确认要取消 ".concat(e.nickName," 的管理员权限吗 ?"),onOk:function(){var n={role:1,passportId:e.passportId};Object(x.i)("POST","/account/editor/updaterole",M({},n),function(e){1===e.code?(m.a.success("操作成功"),a.doSearch("init"),t(Object(_.d)({type:"init"}))):m.a.error(e.msg)})}})}},{key:"submitAccount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.form;n.validateFields(function(t,r){if(r.terminal=e.state.terminal,r.createTime=Date.parse(new Date),t)return!1;a(Object(_.a)(r,function(){e.setState({visible:!1}),n.resetFields(),e.doSearch("init")}))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,i=t.dispatch,o=t.form,s=t.search,p=o.getFieldDecorator;return I.a.createElement("div",{className:"flashPush-index"},I.a.createElement(c.a,null,I.a.createElement(u.a,null,I.a.createElement("span",null,"推送类型："),I.a.createElement(g.a,{defaultValue:"flash",style:{width:100,marginRight:15},onChange:this.handleChange},I.a.createElement(B,{value:"flash"},"快讯"),I.a.createElement(B,{value:"news"},"新闻")),I.a.createElement(E.a,{value:s.value,style:{width:150},onChange:function(e){return i(Object(_.d)({value:e.target.value}))},placeholder:"请输入新闻标题",onPressEnter:function(){e._search()}}),I.a.createElement(f.a,{type:"primary",style:{margin:"0 15px"},onClick:function(){e._search()}},"搜索"))),I.a.createElement("div",{className:"mt30"},I.a.createElement(r.a,{spinning:this.state.loading,size:"large"},I.a.createElement(l.a,{dataSource:a.map(function(e,t){return M({},e,{key:t})}),columns:H,bordered:!0,pagination:{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))),I.a.createElement(S.a,{title:"添加推送信息",visible:this.state.visible,onOk:function(){return e.submitAccount()},onCancel:this.cancelModal,footer:[I.a.createElement(f.a,{key:"back",onClick:this.cancelModal},"取消"),I.a.createElement(f.a,{key:"submit",type:"primary",onClick:function(){e.submitAccount()}},"添加")]},I.a.createElement(y.a,null,I.a.createElement(K,A({},L,{label:"推送类型"}),p("type",{initialValue:"flash",rules:[{required:!0,message:"请选择推送类型！"}]})(I.a.createElement(R,null,I.a.createElement(k.a,{value:"flash"},"快讯"),I.a.createElement(k.a,{value:"news"},"新闻")))),I.a.createElement(K,A({},L,{label:"推送方"}),p("terminal",{initialValue:[],rules:[{required:!0,message:"请选择推送方！"}]})(I.a.createElement(J,{onChange:this.terminalChange},I.a.createElement(P.a,{value:"1"},"MarsBitAPP"),I.a.createElement(P.a,{value:"2"},"第三方(币优)")))),I.a.createElement(K,A({},L,{label:"推送ID: "}),p("id",{initialValue:"",rules:[{required:!0,message:"请输入推送 ID！"}]})(I.a.createElement(E.a,{placeholder:"推送 ID"}))),I.a.createElement(K,A({},L,{label:"推送标题: "}),p("title",{initialValue:"",rules:[{required:!0,message:"请输入推送标题！"}]})(I.a.createElement(W,{rows:3,placeholder:"推送标题"}))),I.a.createElement(K,A({},L,{label:"内容: "}),p("content",{initialValue:"",rules:[{required:!0,message:"请输入推送内容！"}]})(I.a.createElement(W,{rows:3,placeholder:"推送内容"}))),I.a.createElement(K,A({},L,{label:"推送描述: "}),p("notifyContent",{initialValue:"",rules:[{required:!0,message:"请输入推送描述！"},{max:200,message:"推送描述保持在200字以内！"}]})(I.a.createElement(W,{rows:3,placeholder:"推送描述",maxLength:200}))))))}}])&&V(a.prototype,n),i&&V(a,i),t}();t.default=Object(D.connect)(function(e){return{flashPushInfo:e.flashPushInfo,list:e.flashPushInfo.list,search:e.flashPushInfo.search,filter:e.flashPushInfo.filter,pageData:e.flashPushInfo.pageData,selectedData:e.flashPushInfo.selectedData}})(y.a.create()(Q))},1809:function(e,t,a){var n=a(1810);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1810:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])}}]);