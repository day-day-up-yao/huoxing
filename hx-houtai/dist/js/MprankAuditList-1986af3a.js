(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{1495:function(e,t,n){"use strict";n.r(t);n(1379);var a=n(1380),r=n.n(a),o=(n(675),n(676)),i=n.n(o),l=(n(1385),n(1386)),c=n.n(l),u=(n(1381),n(1382)),s=n.n(u),p=(n(1383),n(1384)),f=n.n(p),y=(n(361),n(20)),d=n.n(y),m=(n(677),n(362)),h=n.n(m),g=(n(1376),n(1377)),b=n.n(g),k=n(0),v=n.n(k),O=n(246),w=(n(1704),n(1705)),E=n(48);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){C(e,t,n[t])})}return e}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=b.a.confirm,L=h.a.Option,_=[],x="",A=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=M(t).call(this),e=!a||"object"!==T(a)&&"function"!=typeof a?P(n):a,C(P(e),"getMprankList",function(t,n,a){var r=e.props.dispatch,o=P(e);r(Object(w.b)({firstType:t,secondType:n,page:a,pageSize:20},function(){o.setState({loading:!1})}))}),C(P(e),"delRankAudit",function(t){var n=P(e);console.log(t),I({title:"提示",content:"确认要删除吗 ?",onOk:function(){n.setState({loading:!0});var e={rankId:t.rankId};Object(E.i)("POST","/rank/delete",S({},e),function(e){1===e.code?(d.a.success("删除成功"),n.getMprankList(1,n.state.firstType,n.state.secondType)):d.a.error(e.msg)})}})}),C(P(e),"channelChangeOne",function(t){var n="null"===t?null:t;e.setState({firstType:n});var a=[];for(var r in e.props.rankType[t])a.push(e.props.rankType[t][r]);x=a.map(function(e){return v.a.createElement(L,{value:e.typeId.toString(),key:e.typeId},e.typeName)}),e.getMprankList(n,null,1)}),C(P(e),"channelChangeTwo",function(t){var n="null"===t?null:t;e.setState({secondType:n}),e.getMprankList(e.state.firstType,n,1)}),e.state={loading:!0,firstType:null,secondType:null},e}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,k["Component"]),n=t,(a=[{key:"componentWillMount",value:function(){(0,this.props.dispatch)(Object(w.c)()),this.getMprankList(null,null,1)}},{key:"componentDidMount",value:function(){var e=this;_=[{title:"榜单名称",key:"name",width:450,render:function(t,n){return v.a.createElement("div",null,v.a.createElement("h4",{title:n.name,dangerouslySetInnerHTML:e.createMarkup(Object(E.q)(n.name,30))}))}},{title:"一级分别",key:"firstTypeName",width:150,render:function(e){return v.a.createElement("div",null,e.firstTypeName)}},{title:"二级分别",key:"secondTypeName",width:150,render:function(e){return v.a.createElement("div",null,e.secondTypeName)}},{title:"时间",key:"rankMonth",width:140,render:function(e){return e&&Object(E.x)(e.rankMonth,"yyyy-MM")}},{title:"操作",key:"id",width:150,render:function(t){return v.a.createElement("div",null,v.a.createElement("a",{href:"/#/audit-mprankAdd?id=".concat(t.rankId),className:"mr10 opt-btn",style:{background:"#2e55a3"}},"编辑"),v.a.createElement("a",{onClick:function(){return e.delRankAudit(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除"))}}]}},{key:"channelName",value:function(e){var t="";return E.p.map(function(n,a){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"changePage",value:function(e){this.setState({loading:!0}),this.getMprankList(this.state.firstType,this.state.secondType,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.rankType,r=[];for(var o in a[0])r.push(a[0][o]);var l=r.map(function(e,t){return v.a.createElement(L,{value:e.typeId.toString(),key:t},e.typeName)});return v.a.createElement("div",{className:"videoAudit-index"},v.a.createElement(s.a,null,v.a.createElement(f.a,null,v.a.createElement("span",null,"榜单类别："),v.a.createElement(h.a,{defaultValue:"null",style:{width:100},d:!0,onChange:this.channelChangeOne},v.a.createElement(L,{value:"null"},"全部"),l),v.a.createElement("span",{style:{marginLeft:15}}),v.a.createElement(h.a,{style:{width:100},defaultValue:"null",onChange:this.channelChangeTwo},v.a.createElement(L,{value:"null"},"全部"),x),v.a.createElement("span",{style:{marginLeft:100}},v.a.createElement("a",{className:"mr10 opt-btn",href:"/#/audit-mprankAdd",style:{background:"#108ee9",width:"70px",height:"26px",lineHeight:"23px",textAlign:"center"}},"新增榜单")))),v.a.createElement("div",{className:"mt30"},v.a.createElement(i.a,{spinning:this.state.loading,size:"large"},v.a.createElement(c.a,{dataSource:n.inforList.map(function(e,t){return S({},e,{key:t})}),columns:_,bordered:!0,pagination:{current:n.currentPage,total:n.recordCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))))}}])&&j(n.prototype,a),r&&j(n,r),t}();t.default=Object(O.connect)(function(e){return{list:e.mpRankInfo.rankData,rankType:e.mpRankInfo.rankType}})(r.a.create()(A))}}]);