(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{1600:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),i=(a(1385),a(1386)),c=a.n(i),o=(a(1381),a(1382)),l=a.n(o),u=(a(1383),a(1384)),s=a.n(u),p=(a(247),a(183)),f=a.n(p),m=(a(361),a(20)),d=a.n(m),h=(a(1379),a(1380)),b=a.n(h),y=(a(184),a(1378)),v=a.n(y),g=(a(1376),a(1377)),E=a.n(g),k=a(0),O=a.n(k),S=a(246),w=(a(1846),a(1605)),P=a(48),j=a(2);function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){_(e,t,a[t])})}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var C=function(e){return{type:j.lb.ADD_DATA,data:e}},D=function(e){return{type:j.lb.SET_SEARCH_QUERY,data:e}},N=function(e){return{type:j.lb.SET_FILTER_DATA,data:e}},A=function(e){return{type:j.lb.SET_PAGE_DATA,data:e}};function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){L(e,t,a[t])})}return e}function q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var H=E.a.confirm,J=v.a.TextArea,U={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},V=[],W=b.a.Item,B=[{value:"1",label:"创始人"},{value:"2",label:"投资人"},{value:"3",label:"合伙人"},{value:"4",label:"高管"},{value:"5",label:"其他职员"}],G=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=z(t).call(this),e=!n||"object"!==T(n)&&"function"!=typeof n?R(a):n,L(R(e),"handleChange",function(t){(0,e.props.dispatch)(N({acquireChannel:t})),e.setState({loading:!0,acquireChannel:t}),e.doSearch("init",{currentPage:1,acquireChannel:t})}),L(R(e),"cancelModal",function(){var t=e.props.form;e.setState({visible:!1}),t.resetFields()}),e.state={loading:!0,acquireChannel:"",editNewsId:"",visible:!1,passwordModal:!1},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,k["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this;this.doSearch("init"),V=[{title:"姓名",key:"name",render:function(t,a){return a&&O.a.createElement("div",{className:"participate-info clearfix"},O.a.createElement("h4",{title:a.name,dangerouslySetInnerHTML:e.createMarkup(Object(P.q)(a.name,30))}))}},{title:"联系方式",key:"phonenum",render:function(e){return O.a.createElement("div",null,O.a.createElement("p",{className:"age"},"手机号：",e.phonenum||"无"),O.a.createElement("p",{className:"age"},"微信：",e.wechat||"无"),O.a.createElement("p",{className:"age"},"邮箱：",e.email||"无"))}},{title:"基本信息",key:"basicInfo",render:function(t,a){return a&&O.a.createElement("div",{className:"participate-info clearfix"},O.a.createElement("p",{className:"age"},"年龄：",a.age),O.a.createElement("p",{className:"age"},"城市：",a.city),O.a.createElement("p",{className:"age"},"公司：",a.company),O.a.createElement("p",{className:"age"},"职位：",e.channelName(a.idAttr,B)))}},{title:"公司简介",dataIndex:"companyInfo",width:300,key:"companyInfo",render:function(t){return O.a.createElement("h4",{title:t,dangerouslySetInnerHTML:e.createMarkup(Object(P.q)(t,300))})}},{title:"培训信息",dataIndex:"trainingInfo",width:100,key:"trainingInfo"},{title:"报名时间",dataIndex:"createTime",key:"createTime",render:function(e){return Object(P.w)(e)}},{title:"操作",key:"action",render:function(t){return O.a.createElement("div",{className:"btns"},O.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.delAdData(t)},style:{background:"#108ee9"}},"删除"))}}]}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(A({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"submitAccount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.form,r=t.selectedData;n.validateFields(function(t,i){if(t)return!1;var c,o;a((c={id:r.id,remark:i.remark},o=function(){e.setState({visible:!1}),n.resetFields(),e.doSearch("init")},function(e){Object(P.i)("post","/marschinatrip/addremarks",I({},c),function(e){1===e.code?(d.a.success("操作成功！"),o&&o()):d.a.error(e.msg)})}))})}},{key:"delAdData",value:function(e){var t=this.props.search,a=this;H({title:"提示",content:"确认要删除本条记录吗 删除后不可恢复?",onOk:function(){var n={id:e.id};Object(P.i)("POST","/stoenroll/delete",M({},n),function(e){1===e.code?(d.a.success("删除成功"),a.doSearch(t.type)):d.a.error(e.msg)})}})}},{key:"updateRemark",value:function(e){var t;this.props.dispatch((t=e,{type:j.xb,data:t})),this.setState({visible:!0})}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,i={pageSize:20,currentPage:n.pageData.currPage};r(function(e,t,a){return function(n){var r="init"===e?"/stoenroll/list":"/stoenroll/search";Object(P.i)("get",r,t?I({},t):{},function(e){if(1===e.code){var t=e.obj;n(C({list:t.inforList})),n(A({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),a&&a(t)}else d.a.error(e.msg)})}}(e,i=M({},i,t),function(){a.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props,t=e.dispatch,a=e.search,n=a.value?"search":"init";this.doSearch(n,{currentPage:1,keyword:a.value}),t(D({type:n})),t(A({currPage:1}))}},{key:"channelName",value:function(e,t){var a="";return(t||[{value:"1",label:"朋友推荐"},{value:"2",label:"MarsBit社群"},{value:"4",label:"微信"},{value:"5",label:"其他"}]).map(function(t,n){parseInt(t.value)===parseInt(e)&&(a=t.label)}),a}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(A({currPage:e})),this.doSearch(n.type,M({currentPage:e},r))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,i=t.search,o=t.dispatch,u=t.form,p=t.selectedData,m=u.getFieldDecorator;return O.a.createElement("div",{className:"participate-index"},O.a.createElement(l.a,null,O.a.createElement(s.a,null,O.a.createElement("span",{style:{marginLeft:15}},"账号昵称："),O.a.createElement(v.a,{value:i.value,style:{width:150,marginRight:15},onChange:function(e){return o(D({value:e.target.value}))},placeholder:"输入昵称/手机号搜索",onPressEnter:function(){e._search()}}),O.a.createElement("span",null,O.a.createElement(f.a,{type:"primary",onClick:function(){e._search()}},O.a.createElement(w.a,{type:"icon-search"}),"搜索")))),O.a.createElement("div",{className:"mt30"},O.a.createElement(r.a,{spinning:this.state.loading,size:"large"},O.a.createElement(c.a,{dataSource:a.map(function(e,t){return M({},e,{key:t})}),columns:V,bordered:!0,pagination:{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))),this.state.visible&&O.a.createElement(E.a,{title:"添加/修改备注",visible:this.state.visible,onOk:function(){return e.submitAccount()},onCancel:this.cancelModal},O.a.createElement(b.a,null,O.a.createElement(W,x({},U,{label:"姓名"}),m("name",{initialValue:p.name})(O.a.createElement(v.a,{disabled:!0}))),O.a.createElement(W,x({},U,{label:"添加备注"}),m("remark",{rules:[{required:!0,message:"请确认备注信息!"}],initialValue:""===p.remark?"":p.remark})(O.a.createElement(J,{rows:5,placeholder:"请输入备注信息"}))))))}}])&&q(a.prototype,n),i&&q(a,i),t}();t.default=Object(S.connect)(function(e){return{participateInfo:e.participateInfo,list:e.participateInfo.list,search:e.participateInfo.search,filter:e.participateInfo.filter,pageData:e.participateInfo.pageData,selectedData:e.participateInfo.selectedData}})(b.a.create()(G))},1846:function(e,t,a){var n=a(1847);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1847:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])}}]);