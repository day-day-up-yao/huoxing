(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{1512:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return p});var n=a(0),r=a.n(n),i=a(10);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,s(t).apply(this,arguments))}var a,o,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Component"]),a=t,(o=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(i.Link,{to:"/mobile"},"点击访问移动端的首页"))}}])&&l(a.prototype,o),p&&l(a,p),t}()},1514:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(683),a(684)),o=a.n(i),l=(a(1381),a(1382)),c=a.n(l),s=(a(1383),a(1384)),u=a.n(s),p=(a(361),a(20)),m=a.n(p),f=(a(677),a(362)),d=a.n(f),h=(a(1376),a(1377)),y=a.n(h),b=a(0),g=a.n(b),v=a(246),E=a(10),O=a(1612),S=a(1665),P=a(48);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=y.a.confirm,_=d.a.Option,L=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=C(t).call(this),e=!n||"object"!==w(n)&&"function"!=typeof n?I(a):n,x(I(e),"handleChange",function(t){(0,e.props.dispatch)(Object(O.d)({adPcPlace:t})),e.setState({adStatus:t}),e.doSearch("init",{currentPage:1,adPlace:t})}),x(I(e),"handleStatusChange",function(t){(0,e.props.dispatch)(Object(O.d)({pcStatus:t})),e.doSearch("init",{currentPage:1,status:t})}),x(I(e),"handleOk",function(t){e.setState({visible:!1})}),x(I(e),"handleCancel",function(t){e.setState({visible:!1})}),e.state={loading:!0,adStatus:null,visible:!1,previewVisible:!1,updateVisible:!1,previewImage:"",number:1},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,b["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this.props,t=e.search,a=e.filter;this.doSearch(t.type?t.type:"init",{adPlace:a.adPcPlace})}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search;a(Object(O.e)({currPage:e})),this.doSearch(n.type,{currentPage:e,apiAdd:this.state.apiAdd})}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,i=n.pageData,o=n.search,l=n.filter,c={serach:o.search,status:l.pcStatus||"",adPlace:l.adPcPlace,type:1,pageSize:20,currentPage:i.currPage};c=j({},c,t),r(Object(O.b)(e,c,function(){a.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(O.f)({type:"init",nickName:"",title:""})),e(Object(O.e)({pageData:20,totalCount:0})),e(Object(O.c)({}))}},{key:"adPosition",value:function(e){var t="";return P.N.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"delAd",value:function(e){var t=this.props.dispatch,a=this;N({title:"提示",content:"确认要删除吗 ?",onOk:function(){var n={id:e.id,status:0};Object(P.i)("POST","/ad/status",j({},n),function(e){1===e.code?(m.a.success("删除成功"),a.doSearch("init"),t(Object(O.f)({type:"init"}))):m.a.error(e.msg)})}})}},{key:"_isPublish",value:function(e){var t=this.props.dispatch,a=this;N({title:"提示",content:"确认要".concat(2===e.status?"发表":"撤回广告","吗 ?"),onOk:function(){var n={id:e.id,status:2===e.status?1:2};Object(P.i)("POST","/ad/status",j({},n),function(n){1===n.code?(m.a.success("".concat(2===e.status?"发表":"撤回到草稿箱","成功")),a.doSearch("init"),t(Object(O.f)({type:"init"}))):m.a.error(n.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.filter,r=t.pageData;return g.a.createElement("div",null,g.a.createElement(S.a,{title:"webAd-edit"}),g.a.createElement("div",{className:"webAdBox"},g.a.createElement(c.a,null,g.a.createElement(u.a,{span:12},g.a.createElement(d.a,{defaultValue:"".concat(n.adPcPlace),style:{margin:"10px auto",width:"80%",display:"block"},onChange:this.handleChange},g.a.createElement(_,{value:""},"全部位置"),P.N.map(function(e,t){return g.a.createElement(_,{value:e.value,key:t},e.label)}))),g.a.createElement(u.a,{span:12},g.a.createElement(d.a,{defaultValue:"".concat(n.adPcPlace),style:{margin:"10px auto",width:"80%",display:"block"},onChange:this.handleStatusChange},g.a.createElement(_,{value:""},"全部状态"),g.a.createElement(_,{value:"1"},"展示中"),g.a.createElement(_,{value:"2"},"未展示")))),g.a.createElement("div",{className:"content-list"},a.map(function(t,a){return g.a.createElement("div",{id:a,key:a},g.a.createElement("div",{className:"title"},t.title),g.a.createElement("div",{className:"info"},g.a.createElement("span",null,"位置：",e.adPosition(t.adPlace)),g.a.createElement("span",null,"更新时间：",Object(P.w)(t.updateTime))),g.a.createElement("div",{className:"options"},g.a.createElement("p",null,g.a.createElement(E.Link,{className:"mr10 opt-btn",to:{pathname:"/webAd-edit",query:{id:t.id}}},"编辑")),g.a.createElement("p",{style:{marginBottom:"10px"}},g.a.createElement("a",{className:"mr10 opt-btn",href:"javascript:void(0)",onClick:function(){return e._isPublish(t)},style:{background:"#00a854"}},1===t.status?"撤回":"发布")),g.a.createElement("p",null,g.a.createElement("a",{onClick:function(){return e.delAd(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除"))))})),g.a.createElement("div",{className:"pagination"},g.a.createElement(o.a,{current:r.currPage,total:r.totalCount,pageSize:r.pageSize,onChange:function(t){return e.changePage(t)}}))))}}])&&k(a.prototype,n),r&&k(a,r),t}();t.default=Object(v.connect)(function(e){return{adInfo:e.adInfo,selectedData:e.adInfo.selectedData,list:e.adInfo.list,search:e.adInfo.search,filter:e.adInfo.filter,pageData:e.adInfo.pageData}})(r.a.create()(L))},1515:function(e,t,a){"use strict";a.r(t);a(1376);var n=a(1377),r=a.n(n),i=(a(1388),a(1389)),o=a.n(i),l=(a(1392),a(1393)),c=a.n(l),s=(a(675),a(676)),u=a.n(s),p=(a(184),a(1378)),m=a.n(p),f=(a(1387),a(50)),d=a.n(f),h=(a(247),a(183)),y=a.n(h),b=(a(361),a(20)),g=a.n(b),v=(a(677),a(362)),E=a.n(v),O=(a(679),a(249)),S=a.n(O),P=(a(678),a(363)),w=a.n(P),j=(a(1379),a(1380)),k=a.n(j),C=a(0),I=a.n(C),T=a(246),x=a(10),N=a(1612),_=a(248),L=a(11),V=a.n(L),A=a(48),D=(a(1607),a(51)),F=a.n(D);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function R(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){G(e,t,a[t])})}return e}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var W,J,Q=k.a.Item,K=w.a.Group,X=S.a.Group,Z=E.a.Option,$=[{label:"PC",value:"1",disabled:!1},{label:"Web",value:"4",disabled:!1},{label:"App",value:"2",disabled:!1}],ee=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=Y(t).call(this),e=!n||"object"!==q(n)&&"function"!=typeof n?H(a):n,G(H(e),"positionChange",function(t){(0,e.props.dispatch)(Object(N.d)({adPcPlace:t.target.value})),e.setState({adPlace:t.target.value});var a=t.target.value;"1"===a||"5"===a||"2"===a||"3"===a||"12"===a||"30"===a||"31"===a?e.setState({typeArr:["1","4","2"]}):"16"===a?e.setState({typeArr:["1","4"]}):e.setState({typeArr:["1"]})}),G(H(e),"typeChange",function(t){e.props.form.setFieldsValue({type:t}),e.setState({type:t})}),G(H(e),"adType",function(t){e.setState({adType:t.target.value,text:e.label(t.target.value)})}),G(H(e),"offlineType",function(t){e.setState({offlineType:t.target.value})}),G(H(e),"label",function(e){var t={};switch(e){case"1":t={label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"};break;case"3":t={label:"新闻 ID",message:"请输入新闻 ID",placeholder:"新闻 ID",type:""};break;case"4":t={label:"跳转频道",message:"请选择新闻频道",placeholder:"新闻 ID",type:""};break;case"5":t={label:"专题ID",message:"请输入专题ID",placeholder:"示例：MarsBit特训营/20180725170844035121",type:""};break;case"6":t={label:"关键字",message:"请输入搜索的关键字/标签",placeholder:"关键字/标签",type:""};break;default:t={label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"}}return t}),G(H(e),"specialIdChange",function(t){var a=H(e);e.setState({specialActive:t.target.value}),Object(A.i)("post","/topic/getTagsByTopicId",{id:t.target.value},function(e){if(1===e.code){var t=e.obj;a.setState({specialValShow:!0}),a.setState({specialVal:t||[]})}else a.setState({specialValShow:!1})})}),G(H(e),"specialValClick",function(t){var a=t.target.getAttribute("data-val");e.setState({specialActive:"".concat(a,"/").concat(e.state.specialActive)}),e.setState({specialValShow:!1})}),G(H(e),"channelIdChange",function(t){e.setState({url:t})}),G(H(e),"changeOffLineType",function(){"0"===e.state.offlineType&&e.setState({offlineType:"1"})}),G(H(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),G(H(e),"handlePreview",function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})}),G(H(e),"handleChange",function(t){var a=t.file,n=t.fileList;e.setState({fileList:n}),"removed"===a.status&&e.setState({coverImgUrl:""}),a.response&&(1===a.response.code&&"done"===a.status&&e.setState({coverImgUrl:a.response.obj}),"error"===a.status&&(g.a.error("网络错误，上传失败！"),e.setState({coverImgUrl:"",fileList:[]})))}),G(H(e),"handleMImgChange",function(t){var a=t.file,n=t.fileList;e.setState({mImgSrcFileList:n}),"removed"===a.status&&e.setState({mImgUrl:""}),a.response&&(1===a.response.code&&"done"===a.status&&e.setState({mImgUrl:a.response.obj}),"error"===a.status&&(g.a.error("网络错误，上传失败！"),e.setState({mImgUrl:"",mImgSrcFileList:[]})))}),G(H(e),"newsVisibleHide",function(){e.setState({newsVisible:!1})}),G(H(e),"newsVisibleShow",function(){e.setState({newsVisible:!0})}),G(H(e),"handleSubmit",function(t){var a=t.target.getAttribute("data-status");t.preventDefault(),e.props.form.setFieldsValue({pcImgSrc:e.state.coverImgUrl,mImgSrc:e.state.mImgUrl}),e.props.form.validateFieldsAndScroll(function(t,n){if(!t){e.setState({loading:!0});for(var r=0,i=0;i<n.type.length;i++)r+=parseInt(n.type[i]);if("0"===e.state.offlineType)n.expiredTime=0;else{var o=n.expiredTime?Date.parse(n.expiredTime.format("YYYY-MM-DD HH:mm:ss")):0;n.expiredTime=o/1e3}if(n.type=r,n.id=e.props.location.query.id||"",n.status=a||1,n.url="4"===n.useType?n.channelId:n.url||e.state.specialActive,!e.state.updateOrNot&&delete n.id,3!==parseInt(e.state.adPlace)&&12!==parseInt(e.state.adPlace)||(n.topOrder=999),n.tagsV2)if(0===n.tagsV2.length)n.tagsV2="";else{var l=[];n.tagsV2.forEach(function(e){l.push(U({name:e.label},JSON.parse(e.key)))}),n.tagsV2=JSON.stringify(l)}30!==parseInt(n.adPlace)&&31!==parseInt(n.adPlace)||n.url.indexOf("/live")>-1&&(n.url=n.url.replace(/live/,"imlive/detail")),Object(A.i)("post","".concat(e.state.updateOrNot?"/ad/update":"/ad/add"),n,function(t){1===t.code?(g.a.success(e.state.updateOrNot?"修改成功！":"添加成功！"),x.hashHistory.push("/ad-pc")):g.a.error(t.msg)})}})}),G(H(e),"handleTagsChange",function(t,a){t.map(function(e){e.title=Object(A.R)(JSON.parse(e.key).type,e.label)}),e.setState({value:t})}),G(H(e),"judgeExist",function(t,a){0===(a&&0!==a.length?a.filter(function(e){return e.name===t}):[]).length&&0!==a.length?e.setState({noCurrResult:!0}):e.setState({noCurrResult:!1})}),G(H(e),"getTagList",function(t){W&&(clearTimeout(W),W=null),J=t;W=setTimeout(function(){e.setState({searching:!0,data:[]}),Object(A.i)("post","/tagmgr/like",{name:t},function(a){if(e.setState({searching:!1}),e.judgeExist(J,a.obj),0===a.obj.length&&""!==t.trim()?e.setState({searchText:I.a.createElement("div",null,I.a.createElement("span",null,"未查询到相关标签, 是否创建?"),I.a.createElement(y.a,{type:"primary",loading:e.state.tagsIconLoading,style:{margin:"0 10px"},onClick:e.addNewTag,size:"small"},"是"),I.a.createElement(y.a,{type:"primary",size:"small",onClick:function(){e.setState({searchText:""})}},"否")),noCurrResult:!1}):e.setState({searchText:""}),J===t){var n=a.obj;e.setState({data:n})}})},500)}),G(H(e),"handleSelect",function(e,t){e.type=t.props.dataType}),G(H(e),"handleDeselect",function(t,a){var n=e.state.selectedTags.filter(function(e){return JSON.parse(e).id!==JSON.parse(t.key).id});e.setState({selectedTags:n})}),G(H(e),"addNewTag",function(t){t.target.disabled=!0;var a=e.props.form;e.setState({tagsIconLoading:!0}),Object(A.i)("post","/tagmgr/addSimpleTag",{name:J,creator:F.a.get("hx_passportId")},function(t){e.setState({searchText:"",tagsIconLoading:!1,noCurrResult:!1});var n=[{title:"".concat(t.obj.name,"-聚合"),key:JSON.stringify({id:t.obj.id,type:t.obj.type}),type:t.obj.type,label:t.obj.name}];a.setFieldsValue({tagsV2:[].concat(R(a.getFieldValue("tagsV2")),n)})})}),G(H(e),"transTags",function(e){var t=[];return e.forEach(function(e){t.push({title:"".concat(Object(A.R)(e.type,e.name)),label:e.name,key:JSON.stringify({id:e.id,type:e.type})})}),t}),G(H(e),"handleBlur",function(){e.setState({searchText:""})}),e.state={updateOrNot:!1,adPlace:"1",newsVisible:!1,type:[],previewVisible:!1,previewImage:"",newsTitle:"",newsContent:"",fileList:[],mImgSrcFileList:[],coverImgUrl:"",mImgUrl:"",loading:!0,adType:1,offlineType:"0",channelId:"",text:{label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"},specialValShow:!0,specialVal:[],typeArr:["1","4","2"],data:[],searchText:"",searching:!1,tagsIconLoading:!1,noCurrResult:!1,dateDisabled:!0,selectedTags:[]},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,C["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location;a(Object(_.f)()),a(Object(_.k)()),n.query.id?a(Object(N.a)({id:n.query.id},function(t){e.setState({updateOrNot:!0,fileList:[{uid:0,name:"xxx.png",status:"done",url:t.pcImgSrc}],mImgSrcFileList:[{uid:1,name:"xxx.png",status:"done",url:t.mImgSrc}],coverImgUrl:t.pcImgSrc,mImgUrl:t.mImgSrc,loading:!1,adType:t.useType.toString(),adPlace:t.adPlace.toString(),text:e.label("".concat(t.useType))})})):this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e,t){e.adInfo.url!==this.props.adInfo.url&&this.setState({specialActive:this.props.adInfo.url})}},{key:"sendPost",value:function(e){var t={newsTitle:e.postTitle||"",newsContent:"".concat(e.postContent)||""};this.setState(U({},this.state,t))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.adInfo,i=a.channelList,l=a.flashTypeList,s=this.state,p=s.previewVisible,f=s.previewImage,h=s.fileList,b=s.updateOrNot,g=s.mImgSrcFileList,v=s.text,O=s.loading,S={labelCol:{span:5},wrapperCol:{span:18,offset:1}},P=[];""!==n.type&&(3===n.type?P=["1","2"]:5===n.type?P=["1","4"]:6===n.type?P=["2","4"]:7===n.type?P=["1","2","4"]:1===n.type?P=["1"]:2===n.type?P=["2"]:4===n.type&&(P=["4"]));var j=I.a.createElement("div",null,I.a.createElement(d.a,{type:"plus"}),I.a.createElement("div",{className:"ant-upload-text"},"上传图片")),C="",T="";switch(parseInt(this.state.adPlace)){case 1:C="532px * 335px",T="690px * 230px";break;case 2:C="758px * 133px",T="690px * 191px";break;case 11:C="100px * 100px",T="";break;case 16:C="800px * 100px",T="640px * 80px";break;case 10:C="150px * 150px";break;case 5:C="1200px * 100px",T="690px * 155px";break;case 6:C="758px * 133px(单个) / 488px * 270px(两个以上)",T="";break;case 7:C="360px * 220px",T="";break;case 20:C="360px * 200px",T="";break;case 9:C="318px * 175px",T="";break;case 3:C="800px * 140px",T="690px * 191px";break;case 12:C="",T="";break;case 17:C="250px * 160px",T="";break;case 30:C="884px * 80px",T="690px * 230px";break;case 31:C="884px * 300px",T="690px * 230px";break;case 32:C="1200px * 80px"}"1"===this.state.adPlace||"5"===this.state.adPlace||"2"===this.state.adPlace||"3"===this.state.adPlace||"12"===this.state.adPlace||"30"===this.state.adPlace||"31"===this.state.adPlace?($[0].disabled=!1,$[1].disabled=!1,$[2].disabled=!1):"16"===this.state.adPlace?($[0].disabled=!1,$[1].disabled=!1,$[2].disabled=!0):($[0].disabled=!1,$[1].disabled=!0,$[2].disabled=!0);var N=this.state.data.map(function(e){return I.a.createElement(Z,{title:Object(A.R)(e.type,e.name),dataType:e.type,className:"tagType-".concat(e.type),value:JSON.stringify({id:e.id,type:e.type}),key:e.id},e.name)});return I.a.createElement("div",{className:"post-send"},I.a.createElement(u.a,{spinning:O,size:"large"},I.a.createElement(k.a,{onSubmit:this.handleSubmit},I.a.createElement(Q,M({},S,{label:"标题："}),t("remake",{initialValue:b&&n?"".concat(n.remake):"",rules:[{required:!0,message:"请输入广告标题"}]})(I.a.createElement(m.a,{placeholder:"输入广告标题"}))),I.a.createElement(Q,M({},S,{label:"描述"}),t("description",{initialValue:b&&n?"".concat(n.description||""):"",rules:[{required:!0,message:"请输入广告描述！"}]})(I.a.createElement(m.a,{placeholder:"请输入广告描述"}))),I.a.createElement(Q,M({},S,{label:"位置"}),t("adPlace",{initialValue:b&&n?this.state.adPlace.toString():"1",rules:[{required:!0,messag:"请输入广告位置"}]})(I.a.createElement(K,{options:A.N,onChange:this.positionChange,setFieldsValue:this.state.adPlace}))),3===parseInt(this.state.adPlace)||12===parseInt(this.state.adPlace)?I.a.createElement(Q,M({},S,{label:"嵌入频道"}),t("selectPosition",{initialValue:b&&n?"".concat(n.secondPostion):12===parseInt(this.state.adPlace)?"0":"10002",rules:[{required:!0,message:"请选择广告所属栏目"}]})(I.a.createElement(E.a,{style:{width:100},onChnage:this.changeIdChange},3===parseInt(this.state.adPlace)?i.map(function(e){return I.a.createElement(Z,{value:e.value,key:e.value},e.label)}):l.map(function(e){return I.a.createElement(Z,{value:e.value,key:e.value},e.label)})))):"",I.a.createElement(Q,M({},S,{label:"类型"}),t("useType",{initialValue:this.state.adType,rules:[{required:!0,message:"请选择类型！"}]})(I.a.createElement(K,{onChange:this.adType,setFieldsValue:this.state.adType},A.d.map(function(e,t){return I.a.createElement(w.a,{key:t,value:e.value},e.label)})))),"4"===this.state.adType?I.a.createElement(Q,M({},S,{label:v.label}),t("channelId",{initialValue:b&&n?"".concat(n.url):"10002",rules:[{required:!0,type:"".concat(v.type),message:"".concat(v.message)}]})(I.a.createElement(E.a,{style:{width:100},onChange:this.channelIdChange},this.props.channelList.map(function(e){return I.a.createElement(Z,{value:e.value,key:e.value},e.label)})))):"5"===this.state.adType?I.a.createElement(Q,M({},S,{label:v.label}),I.a.createElement("div",{className:"special-cont"},I.a.createElement(m.a,{placeholder:v.placeholder,value:this.state.specialActive,onChange:this.specialIdChange.bind(event)}),I.a.createElement("div",{className:"special-select",style:{display:this.state.specialValShow?"block":"none"}},this.state.specialVal.map(function(t,a){return I.a.createElement("p",{key:a,"data-val":t,onClick:e.specialValClick.bind(event)},t)})))):I.a.createElement(Q,M({},S,{label:v.label}),t("url",{initialValue:b&&n?"".concat(n.url):"",rules:[{required:4!==parseInt(this.state.adPlace),type:"".concat(v.type),message:"".concat(v.message)}]})(I.a.createElement(m.a,{placeholder:v.placeholder}))),17===parseInt(this.state.adPlace)&&I.a.createElement(Q,M({},S,{label:"新版标签："}),t("tagsV2",{initialValue:b&&n&&n.tagsV2&&0!==JSON.parse(n.tagsV2).length?this.transTags(JSON.parse(n.tagsV2)):[],rules:[{required:!0,message:"请选择相关标签！"}]})(I.a.createElement(E.a,{mode:"multiple",showSearch:!0,labelInValue:!0,notFoundContent:this.state.searching?I.a.createElement(u.a,{size:"small"}):this.state.searchText,filterOption:!1,optionFilterProp:"children",style:{width:"100%"},onSearch:this.getTagList,onSelect:this.handleSelect,onDeselect:this.handleDeselect,onChange:this.handleTagsChange,onBlur:this.handleBlur},N)),this.state.noCurrResult&&I.a.createElement("p",{style:{position:"absolute",right:"-160px",bottom:0}},I.a.createElement("span",null,"未找到结果?"),I.a.createElement(y.a,{type:"primary",loading:this.state.tagsIconLoading,style:{margin:"0 10px"},onClick:this.addNewTag,size:"small"},"创建"),I.a.createElement("span",null,"一个"))),3!==parseInt(this.state.adPlace)&&12!==parseInt(this.state.adPlace)&&I.a.createElement(Q,M({},S,{label:"权重: "}),t("topOrder",{initialValue:b&&n?n.topOrder:"0",rules:[{required:!0,message:"请输入广告权重！"}]})(I.a.createElement(m.a,{placeholder:"请输入广告权重！"}))),(3===parseInt(this.state.adPlace)||12===parseInt(this.state.adPlace))&&I.a.createElement(Q,M({},S,{label:"权重: "}),t("weight",{initialValue:b&&n?n.weight:"0",rules:[{required:!0,message:"请输入广告权重！"}]})(I.a.createElement(m.a,{placeholder:"请输入广告权重！"}))),I.a.createElement(Q,M({},S,{label:"平台: "}),t("type",{initialValue:b&&n?P:this.state.typeArr,rules:[{required:!0,message:"请选择平台！"}]})(I.a.createElement(X,{options:$,onChange:this.typeChange}))),I.a.createElement(Q,M({className:"offlineTime"},S,{label:"定时下线："}),I.a.createElement(w.a.Group,{onChange:this.offlineType,value:this.state.offlineType},I.a.createElement(w.a,{value:"0"},"永久"),I.a.createElement(w.a,{value:"1"},"定时")),t("expiredTime",{rules:[{required:!1,message:"请选择下线时间！"}],initialValue:b&&n?n.expiredTime?"0"===this.state.offlineType?null:V()(Object(A.w)(n.expiredTime),"YYYY-MM-DD HH:mm:ss"):null:"1"===this.state.offlineType?V()():null})(I.a.createElement(c.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onOk:this.changeOffLineType,style:{marginRight:15}}))),12!==parseInt(this.state.adPlace)&&17!==parseInt(this.state.adPlace)?I.a.createElement(Q,M({},S,{label:"PC封面: "}),I.a.createElement("div",{className:"dropbox"},t("pcImgSrc",{initialValue:b&&n?h:"",rules:[{required:!0,message:"请上传广告封面！"}]})(I.a.createElement(o.a,{action:"".concat(A.a,"/pic/upload"),headers:{"Sign-Param":Object(A.A)()},name:"uploadFile",listType:"picture-card",fileList:h,onPreview:this.handlePreview,onChange:this.handleChange},h.length>=1?null:j)),I.a.createElement(r.a,{visible:p,footer:null,onCancel:this.handleCancel},I.a.createElement("img",{alt:"example",style:{width:"100%"},src:f})),I.a.createElement("span",{className:"cover-img-tip"},"PC图片: ",I.a.createElement("font",{style:{color:"red"}},C)))):"",1===parseInt(this.state.adPlace)||16===parseInt(this.state.adPlace)||5===parseInt(this.state.adPlace)||2===parseInt(this.state.adPlace)||3===parseInt(this.state.adPlace)||30===parseInt(this.state.adPlace)||31===parseInt(this.state.adPlace)?I.a.createElement(Q,M({},S,{label:"App/Web封面: ",className:"upload-div"}),I.a.createElement("div",{className:"dropbox"},t("mImgSrc",{initialValue:b&&n?g:"",rules:[{required:!0,message:"请上传轮播封面图！"}]})(I.a.createElement(o.a,{headers:{"Sign-Param":Object(A.A)()},action:"".concat(A.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:g,onPreview:this.handlePreview,onChange:this.handleMImgChange},g.length>=1?null:j)),I.a.createElement("span",{className:"cover-img-tip"},"App/Web图片: ",I.a.createElement("font",{style:{color:"red"}},T)))):"",I.a.createElement(Q,{wrapperCol:{span:20,offset:2}},I.a.createElement(y.a,{type:"primary","data-status":"1",htmlType:"submit",style:{marginRight:"10px"}},"发布"),I.a.createElement(y.a,{type:"primary","data-status":"2",onClick:this.handleSubmit,style:{marginRight:"10px"}},"放入草稿箱"),I.a.createElement(y.a,{type:"primary",className:"cancel",onClick:function(){x.hashHistory.goBack()}},"取消")))))}}])&&z(a.prototype,n),i&&z(a,i),t}();t.default=Object(T.connect)(function(e){return{adInfo:e.adInfo.info,channelList:e.channelListInfo,flashTypeList:e.flashTypeListInfo}})(k.a.create()(ee))},1516:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),i=(a(247),a(183)),o=a.n(i),l=(a(1376),a(1377)),c=a.n(l),s=(a(1388),a(1389)),u=a.n(s),p=(a(1392),a(1393)),m=a.n(p),f=(a(184),a(1378)),d=a.n(f),h=(a(1381),a(1382)),y=a.n(h),b=(a(1383),a(1384)),g=a.n(b),v=(a(1387),a(50)),E=a.n(v),O=(a(361),a(20)),S=a.n(O),P=(a(678),a(363)),w=a.n(P),j=(a(677),a(362)),k=a.n(j),C=(a(1379),a(1380)),I=a.n(C),T=a(0),x=a.n(T),N=a(246),_=a(10),L=a(1612),V=a(248),A=a(48),D=(a(1607),a(1608)),F=a(11),q=a.n(F);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function U(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var G=I.a.Item,W=k.a.Option,J=w.a.Group,Q=[{label:"PC",value:"1"},{label:"Web",value:"4"},{label:"App",value:"2"}],K=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=z(t).call(this),e=!n||"object"!==M(n)&&"function"!=typeof n?Y(a):n,B(Y(e),"label",function(e){var t={};switch(e){case"1":t={label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"};break;case"3":t={label:"新闻 ID",message:"请输入新闻 ID",placeholder:"新闻 ID",type:""};break;case"4":t={label:"频道",message:"请选择新闻频道",placeholder:"新闻 ID",type:""};break;case"5":t={label:"专题名",message:"请输入专题名",placeholder:"示例：MarsBit特训营/20180725170844035121",type:""};break;case"6":t={label:"关键字",message:"请输入搜索的关键字/标签",placeholder:"关键字/标签",type:""};break;default:t={label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"}}return t}),B(Y(e),"positionChange",function(t){e.setState({adPlace:t.target.value})}),B(Y(e),"typeChange",function(t){e.setState({type:t.target.value})}),B(Y(e),"changeOffLineType",function(){"0"===e.state.offlineType&&e.setState({offlineType:"1"})}),B(Y(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),B(Y(e),"handlePreview",function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})}),B(Y(e),"handleChange",function(t){var a=t.file,n=t.fileList;e.setState({fileList:n}),"removed"===a.status&&e.setState({coverImgUrl:""}),a.response&&(1===a.response.code&&"done"===a.status&&e.setState({coverImgUrl:a.response.obj}),"error"===a.status&&(S.a.error("网络错误，上传失败！"),e.setState({coverImgUrl:"",fileList:[]})))}),B(Y(e),"offlineType",function(t){e.setState({offlineType:t.target.value})}),B(Y(e),"adType",function(t){e.setState({adType:t.target.value,text:e.label(t.target.value)})}),B(Y(e),"adVisibleHide",function(){e.setState({adVisible:!1})}),B(Y(e),"adVisibleShow",function(){e.setState({adVisible:!0})}),B(Y(e),"handleSubmit",function(t){var a=t.target.getAttribute("data-status");t.preventDefault(),e.props.form.setFieldsValue({mImgSrc:e.state.coverImgUrl}),e.props.form.validateFieldsAndScroll(function(t,n){if(!t){if(e.setState({loading:!0}),"0"===e.state.radioValue)n.expiredTime=0;else{var r=n.expiredTime?Date.parse(n.expiredTime.format("YYYY-MM-DD HH:mm:ss")):0;n.expiredTime=r/1e3}n.id=e.props.location.query.id||"",n.status=a||1,n.url="4"===n.useType?n.channelId:n.url||e.state.specialActive,!e.state.updateOrNot&&delete n.id,15===parseInt(e.state.adPlace)&&(n.topOrder=999),Object(A.i)("post","".concat(e.state.updateOrNot?"/ad/update":"/ad/add"),n,function(t){1===t.code?(S.a.success(e.state.updateOrNot?"修改成功！":"添加成功！"),_.hashHistory.goBack()):S.a.error(t.msg)})}})}),B(Y(e),"specialIdChange",function(t){var a=Y(e);e.setState({specialActive:t.target.value}),Object(A.i)("post","/topic/getTagsByTopicId",{id:t.target.value},function(e){if(1===e.code){var t=e.obj;a.setState({specialValShow:!0}),a.setState({specialVal:t||[]})}else a.setState({specialValShow:!1})})}),B(Y(e),"specialValClick",function(t){var a=t.target.getAttribute("data-val");e.setState({specialActive:"".concat(a,"/").concat(e.state.specialActive)}),e.setState({specialValShow:!1})}),B(Y(e),"channelIdChange",function(t){e.setState({url:t})}),e.state={updateOrNot:!1,adPlace:"",adVisible:!1,type:"1",previewVisible:!1,previewImage:"",adTitle:"",channelId:"1",adContent:"",fileList:[],coverImgUrl:"",loading:!0,adType:"1",offlineType:"0",specialVal:[],specialActive:"",specialValShow:!0,text:{label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"}},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,T["Component"]),a=t,(n=[{key:"componentDidUpdate",value:function(e,t){e.adInfo.url!==this.props.adInfo.url&&this.setState({specialActive:this.props.adInfo.url})}},{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location,r=this;a(Object(V.f)()),a(Object(D.a)("post",{pageSize:20,status:1,currentPage:1},function(){r.setState({loading:!1})})),n.query.id?a(Object(L.a)({id:n.query.id},function(t){e.setState({updateOrNot:!0,fileList:[{uid:0,name:"xxx.png",status:"done",url:t.mImgSrc}],coverImgUrl:t.mImgSrc,loading:!1,adPlace:t.adPlace,adType:"".concat(t.useType),text:e.label("".concat(t.useType)),offlineType:t.expiredTime?"1":"0"})})):this.setState({loading:!1})}},{key:"sendPost",value:function(e){var t={adTitle:e.postTitle||"",adContent:"".concat(e.postContent)||""};this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){B(e,t,a[t])})}return e}({},this.state,t))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.adInfo,i=a.classifyList,l=this.state,s=l.previewVisible,p=l.previewImage,f=l.fileList,h=l.updateOrNot,b=l.text,v={labelCol:{span:5},wrapperCol:{span:19}},O=[];i.map(function(e){1===e.status&&O.push({label:e.strategyCatName,value:e.strategyCat})});var S=x.a.createElement("div",null,x.a.createElement(E.a,{type:"plus"}),x.a.createElement("div",{className:"ant-upload-text"},"上传图片")),P="";switch(parseInt(this.state.adPlace)){case 4:P="1080*2440，上方520px高度留空";break;case 6:P="560*720，按照实际尺寸，不要做2x，3x的图片";break;case 13:P="690px * 150px";break;case 14:P="228px * 160px";break;case 15:P="690px * 200px"}return x.a.createElement("div",{className:"ad-send"},x.a.createElement(r.a,{spinning:this.state.loading,size:"large"},x.a.createElement(I.a,{onSubmit:this.handleSubmit},x.a.createElement(G,R({},v,{label:"平台: "}),t("type",{initialValue:"2"})(x.a.createElement(J,{disabled:!0,options:Q,onChange:this.typeChange,setFieldsValue:this.state.type}))),x.a.createElement(G,R({},v,{label:"位置: "}),t("adPlace",{initialValue:this.state.adPlace.toString(),rules:[{required:!0,message:"请选择广告位置"}]})(x.a.createElement(J,{options:A.f,onChange:this.positionChange,setFieldsValue:this.state.adPlace}))),15===parseInt(this.state.adPlace)?x.a.createElement(G,R({},v,{label:"策略分类"}),t("secondPosition",{initialValue:h&&n&&n.secondPosition?n.secondPosition.toString():"",rules:[{required:!0,message:"请选择策略频道"}]})(x.a.createElement(J,null,x.a.createElement(y.a,null,O.map(function(e,t){return x.a.createElement(g.a,{span:3,key:t},x.a.createElement(w.a,{value:"".concat(e.value)},e.label))}))))):"",x.a.createElement(G,R({},v,{label:"类型: "}),t("useType",{initialValue:this.state.adType,rules:[{required:!0,message:"请选择广告类型"}]})(x.a.createElement(J,{onChange:this.adType,setFieldsValue:this.state.adType},A.d.map(function(e,t){return x.a.createElement(w.a,{key:t,value:e.value},e.label)})))),"4"===this.state.adType?x.a.createElement(G,R({},v,{label:b.label}),t("channelId",{initialValue:h&&n?"".concat(n.url):"1",rules:[{required:!0,type:"".concat(b.type),message:"".concat(b.message)}]})(x.a.createElement(k.a,{style:{width:100},onChange:this.channelIdChange},this.props.channelList.map(function(e){return x.a.createElement(W,{value:e.value,key:e.value},e.label)})))):"5"===this.state.adType?x.a.createElement(G,R({},v,{label:b.label}),x.a.createElement("div",{className:"special-cont"},x.a.createElement(d.a,{placeholder:b.placeholder,value:this.state.specialActive,onChange:this.specialIdChange.bind(event)}),x.a.createElement("div",{className:"special-select",style:{display:this.state.specialValShow?"block":"none"}},this.state.specialVal.map(function(t,a){return x.a.createElement("p",{key:a,"data-val":t,onClick:e.specialValClick.bind(event)},t)})))):x.a.createElement(G,R({},v,{label:b.label}),t("url",{initialValue:h&&n?"".concat(n.url):"",rules:[{required:4!==parseInt(this.state.adPlace),type:"".concat(b.type),message:"".concat(b.message)}]})(x.a.createElement(d.a,{placeholder:b.placeholder}))),x.a.createElement(G,R({},v,{label:"标题: "}),t("remake",{initialValue:h&&n?"".concat(n.remake):"",rules:[{required:!0,message:"请输入链接标题！"}]})(x.a.createElement(d.a,{placeholder:"输入链接标题"}))),15!==parseInt(this.state.adPlace)&&x.a.createElement(G,R({},v,{label:"权重: "}),t("topOrder",{initialValue:h&&n?n.topOrder:"0",rules:[{required:!0,message:"请输入广告权重！"}]})(x.a.createElement(d.a,{placeholder:"请输入广告权重！"}))),15===parseInt(this.state.adPlace)&&x.a.createElement(G,R({},v,{label:"权重: "}),t("weight",{initialValue:h&&n?n.weight:"0",rules:[{required:!0,message:"请输入广告权重！"}]})(x.a.createElement(d.a,{placeholder:"请输入广告权重！"}))),x.a.createElement(G,R({},v,{label:"描述: "}),t("description",{initialValue:h&&n?"".concat(n.description||""):"",rules:[{required:!1,message:"请输入广告描述！"}]})(x.a.createElement(d.a,{placeholder:"请输入广告描述"}))),x.a.createElement(G,R({className:"offlineTime"},v,{label:"定时下线："}),x.a.createElement(w.a.Group,{onChange:this.offlineType,value:this.state.offlineType},x.a.createElement(w.a,{value:"0"},"永久"),x.a.createElement(w.a,{value:"1"},"定时")),t("expiredTime",{rules:[{required:!1,message:"请选择下线时间！"}],initialValue:h&&n?n.expiredTime?"2"===this.state.offlineType?null:q()(Object(A.w)(n.expiredTime),"YYYY-MM-DD HH:mm:ss"):null:"1"===this.state.offlineType?q()():null})(x.a.createElement(m.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onOk:this.changeOffLineType,style:{marginRight:15}}))),x.a.createElement(G,R({},v,{label:"封面: "}),x.a.createElement("div",{className:"dropbox"},t("mImgSrc",{initialValue:h&&n?f:"",rules:[{required:!0,message:"请上传广告封面！"}]})(x.a.createElement(u.a,{action:"".concat(A.a,"/pic/upload"),headers:{"Sign-Param":Object(A.A)()},name:"uploadFile",listType:"picture-card",fileList:f,onPreview:this.handlePreview,onChange:this.handleChange},f.length>=1?null:S)),x.a.createElement(c.a,{visible:s,footer:null,onCancel:this.handleCancel},x.a.createElement("img",{alt:"example",style:{width:"100%"},src:p})),x.a.createElement("span",{className:"cover-img-tip"},x.a.createElement("font",{style:{color:"red"}},P)))),x.a.createElement(G,{wrapperCol:{span:20,offset:2}},x.a.createElement(o.a,{type:"primary","data-status":"1",htmlType:"submit",style:{marginRight:"10px"}},"发布"),x.a.createElement(o.a,{type:"primary","data-status":"2",onClick:this.handleSubmit,style:{marginRight:"10px"}},"放入草稿箱"),x.a.createElement(o.a,{type:"primary",className:"cancel",onClick:function(){_.hashHistory.goBack()}},"取消")))))}}])&&U(a.prototype,n),i&&U(a,i),t}();t.default=Object(N.connect)(function(e){return{adInfo:e.adInfo.info,channelList:e.channelListInfo,classifyList:e.postTacticsInfo.list}})(I.a.create()(K))},1517:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(683),a(684)),o=a.n(i),l=(a(1381),a(1382)),c=a.n(l),s=(a(247),a(183)),u=a.n(s),p=(a(1383),a(1384)),m=a.n(p),f=(a(184),a(1378)),d=a.n(f),h=(a(361),a(20)),y=a.n(h),b=(a(1376),a(1377)),g=a.n(b),v=(a(677),a(362)),E=a.n(v),O=a(0),S=a.n(O),P=a(246),w=a(10),j=a(1659),k=a(48),C=a(1665);a(1607);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){V(e,t,a[t])})}return e}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var A=E.a.Option,D=g.a.confirm,F=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=N(t).call(this),e=!n||"object"!==I(n)&&"function"!=typeof n?_(a):n,V(_(e),"handledisplayFlagChange",function(t){(0,e.props.dispatch)(Object(j.d)({displayFlag:t})),e.doSearch("init",{page:1,displayFlag:t})}),V(_(e),"handledrecommendChange",function(t){(0,e.props.dispatch)(Object(j.d)({recommend:t})),e.doSearch("init",{page:1,recommend:t})}),V(_(e),"handleStatusChange",function(t){(0,e.props.dispatch)(Object(j.d)({status:t})),e.doSearch("init",{page:1,status:t})}),V(_(e),"hanleRecommend",function(t){var a=e.props.dispatch,n=_(e);D({title:"提示",content:"".concat(1===t.recommend?"确认取消推荐吗？":"确认要推荐吗？"),onOk:function(){var e={roomId:t.roomId,recommend:1===t.recommend?0:1};Object(k.i)("POST","/video/live/room/recommend",T({},e),function(e){1===e.code?(y.a.success("操作成功"),n.doSearch("init"),a(j.f)):y.a.error(e.msg)})}})}),e.state={loading:!0},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,O["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this.props.search;this.doSearch(e.type?e.type:"init",{})}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,i=n.pageData,o=n.search,l=n.filter,c={search:o.search,displayFlag:l.displayFlag||"",recommend:l.recommend||"",status:l.status||"",adminCreateFlag:0,pageSize:20,page:i.currPage};c=T({},c,t),r(Object(j.a)(e,c,function(){a.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(j.f)({type:"init",name:"",title:""})),e(Object(j.e)({pageData:20,totalCount:0})),e(Object(j.c)({}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(Object(j.e)({currPage:e})),this.doSearch(n.type,{page:e,status:r.status,recommend:r.recommend,displayFlag:r.displayFlag})}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{page:1}),e(Object(j.f)({page:1}))}},{key:"delLiveroom",value:function(e){var t=this.props.dispatch,a=this;D({title:"提示",content:"确认要删除吗？",onOk:function(){var n={roomId:e.roomId,status:-1};Object(k.i)("POST","/video/live/room/status",T({},n),function(e){1===e.code?(y.a.success("删除成功"),a.doSearch("init"),t(Object(j.f)({type:"init"}))):y.a.error(e.msg)})}})}},{key:"changeRoomAutoCommentFlag",value:function(e){var t=this.props.dispatch,a=this;D({title:"提示",content:"确认要".concat(1===e.autoCommentFlag?"关闭？":"开启","自动评论吗？"),onOk:function(){var n={roomId:e.roomId,autoCommentFlag:1===e.autoCommentFlag?0:1};Object(k.i)("POST","/video/live/room/auto_comment",T({},n),function(e){1===e.code?(y.a.success("操作成功"),a.doSearch("init"),t(j.f)):y.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,r=t.filter,i=t.search,l=t.dispatch;return S.a.createElement("div",null,S.a.createElement(C.a,{title:"userLive"}),S.a.createElement("div",{className:"webAdBox"},S.a.createElement("div",{className:"filter"},S.a.createElement(c.a,{style:{padding:"5px"}},S.a.createElement(m.a,{span:"18"},S.a.createElement(d.a,{value:i.search,placeholder:"输入关键词",onChange:function(e){return l(Object(j.f)({search:e.target.value}))},onPressEnter:function(){return e._search()}})),S.a.createElement(m.a,{span:"6",style:{textAlign:"center"}},S.a.createElement(u.a,{type:"primary",onClick:function(){e._search()}},"搜索"))),S.a.createElement(c.a,{style:{padding:"5px 0 5px 0"}},S.a.createElement(m.a,{span:8},S.a.createElement("span",{style:{margin:2}},"直播状态:"),S.a.createElement(E.a,{defaultValue:"".concat(r.status),style:{width:60},onChange:this.handleStatusChange},S.a.createElement(A,{value:""},"全部"),S.a.createElement(A,{value:"0"},"即将开始"),S.a.createElement(A,{value:"1"},"直播中"),S.a.createElement(A,{value:"2"},"回放中"))),S.a.createElement(m.a,{span:8},S.a.createElement("span",{style:{margin:3}},"推荐状态:"),S.a.createElement(E.a,{defaultValue:"".concat(r.recommend),style:{width:60},onChange:this.handledrecommendChange},S.a.createElement(A,{value:""},"全部"),S.a.createElement(A,{value:"0"},"未推荐"),S.a.createElement(A,{value:"1"},"已推荐"))),S.a.createElement(m.a,{span:8},S.a.createElement("span",{style:{margin:3}},"展示状态:"),S.a.createElement(E.a,{defaultValue:"1",style:{width:60},onChange:this.handledisplayFlagChange},S.a.createElement(A,{value:""},"全部"),S.a.createElement(A,{value:"0"},"未展示"),S.a.createElement(A,{value:"1"},"已展示"))))),S.a.createElement("div",{className:"content-list"},a.map(function(t,a){return S.a.createElement("div",{id:a,key:a},S.a.createElement("div",{className:"title"},t.name),S.a.createElement("div",{className:"info"},S.a.createElement("span",null,"开始时间：",Object(k.w)(t.beginTime)),S.a.createElement("span",null,"类型：",0===t.roomType?"移动直播":"大会直播")),S.a.createElement("div",{className:"options"},S.a.createElement(w.Link,{to:{pathname:"/userLive-edit",query:{id:t.roomId}},className:"mr10 opt-btn"},"编辑"),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return e.hanleRecommend(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},1===t.recommend?"已推荐":"未推荐")),S.a.createElement(w.Link,{to:{pathname:"/chatLive-index",query:{id:t.roomId}},className:"mr10 opt-btn"},"聊天"),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return e.changeRoomAutoCommentFlag(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},"自动评论:",1===t.autoCommentFlag?"开":"关")),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return e.delLiveroom(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},"删除"))))})),S.a.createElement("div",{className:"pagination"},S.a.createElement(o.a,{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}))))}}])&&x(a.prototype,n),r&&x(a,r),t}();t.default=Object(P.connect)(function(e){return{newliveInfo:e.newliveInfo,selectedData:e.newliveInfo.selectedData,list:e.newliveInfo.list,search:e.newliveInfo.search,filter:e.newliveInfo.filter,pageData:e.newliveInfo.pageData}})(r.a.create()(F))},1518:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),i=(a(1381),a(1382)),o=a.n(i),l=(a(1383),a(1384)),c=a.n(l),s=(a(1376),a(1377)),u=a.n(s),p=(a(247),a(183)),m=a.n(p),f=(a(1390),a(1391)),d=a.n(f),h=(a(1392),a(1393)),y=a.n(h),b=(a(1396),a(1397)),g=a.n(b),v=(a(1388),a(1389)),E=a.n(v),O=(a(1387),a(50)),S=a.n(O),P=(a(361),a(20)),w=a.n(P),j=(a(184),a(1378)),k=a.n(j),C=(a(678),a(363)),I=a.n(C),T=(a(1379),a(1380)),x=a.n(T),N=a(0),_=a.n(N),L=a(246),V=a(1659),A=a(10),D=a(48),F=a(248),q=(a(1607),a(1408)),M=a.n(q),R=a(11),U=a.n(R);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function H(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Q=x.a.Item,K=I.a.Group,X=k.a.TextArea,Z=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=B(t).call(this),e=!n||"object"!==z(n)&&"function"!=typeof n?G(a):n,J(G(e),"channelIdChange",function(t){e.setState({channelId:t.target.value})}),J(G(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),J(G(e),"handlePreview",function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})}),J(G(e),"handleChange",function(t){var a=t.file,n=t.fileList;e.setState({fileList:n}),"removed"===a.status&&e.setState({coverPicUrl:""}),a.response&&(1===a.response.code&&"done"===a.status&&e.setState({coverPicUrl:a.response.obj}),"error"===a.status&&(w.a.error("网络错误，上传失败！"),e.setState({coverPicUrl:"",fileList:[]})))}),J(G(e),"addGuest",function(){var t=e.state.guestList;t.length<3?(t.push({userType:0,phoneNum:""}),e.setState({guestList:t,guestFlag:1},function(){console.log("立即更新嘉宾数据")})):w.a.error("最多只能添加三个嘉宾")}),J(G(e),"handleGuest",function(t){var a=e.state.guestList;a[a.length-1].phoneNum=t,e.setState({guestList:a})}),J(G(e),"deleGuest",function(t){var a=e.state.guestList;a.splice(t,1),e.setState({guestList:a})}),J(G(e),"hanleRoomType",function(t){var a=t.target.value;e.setState({livecategory:a,roomType:3===a?1:0,guestFlag:2===a?1:0,isGuestTeam:1!==a})}),J(G(e),"handleSubmit",function(t){t.preventDefault(),e.props.form.validateFieldsAndScroll(function(t,a){if(!t){e.setState({loading:!0}),e.state.guestList.length>0&&(console.log("获取新增的"+e.state.guestList),console.log("获取原来的"+e.state.guestList));var n=new RegExp("<p></p>","g"),r="<p>"+a.brief,i=JSON.stringify(r).replace(/\\n/g,"</p><p>"),o=(i=i.replace(/\\r/g,"")).replace(/"/g,"").concat("</p>").replace(n,"<p><br></p>");console.log("刚刚上传的海报："+e.state.popCoverImg),e.state.isBriefImg&&""!==e.state.popCoverImg&&(o=o+'<p><img src="'+e.state.popCoverImg+'"></p>'),console.log("简介："+o);var l=e.state.coverPicUrl,c={roomType:e.state.roomType,name:a.name,brief:o,beginTime:a.beginTime.valueOf(),popularityAim:0,popularityAimTime:0,coverPicUrl:l,presenterList:[{userType:1,phoneNum:a.presenterList}],guestList:e.state.guestList,guestFlag:e.state.guestFlag,topOrder:a.topOrder,displayFlag:a.displayFlag?1:0,growthType:a.growthType||-1,popularity:a.popularity,liveType:a.liveType};console.log(e.state.roomId),e.state.updateOrNot?c.roomId=e.state.roomId:(c={roomType:e.state.roomType,name:a.name,brief:o,beginTime:a.beginTime.valueOf(),popularityAim:0,popularityAimTime:0,coverPicUrl:l,presenterList:[{userType:1,phoneNum:a.presenterList}],guestList:e.state.guestList,guestFlag:e.state.guestFlag,topOrder:a.topOrder,displayFlag:a.displayFlag?1:0,growthType:a.growthType||-1,popularity:a.popularity,liveType:a.liveType},console.log(c)),Object(D.j)("post","".concat(e.state.updateOrNot?"/video/live/room/update":"/video/live/room/add"),c,function(t){e.setState({loading:!1}),1===t.code?(w.a.success(e.state.updateOrNot?"修改成功":"添加成功"),A.hashHistory.push("/offiLive-list")):w.a.error(t.msg)})}})}),J(G(e),"handleBrifeImgChange",function(t){var a=t.file,n=t.fileList;e.setState({brifSrcFileList:n}),"removed"===a.status&&e.setState({popCoverImg:""}),a.response&&(1===a.response.code&&"done"===a.status&&e.setState({popCoverImg:a.response.obj,isBriefImg:!0}),"error"===a.status&&(w.a.error("网络错误，上传失败！"),e.setState({popCoverImg:"",brifSrcFileList:[]})))}),J(G(e),"copyAdress",function(t){var a=e.props.info,n="push"===t.target.getAttribute("title")?a.pushStreamUrl:a.pullStreamUrl;M()(n),w.a.success("链接复制成功")}),J(G(e),"handleChangeText",function(e){console.log(e)}),e.state={updateOrNot:!1,fileList:[],liveType:"1",coverPicUrl:"",guestList:[],guestFlag:0,nowRoomType:0,roomType:0,previewImage:"",popCoverImg:"",isBriefImg:!1,brifSrcFileList:[],isGuestTeam:"",roomId:""},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,N["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location;a(Object(F.l)()),n.query.id?a(Object(V.b)({roomId:n.query.id},function(t){var a=t.brief.replace(/<\/p>/g,"\r\n");if((a=(a=a.replace(/<p>/g,"")).replace(/<br>/g,"")).indexOf("<img")>-1){var r=a.indexOf("<img"),i=a.indexOf('">'),o=a.substring(r,i+2),l=a.replace(o,"");a=l;var c=o.substring(o.indexOf("htt"),o.indexOf('">'));e.setState({isBriefImg:!0,popCoverImg:c,brifSrcFileList:[{uid:0,name:"xxx.png",status:"done",url:c}]})}e.setState({updateOrNot:!0,fileList:[{uid:0,name:"xxx.png",status:"done",url:t.coverPicUrl}],isGuestTeam:0!==t.roomType||1===t.guestFlag,guestFlag:t.guestFlag||0,guestList:t.guestList?t.guestList:[],coverPicUrl:t.coverPicUrl,loading:!1,brief:a,roomId:n.query.id})})):this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.info,i=a.liveTypeList,l=this.state,s=l.previewVisible,p=l.previewImage,f=l.updateOrNot,h=l.fileList,b=l.liveType,v=l.guestList,O=l.isGuestTeam,P=l.brief,w=l.isBriefImg,j=l.brifSrcFileList,C=f&&n?0===n.roomType?0===n.guestFlag?1:2:3:"",T={labelCol:{span:5},wrapperCol:{span:19}},N=_.a.createElement("div",null,_.a.createElement(S.a,{type:"plus"}),_.a.createElement("div",{className:"ant-upload-text"},"上传图片"));return _.a.createElement("div",{className:"ad-send"},_.a.createElement(r.a,{spinning:this.state.loading,size:"large"},_.a.createElement(x.a,{onSubmit:this.handleSubmit},_.a.createElement(Q,Y({},T,{label:"直播标题："}),t("name",{initialValue:f&&n?"".concat(n.name):"",rules:[{required:!0,message:"请输入直播间标题！"}]})(_.a.createElement(k.a,{placeholder:"请输入直播间标题！"}))),_.a.createElement(Q,Y({},T,{label:"直播简介："}),t("brief",{initialValue:f&&n?P:"",rules:[{required:!0,message:"请输入内容！"}]})(_.a.createElement(X,{className:"live",ref:function(t){e.contentProps=t},rows:8,placeholder:"直播间内容格式"}))),(w||!f)&&_.a.createElement(Q,Y({label:"简介海报"},T),_.a.createElement("div",{className:"dropbox"},t("popCoverImg",{initialValue:f&&n?j:""})(_.a.createElement(E.a,{action:"".concat(D.a,"/pic/upload"),headers:{"Sign-Param":Object(D.A)()},name:"uploadFile",listType:"picture-card",fileList:j,onPreview:this.handlePreview,onChange:this.handleBrifeImgChange},j.length>=1?null:N)))),0!==i.length&&_.a.createElement(Q,Y({},T,{label:"直播分类"}),t("liveType",{initialValue:f&&n?"".concat(n.liveType||"1"):"1",rules:[{required:!0}]})(_.a.createElement(K,{options:i.filter(function(e){return!e.disabled}),onChange:this.channelIdChange,setFieldsValue:b}))),_.a.createElement(Q,Y({},T,{label:"直播类型"}),t("roomType",{initialValue:f&&n?0===n.roomType?0===n.guestFlag?1:2:3:"",rules:[{required:!0,message:"请选择直播间类型"}]})(_.a.createElement(K,{disabled:f,value:C,onChange:this.hanleRoomType},_.a.createElement(I.a,{value:1},"APP单人"),_.a.createElement(I.a,{value:2},"APP多人"),_.a.createElement(I.a,{value:3},"大会直播")))),_.a.createElement(Q,Y({},T,{label:"是否展示"}),t("displayFlag",{initialValue:!(!f||!n.displayFlag)&&1===parseInt(n.displayFlag),valuePropName:"checked"})(_.a.createElement(g.a,{onChange:function(t){e.setState({displayFlag:t?1:0})},checkedChildren:"是",unCheckedChildren:"否"}))),_.a.createElement(Q,Y({},T,{label:"直播时间"}),t("beginTime",{initialValue:f&&n?U()(Object(D.w)(n.beginTime),"YYYY-MM-DD HH:mm:ss"):U()(),rules:[{required:!0,message:"请选择直播开始时间"}]})(_.a.createElement(y.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))),_.a.createElement(Q,Y({},T,{label:"预设人气"}),t("growthType",{initialValue:f&&n?n.growthType:"",rules:[{required:!0,message:"请选择预设人气"}]})(_.a.createElement(I.a.Group,null,_.a.createElement(I.a,{value:-1},"0"),_.a.createElement(I.a,{value:3},"1500"),_.a.createElement(I.a,{value:0},"8000"),_.a.createElement(I.a,{value:1},"30000"),_.a.createElement(I.a,{value:2},"50000")))),_.a.createElement(Q,{wrapperCol:{span:12},labelCol:{span:5},label:"虚拟人气"},t("popularity",{initialValue:f&&n?n.popularity:0,rules:[{required:!1}]})(_.a.createElement(d.a,{placeholder:"输入虚拟人气"})),_.a.createElement("span",null,"当前人气：",f&&n?n.personNum+n.popularity:0)),_.a.createElement(Q,Y({},T,{label:"累计人次"}),_.a.createElement("div",{className:"personNum"},_.a.createElement("span",null,f&&n?n.personNum:0,"；"),_.a.createElement("span",null,"累计人数：",f&&n?n.imAccountCount:0,"；"),_.a.createElement("span",null,"峰值人数：",f&&n?n.maxOnLineNum:0))),_.a.createElement(Q,Y({},T,{label:"权重"}),t("topOrder",{initialValue:f&&n?n.topOrder:0,rules:[{required:!0,message:"请输入权重"}]})(_.a.createElement(d.a,{min:0}))),_.a.createElement(Q,Y({},T,{label:"主播账号"}),t("presenterList",{initialValue:f&&n?n.presenterList[0].phoneNum:0,rules:[{required:!0,message:"请输入主播账号"}]})(_.a.createElement(d.a,{style:{width:"60%"}}))),v.length>0&&v.map(function(t,a){return _.a.createElement("div",{id:a,key:a},_.a.createElement(Q,Y({label:"嘉宾账号".concat(a+1)},T),_.a.createElement(d.a,{value:t.phoneNum,ref:function(t){e.contentProps=t},onChange:function(t){return e.handleGuest(t)},style:{width:"60%"}}),_.a.createElement("i",{className:"iconfont iconfont-del",onClick:function(){return e.deleGuest(a)}})))}),O&&_.a.createElement(Q,Y({},T,{label:"嘉宾添加"}),_.a.createElement(m.a,{type:"dashed",onClick:this.addGuest,style:{width:"60%"}},_.a.createElement("i",{className:"iconfont iconfont-add"}),"添加嘉宾账号")),_.a.createElement(Q,Y({},T,{label:"直播封面: "}),_.a.createElement("div",{className:"dropbox"},t("coverPicUrl",{initialValue:f&&n?h:"",rules:[{required:!0,message:"请上传直播封面！"}]})(_.a.createElement(E.a,{action:"".concat(D.a,"/pic/upload"),headers:{"Sign-Param":Object(D.A)()},name:"uploadFile",listType:"picture-card",fileList:h,onPreview:this.handlePreview,onChange:this.handleChange},h.length>=1?null:N)),_.a.createElement(u.a,{visible:s,footer:null,onCancel:this.handleCancel},_.a.createElement("img",{alt:"example",style:{width:"100%"},src:p})),_.a.createElement("span",{className:"cover-img-tip"},"长宽比例: ",_.a.createElement("font",{style:{color:"red"}}," 640 * 358")))),f&&_.a.createElement(Q,Y({},T,{label:"推流地址"}),f&&n?_.a.createElement(k.a,{value:n.pushStreamUrl,disabled:!0}):"",_.a.createElement("a",{href:"javascript:void(0)",className:"copyAddress",title:"push",onClick:this.copyAdress},"复制"),_.a.createElement("span",{className:"gray"},"修改请在pc端操作")),f&&_.a.createElement(Q,Y({},T,{label:"拉流地址"}),f&&n?_.a.createElement(k.a,{value:n.pullStreamUrl,disabled:!0}):"",_.a.createElement("a",{href:"javascript:void(0)",className:"copyAddress",title:"pull",onClick:this.copyAdress},"复制"),_.a.createElement("span",{className:"gray"},"修改请在pc端操作")),_.a.createElement(Q,null,_.a.createElement(o.a,{type:"flex"},_.a.createElement(c.a,{span:12,style:{textAlign:"center"}},_.a.createElement(m.a,{type:"primary",onClick:this.handleSubmit,className:"submit"},"提交")),_.a.createElement(c.a,{span:12,style:{textAlign:"center"}},_.a.createElement(m.a,{type:"primary",className:"cancel",onClick:function(){A.hashHistory.goBack()}},"取消")))))))}}])&&H(a.prototype,n),i&&H(a,i),t}();t.default=Object(L.connect)(function(e){return{info:e.newliveInfo.info,liveTypeList:e.liveTypeListInfo}})(x.a.create()(Z))},1519:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(683),a(684)),o=a.n(i),l=(a(1390),a(1391)),c=a.n(l),s=(a(184),a(1378)),u=a.n(s),p=(a(247),a(183)),m=a.n(p),f=(a(361),a(20)),d=a.n(f),h=(a(1376),a(1377)),y=a.n(h),b=a(0),g=a.n(b),v=a(246),E=a(1659),O=(a(1607),a(1665)),S=a(48);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){T(e,t,a[t])})}return e}function j(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=y.a.confirm,N=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=k(t).call(this),e=!n||"object"!==P(n)&&"function"!=typeof n?C(a):n,T(C(e),"cancelModal",function(){e.setState({visible:!1})}),e.state={loading:!0,visible:!1},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,b["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this.props.search;this.doSearch(e.type?e.type:"init",{})}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0,visible:!1});var n=this.props,r=n.dispatch,i=n.pageData,o={search:n.search.search,homeRecommendFlag:1,pageSize:20,page:i.currPage};o=w({},o,t),r(Object(E.a)(e,o,function(){a.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(E.f)({type:"init",name:"",title:""})),e(Object(E.e)({pageData:20,totalCount:0})),e(Object(E.c)({}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search;a(Object(E.e)({currPage:e})),this.doSearch(n.type,{page:e})}},{key:"handleDetele",value:function(e){var t=this.props.dispatch,a=this;x({title:"提示",content:"确认要删除吗 ?",onOk:function(){var n={id:e.id,status:0};Object(S.i)("POST","/video/live/room/set/home_top_order",w({},n),function(e){1===e.code?(d.a.success("删除成功"),a.doSearch("init"),t(Object(E.f)({type:"init"}))):d.a.error(e.msg)})}})}},{key:"changeOrder",value:function(e){var t=this.props.dispatch;this.setState({visible:!0}),t(Object(E.c)(e))}},{key:"submitAccount",value:function(){var e=this.props,t=e.dispatch,a=e.selectedData,n=this,r={roomId:String(a.roomId),homeTopOrder:a.homeTopOrder};Object(S.i)("POST","/video/live/room/set/home_top_order",w({},r),function(e){1===e.code?(d.a.success("编辑成功"),n.doSearch("init"),t(Object(E.f)({type:"init"}))):d.a.error(e.msg)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,r=t.selectedData;return g.a.createElement("div",null,g.a.createElement(O.a,null),g.a.createElement("div",{className:"webAdBox"},g.a.createElement("div",{className:"content-list"},a.map(function(t,a){return g.a.createElement("div",{id:a,key:a},g.a.createElement("div",{className:"title"},t.name),g.a.createElement("div",{className:"option"},g.a.createElement("span",null,"直播间ID：",t.roomId),g.a.createElement("span",null,"权重：",t.homeTopOrder)),g.a.createElement("div",{className:"options"},g.a.createElement(m.a,{type:"primary",style:{marginRight:10},onClick:function(){return e.changeOrder(t)}},"编辑"),g.a.createElement(m.a,{type:"primary",style:{marginRight:10},onClick:function(){return e.handleDetele(t)}},"删除")))}))),g.a.createElement(y.a,{title:"首页推荐权重",visible:this.state.visible,onCancel:this.cancelModal,footer:[g.a.createElement(m.a,{key:"back",onClick:this.cancelModal},"取消"),g.a.createElement(m.a,{key:"submit",type:"primary",onClick:function(){e.submitAccount()}},"确定")]},g.a.createElement("div",{className:"recommendItem"},g.a.createElement("span",null,g.a.createElement("em",null,"*"),"直播间地址："),g.a.createElement(u.a,{id:"roomId",style:{width:"70%"},value:r.roomId})),g.a.createElement("div",{className:"recommendItem"},g.a.createElement("span",null,g.a.createElement("em",null,"*"),"首页权重："),g.a.createElement(c.a,{id:"homeTopOrder",style:{width:"70%"},value:r.homeTopOrder})),g.a.createElement("div",{className:"recommendItem"},g.a.createElement("span",null,"首页权重说明："),"首页展示权重数值最大的两个直播间")),g.a.createElement("div",{className:"pagination"},g.a.createElement(o.a,{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}})))}}])&&j(a.prototype,n),r&&j(a,r),t}();t.default=Object(v.connect)(function(e){return{newliveInfo:e.newliveInfo,selectedData:e.newliveInfo.selectedData,list:e.newliveInfo.list,search:e.newliveInfo.search,pageData:e.newliveInfo.pageData}})(r.a.create()(N))},1520:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return b});a(1383);var n=a(1384),r=a.n(n),i=(a(247),a(183)),o=a.n(i),l=(a(1381),a(1382)),c=a.n(l),s=a(0),u=a.n(s),p=a(10);a(1607);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,h(t).apply(this,arguments))}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,s["Component"]),a=t,(n=[{key:"render",value:function(){return u.a.createElement("div",{className:"mobile-index"},u.a.createElement(c.a,null,u.a.createElement("div",{className:"center"},u.a.createElement("div",{className:"logo"}))),u.a.createElement(c.a,null,u.a.createElement("h3",null,"快讯管理"),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/mflash-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"快讯管理"))),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/mflash-edit"}},u.a.createElement(o.a,{size:"large",type:"primary"},"快讯发布")))),u.a.createElement(c.a,null,u.a.createElement("h3",null,"广告管理"),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/webAd-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"网页广告"))),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/appAd-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"APP广告")))),u.a.createElement(c.a,null,u.a.createElement("h3",null,"直播管理"),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/offiLive-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"官方直播"))),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/userLive-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"用户直播"))),u.a.createElement(r.a,{span:8},u.a.createElement(p.Link,{to:{pathname:"/recommend-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"首页推荐")))),u.a.createElement(c.a,null,u.a.createElement("h3",null,"迷你功能"),u.a.createElement(r.a,null,u.a.createElement(p.Link,{to:{pathname:"/post-list"}},u.a.createElement(o.a,{size:"large",type:"primary"},"回到PC")))))}}])&&f(a.prototype,n),i&&f(a,i),t}()},1602:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(247),a(183)),o=a.n(i),l=(a(1394),a(1395)),c=a.n(l),s=(a(361),a(20)),u=a.n(s),p=(a(677),a(362)),m=a.n(p),f=(a(678),a(363)),d=a.n(f),h=(a(1376),a(1377)),y=a.n(h),b=a(0),g=a.n(b),v=a(246),E=a(1659),O=a(48),S=a(2);function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w=function(e,t,a){return function(e){Object(O.i)("GET","/video/live/comment/list",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){P(e,t,a[t])})}return e}({},t),function(t){if(1===t.code){var n=t.obj;e(j({inforList:n.inforList})),a&&a(n)}else u.a.error(t.msg)})}},j=function(e){return{type:S.t.ADD_DATA,data:e}},k=(a(1607),a(11)),C=a.n(k);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var V=y.a.confirm,A=d.a.Group,D=m.a.Option,F=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=x(t).call(this),e=!n||"object"!==I(n)&&"function"!=typeof n?N(a):n,L(N(e),"hanleBlackType",function(t){t&&e.setState({block:0===t.target.value,radioValue:t.target.value})}),L(N(e),"cancelModal",function(){e.props.form.resetFields(),e.setState({visible:!1,block:!1})}),e.state={loading:!0,liveStatus:"",liveTitle:"",name:"",status:"",globalForbidFlag:1,block:!1,ban:!1,radioValue:""},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,b["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.location;a(w(0,{roomId:n.query.id,pageSize:99999,search:""},function(t){e.setState({loading:!1})})),a(Object(E.b)({roomId:n.query.id},function(t){e.setState({name:t.name,status:t.status})}))}},{key:"delChat",value:function(e){var t=this.props,a=t.dispatch,n=t.location;V({title:"提示",content:"确认要删除吗？",onOk:function(){var t={commentId:e.id};Object(O.i)("POST","/video/live/comment/delete",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){L(e,t,a[t])})}return e}({},t),function(e){1===e.code?(u.a.success("删除成功"),a(w(0,{roomId:n.query.id,pageSize:99999,search:""}))):u.a.error(e.msg)})}})}},{key:"submitAccount",value:function(){""!==this.state.radioValue&&(u.a.success("禁言成功"),this.setState({visible:!1}))}},{key:"optionChange",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.inforList,r=t.selectedData,i=this.state,l=i.name,s=i.status,u=i.globalForbidFlag,p=i.block,f=i.radioValue;return g.a.createElement("div",{className:"chatBox"},g.a.createElement("div",{className:"title"},g.a.createElement(c.a,{color:"#108ee9"},0!==s?1!==s?"回放中":"直播中":"即将开始"),l),g.a.createElement("div",{className:"chatList-item"},n&&n.length>0&&n.map(function(t,n){return g.a.createElement("div",{id:n,key:n},g.a.createElement("div",{className:"content"},t.content),g.a.createElement("div",{className:"time"},t.nickName,": ",g.a.createElement("span",{className:"time"},C()(t.createTime).format("YYYY-MM-DD HH:mm:ss"))),g.a.createElement("div",{className:"options"},g.a.createElement(o.a,{type:"primary",size:"small",className:"opt-btn mr10",onClick:function(){var n;e.setState({visible:!0,radioValue:"",globalForbidFlag:t.globalForbidFlag}),a((n=t,{type:S.xb,data:n}))}},"禁言"),g.a.createElement(o.a,{type:"primary",size:"small",className:"opt-btn mr10",onClick:function(){return e.delChat(t)}},"删除")))}),n&&0===n.length&&g.a.createElement("div",{style:{textAlign:"center"}},"暂无聊天记录")),g.a.createElement(y.a,{title:"禁言",visible:this.state.visible,onOk:function(){return e.submitAccount()},onCancel:this.cancelModal,footer:[g.a.createElement(o.a,{key:"back",onClick:this.cancelModal},"取消"),g.a.createElement(o.a,{key:"submit",type:"primary",onClick:function(){e.submitAccount()}},"确定")]},g.a.createElement("div",{style:{margin:"10px 0"}},g.a.createElement("span",null,"用户昵称："),r.nickName),g.a.createElement("div",{style:{margin:"10px 0"}},g.a.createElement("span",null,"禁言类型："),g.a.createElement(A,{value:f,onChange:this.hanleBlackType},g.a.createElement(d.a,{value:0},"直播间禁言"),g.a.createElement(d.a,{value:1,disabled:1===u},"黑名单禁言"))),0===u&&p?g.a.createElement("div",{className:"opt"},g.a.createElement("span",null,"禁言时间："),g.a.createElement(m.a,{onChange:this.optionChange,defaultValue:"10分钟",style:{width:"30%"}},g.a.createElement(D,{value:"10分钟"},"10分钟"),g.a.createElement(D,{value:"1天"},"1天"),g.a.createElement(D,{value:"7天"},"7天"),g.a.createElement(D,{value:"30天"},"30天"),g.a.createElement(D,{value:"365天"},"365天"))):null))}}])&&T(a.prototype,n),r&&T(a,r),t}();t.default=Object(v.connect)(function(e){return{info:e.newliveInfo.info,inforList:e.liveChatListInfo.inforList,selectedData:e.liveChatListInfo.selectedData}})(r.a.create()(F))},1603:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(683),a(684)),o=a.n(i),l=(a(1381),a(1382)),c=a.n(l),s=(a(247),a(183)),u=a.n(s),p=(a(1383),a(1384)),m=a.n(p),f=(a(184),a(1378)),d=a.n(f),h=(a(361),a(20)),y=a.n(h),b=(a(1376),a(1377)),g=a.n(b),v=(a(677),a(362)),E=a.n(v),O=a(0),S=a.n(O),P=a(246),w=a(10),j=a(1659),k=a(48),C=(a(1400),a(1401)),I=a.n(C),T=a(89),x=a(51),N=a.n(x),_=a(248);a(1607);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=I.a.Header,M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,D(t).apply(this,arguments))}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,O["Component"]),a=t,(n=[{key:"loginOut",value:function(){this.props.actions.logout({passportId:N.a.get("hx_passportId")})}},{key:"goAdd",value:function(){w.hashHistory.push("/userLive-edit")}},{key:"goMainPage",value:function(){w.hashHistory.push("/mobile")}},{key:"goPcPage",value:function(){w.hashHistory.push("/post-list")}},{key:"render",value:function(){var e=this;return S.a.createElement(q,{style:{textAlign:"center"}},S.a.createElement(c.a,null,S.a.createElement(m.a,{span:8},S.a.createElement("div",{className:"header-item"},S.a.createElement(u.a,{type:"primary",onClick:function(){e.goAdd()}},"新增"))),S.a.createElement(m.a,{span:8},S.a.createElement("div",{className:"header-item"},S.a.createElement(u.a,{type:"primary",onClick:function(){e.goMainPage()}},"回首页"))),S.a.createElement(m.a,{span:8},S.a.createElement("div",{className:"header-item"},S.a.createElement(u.a,{type:"primary",onClick:function(){e.loginOut()}},"退出登录")))))}}])&&V(a.prototype,n),r&&V(a,r),t}(),R=Object(P.connect)(function(e){return{loginInfo:e.loginInfo}},function(e){return{actions:Object(T.bindActionCreators)({breadcrumb:_.b,navigation:_.o,logout:_.n},e)}})(M);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){W(e,t,a[t])})}return e}function Y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var J=E.a.Option,Q=g.a.confirm,K=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=H(t).call(this),e=!n||"object"!==U(n)&&"function"!=typeof n?B(a):n,W(B(e),"handledisplayFlagChange",function(t){(0,e.props.dispatch)(Object(j.d)({displayFlag:t})),e.doSearch("init",{page:1,displayFlag:t})}),W(B(e),"handledrecommendChange",function(t){(0,e.props.dispatch)(Object(j.d)({recommend:t})),e.doSearch("init",{page:1,recommend:t})}),W(B(e),"handleStatusChange",function(t){(0,e.props.dispatch)(Object(j.d)({status:t})),e.doSearch("init",{page:1,status:t})}),W(B(e),"hanleRecommend",function(t){var a=e.props.dispatch,n=B(e);Q({title:"提示",content:"".concat(1===t.recommend?"确认取消推荐吗？":"确认要推荐吗？"),onOk:function(){var e={roomId:t.roomId,recommend:1===t.recommend?0:1};Object(k.i)("POST","/video/live/room/recommend",z({},e),function(e){1===e.code?(y.a.success("操作成功"),n.doSearch("init"),a(j.f)):y.a.error(e.msg)})}})}),e.state={loading:!0},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,O["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this.props.search;this.doSearch(e.type?e.type:"init",{})}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,i=n.pageData,o=n.search,l=n.filter,c={search:o.search,displayFlag:l.displayFlag||"1",recommend:l.recommend||"",status:l.status||"",adminCreateFlag:1,pageSize:20,page:i.currPage};c=z({},c,t),r(Object(j.a)(e,c,function(){a.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(j.f)({type:"init",name:"",title:""})),e(Object(j.e)({pageData:20,totalCount:0})),e(Object(j.c)({}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(Object(j.e)({currPage:e})),this.doSearch(n.type,{page:e,status:r.status,recommend:r.recommend,displayFlag:r.displayFlag})}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{page:1}),e(Object(j.f)({page:1}))}},{key:"delLiveroom",value:function(e){var t=this.props.dispatch,a=this;Q({title:"提示",content:"确认要删除吗？",onOk:function(){var n={roomId:e.roomId,status:-1};Object(k.i)("POST","/video/live/room/status",z({},n),function(e){1===e.code?(y.a.success("删除成功"),a.doSearch("init"),t(Object(j.f)({type:"init"}))):y.a.error(e.msg)})}})}},{key:"changeRoomAutoCommentFlag",value:function(e){var t=this.props.dispatch,a=this;Q({title:"提示",content:"确认要".concat(1===e.autoCommentFlag?"关闭？":"开启","自动评论吗？"),onOk:function(){var n={roomId:e.roomId,autoCommentFlag:1===e.autoCommentFlag?0:1};Object(k.i)("POST","/video/live/room/auto_comment",z({},n),function(e){1===e.code?(y.a.success("操作成功"),a.doSearch("init"),t(j.f)):y.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,r=t.filter,i=t.search,l=t.dispatch;return S.a.createElement("div",null,S.a.createElement(R,{title:"userLive"}),S.a.createElement("div",{className:"webAdBox"},S.a.createElement("div",{className:"filter"},S.a.createElement(c.a,{style:{padding:"5px"}},S.a.createElement(m.a,{span:"18"},S.a.createElement(d.a,{value:i.search,placeholder:"输入关键词",onChange:function(e){return l(Object(j.f)({search:e.target.value}))},onPressEnter:function(){return e._search()}})),S.a.createElement(m.a,{span:"6",style:{textAlign:"center"}},S.a.createElement(u.a,{type:"primary",onClick:function(){e._search()}},"搜索"))),S.a.createElement(c.a,null,S.a.createElement(m.a,{span:8},S.a.createElement("span",{style:{margin:2}},"直播状态:"),S.a.createElement(E.a,{defaultValue:"".concat(r.status),style:{width:60},onChange:this.handleStatusChange},S.a.createElement(J,{value:""},"全部"),S.a.createElement(J,{value:"0"},"即将开始"),S.a.createElement(J,{value:"1"},"直播中"),S.a.createElement(J,{value:"2"},"回放中"))),S.a.createElement(m.a,{span:8},S.a.createElement("span",{style:{margin:3}},"推荐状态:"),S.a.createElement(E.a,{defaultValue:"".concat(r.recommend),style:{width:60},onChange:this.handledrecommendChange},S.a.createElement(J,{value:""},"全部"),S.a.createElement(J,{value:"0"},"未推荐"),S.a.createElement(J,{value:"1"},"已推荐"))),S.a.createElement(m.a,{span:8},S.a.createElement("span",{style:{margin:3}},"展示状态:"),S.a.createElement(E.a,{defaultValue:"1",style:{width:60},onChange:this.handledisplayFlagChange},S.a.createElement(J,{value:""},"全部"),S.a.createElement(J,{value:"0"},"未展示"),S.a.createElement(J,{value:"1"},"已展示"))))),S.a.createElement("div",{className:"content-list"},a.map(function(t,a){return S.a.createElement("div",{id:a,key:a},S.a.createElement("div",{className:"title"},t.name),S.a.createElement("div",{className:"info"},S.a.createElement("span",null,"开始时间：",Object(k.w)(t.beginTime)),S.a.createElement("span",null,"类型：",0===t.roomType?"移动直播":"大会直播")),S.a.createElement("div",{className:"options"},S.a.createElement(w.Link,{to:{pathname:"/userLive-edit",query:{id:t.roomId}},className:"mr10 opt-btn"},"编辑"),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return e.hanleRecommend(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},1===t.recommend?"已推荐":"未推荐")),S.a.createElement(w.Link,{to:{pathname:"/chatLive-index",query:{id:t.roomId}},className:"mr10 opt-btn"},"聊天"),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return e.changeRoomAutoCommentFlag(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},"自动评论:",1===t.autoCommentFlag?"开":"关")),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return e.delLiveroom(t)},className:"mr10 opt-btn",href:"javascript:void(0)"},"删除"))))})),S.a.createElement("div",{className:"pagination"},S.a.createElement(o.a,{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}))))}}])&&Y(a.prototype,n),r&&Y(a,r),t}();t.default=Object(P.connect)(function(e){return{newliveInfo:e.newliveInfo,selectedData:e.newliveInfo.selectedData,list:e.newliveInfo.list,search:e.newliveInfo.search,filter:e.newliveInfo.filter,pageData:e.newliveInfo.pageData}})(r.a.create()(K))},1607:function(e,t,a){var n=a(1854);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1608:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(361);var n=a(20),r=a.n(n),i=a(48),o=a(2),l=function(e,t,a){return function(n){Object(i.i)(e,"/news/strategyCategory/showStrategyCategorylist",t,function(e){if(1===e.code){var t=e.obj;n({type:o.nb.LIST_POST_TACTICS,data:t}),a&&a(t)}else r.a.error(e.msg)})}}},1659:function(e,t,a){"use strict";a.d(t,"c",function(){return c}),a.d(t,"a",function(){return s}),a.d(t,"b",function(){return u}),a.d(t,"d",function(){return m}),a.d(t,"f",function(){return f}),a.d(t,"e",function(){return d});a(361);var n=a(20),r=a.n(n),i=a(48),o=a(2);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e){return{type:o.xb,data:e}},s=function(e,t,a){return function(n){var o="init"===e?"/video/live/room/list":"/post/search";Object(i.i)("GET",o,t||{},function(e){if(1===e.code){var t=e.obj;n(p({list:t.inforList})),n(d({totalCount:t.recordCount,pageSize:t.pageSize||20,currPage:t.currentPage})),a?a(t):r.a.error(e.msg)}})}},u=function(e,t){return function(a){Object(i.i)("get","/video/live/room/detail",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){l(e,t,a[t])})}return e}({},e),function(e){if(1===e.code){var n=e.obj;a(p({info:n})),t&&t(n)}else r.a.error(e.msg)})}},p=function(e){return{type:o.gb.ADD_DATA,data:e}},m=function(e){return{type:o.gb.SET_FILTER_DATA,data:e}},f=function(e){return{type:o.gb.SET_SEARCH_QUERY,data:e}},d=function(e){return{type:o.gb.SET_PAGE_DATA,data:e}}},1665:function(e,t,a){"use strict";a(1381);var n=a(1382),r=a.n(n),i=(a(1383),a(1384)),o=a.n(i),l=(a(247),a(183)),c=a.n(l),s=(a(361),a(20)),u=a.n(s),p=(a(1400),a(1401)),m=a.n(p),f=a(0),d=a.n(f),h=a(89),y=a(10),b=a(246),g=a(51),v=a.n(g),E=a(248);a(1607);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=m.a.Header,C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=P(this,w(t).call(this))).state={live:!0},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,f["Component"]),a=t,(n=[{key:"loginOut",value:function(){this.props.actions.logout({passportId:v.a.get("hx_passportId")})}},{key:"goAdd",value:function(){var e=this.props.title;"userLive"!==e?y.hashHistory.push("/".concat(e)):u.a.error("后台不可以创建用户直播间")}},{key:"goMainPage",value:function(){y.hashHistory.push("/mobile")}},{key:"goPcPage",value:function(){y.hashHistory.push("/post-list")}},{key:"render",value:function(){var e=this;return d.a.createElement(k,{style:{textAlign:"center"}},d.a.createElement(r.a,null,d.a.createElement(o.a,{span:8},d.a.createElement("div",{className:"header-item"},d.a.createElement(c.a,{type:"primary",onClick:function(){e.goAdd()}},"新增"))),d.a.createElement(o.a,{span:8},d.a.createElement("div",{className:"header-item"},d.a.createElement(c.a,{type:"primary",onClick:function(){e.goMainPage()}},"回首页"))),d.a.createElement(o.a,{span:8},d.a.createElement("div",{className:"header-item"},d.a.createElement(c.a,{type:"primary",onClick:function(){e.loginOut()}},"退出登录")))))}}])&&S(a.prototype,n),i&&S(a,i),t}();t.a=Object(b.connect)(function(e){return{loginInfo:e.loginInfo}},function(e){return{actions:Object(h.bindActionCreators)({breadcrumb:E.b,navigation:E.o,logout:E.n},e)}})(C)},1854:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},687:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(683),a(684)),o=a.n(i),l=(a(1381),a(1382)),c=a.n(l),s=(a(1383),a(1384)),u=a.n(s),p=(a(361),a(20)),m=a.n(p),f=(a(677),a(362)),d=a.n(f),h=(a(1376),a(1377)),y=a.n(h),b=a(0),g=a.n(b),v=a(246),E=a(1612),O=a(1665),S=a(10),P=a(48);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=y.a.confirm,_=d.a.Option,L=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=C(t).call(this),e=!n||"object"!==w(n)&&"function"!=typeof n?I(a):n,x(I(e),"getOrderNum",function(t){e.setState({order:t})}),x(I(e),"handleChange",function(t){(0,e.props.dispatch)(Object(E.d)({adMobilePlace:t})),e.setState({adStatus:t}),e.doSearch("init",{currentPage:1,adPlace:t})}),x(I(e),"handleStatusChange",function(t){(0,e.props.dispatch)(Object(E.d)({mStatus:t})),e.doSearch("init",{currentPage:1,status:t})}),x(I(e),"incAd",function(){S.hashHistory.push("/adM-edit")}),x(I(e),"handleOk",function(t){e.setState({visible:!1})}),x(I(e),"handleCancel",function(t){e.setState({visible:!1})}),x(I(e),"handleImgModalCancel",function(){return e.setState({previewVisible:!1})}),x(I(e),"handlePreview",function(t){e.setState({previewImage:t.target.getAttribute("src"),previewVisible:!0})}),e.state={loading:!0,adStatus:null,visible:!1,previewVisible:!1,previewImage:"",order:1},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,b["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this.props,t=e.search,a=e.filter;this.doSearch(t.type?t.type:"init",{adPlace:a.adMobilePlace})}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,i=n.pageData,o=n.search,l=n.filter,c={serach:o.search,status:l.mStatus||"",adPlaceL:l.adMobilePlace,type:2,pageSize:20,currentPage:i.currPage};c=j({},c,t),r(Object(E.b)(e,c,function(){a.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(E.f)({type:"init",nickName:"",title:""})),e(Object(E.e)({pageData:20,totalCount:0})),e(Object(E.c)({}))}},{key:"adPosition",value:function(e){var t="";return P.f.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(Object(E.e)({currPage:e})),this.doSearch(n.type,{currentPage:e,adPlace:r.adMobilePlace,status:r.mStatus})}},{key:"delAd",value:function(e){var t=this.props.dispatch,a=this;N({title:"提示",content:"确认要删除吗 ?",onOk:function(){var n={id:e.id,status:0};Object(P.i)("POST","/ad/status",j({},n),function(e){1===e.code?(m.a.success("删除成功"),a.doSearch("init"),t(Object(E.f)({type:"init"}))):m.a.error(e.msg)})}})}},{key:"_isPublish",value:function(e){var t=this.props.dispatch,a=this;N({title:"提示",content:"确认要".concat(2===e.status?"发表":"撤回广告","吗 ?"),onOk:function(){var n={id:e.id,status:2===e.status?1:2};Object(P.i)("POST","/ad/status",j({},n),function(n){1===n.code?(m.a.success("".concat(2===e.status?"发表":"撤回到草稿箱","成功")),a.doSearch("init"),t(Object(E.f)({type:"init"}))):m.a.error(n.msg)})}})}},{key:"recommendTopic",value:function(e){var t=this;e.topOrder&&2!==parseInt(e.status)?this.setState({order:e.topOrder}):this.setState({order:1}),N({title:"提示",content:g.a.createElement("div",{className:"modal-input"},g.a.createElement("span",{style:{marginRight:10}},"请输入排序号：(序号越小越靠前, 最小为 1)"),g.a.createElement(InputNumber,{min:1,max:999,defaultValue:e.topOrder||1,autoFocus:!0,type:"number",onChange:t.getOrderNum})),onOk:function(){var a=t.state.order;if(""===a.toString().trim())return m.a.error("序号不能为空！"),!1;var n={id:e.id,status:1,type:e.type,topOrder:a,adPlace:e.adPlace};2===e.status?Object(P.i)("POST","/ad/status",{id:e.id,status:2===e.status?1:2},function(e){1===e.code?Object(P.i)("POST","/ad/settoporder",j({},n),function(e){1===e.code?(m.a.success("操作成功"),t.doSearch("init")):m.a.error(e.msg)}):m.a.error(e.msg)}):1===e.status&&Object(P.i)("POST","/ad/settoporder",j({},n),function(e){1===e.code?(m.a.success("操作成功"),t.doSearch("init")):m.a.error(e.msg)})}})}},{key:"detailModal",value:function(e){this.setState({visible:!0}),(0,this.props.dispatch)(Object(E.c)(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.filter,r=t.pageData;return g.a.createElement("div",null,g.a.createElement(O.a,{title:"appAd-edit"}),g.a.createElement("div",{className:"webAdBox"},g.a.createElement(c.a,null,g.a.createElement(u.a,{span:12},g.a.createElement(d.a,{defaultValue:"".concat(n.adMobilePlace),style:{margin:"10px auto",width:"80%",display:"block"},onChange:this.handleChange},g.a.createElement(_,{value:""},"全部位置"),P.f.map(function(e,t){return g.a.createElement(_,{value:e.value,key:t},e.label)}))),g.a.createElement(u.a,{span:12},g.a.createElement(d.a,{defaultValue:"".concat(n.mStatus),style:{margin:"10px auto",width:"80%",display:"block"},onChange:this.handleStatusChange},g.a.createElement(_,{value:""},"全部状态"),g.a.createElement(_,{value:"1"},"展示中"),g.a.createElement(_,{value:"2"},"未展示")))),g.a.createElement("div",{className:"content-list"},a.map(function(t,a){return g.a.createElement("div",{id:a,key:a},g.a.createElement("div",{className:"title"},t.title),g.a.createElement("div",{className:"info"},g.a.createElement("span",null,"位置：",e.adPosition(t.adPlace)),g.a.createElement("span",null,"更新时间：",Object(P.w)(t.updateTime))),g.a.createElement("div",{className:"options"},g.a.createElement("p",null,g.a.createElement(S.Link,{className:"mr10 opt-btn",to:{pathname:"/appAd-edit",query:{id:t.id}}},"编辑")),g.a.createElement("p",{style:{marginBottom:"10px"}},g.a.createElement("a",{className:"mr10 opt-btn",href:"javascript:void(0)",onClick:function(){return e._isPublish(t)},style:{background:"#00a854"}},1===t.status?"撤回":"发布")),g.a.createElement("p",null,g.a.createElement("a",{onClick:function(){return e.delAd(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除"))))})),g.a.createElement("div",{className:"pagination"},g.a.createElement(o.a,{current:r.currPage,total:r.totalCount,pageSize:r.pageSize,onChange:function(t){return e.changePage(t)}}))))}}])&&k(a.prototype,n),r&&k(a,r),t}();t.default=Object(v.connect)(function(e){return{adInfo:e.adInfo,selectedData:e.adInfo.selectedData,list:e.adInfo.list,search:e.adInfo.search,filter:e.adInfo.filter,pageData:e.adInfo.pageData}})(r.a.create()(L))}}]);