(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{1502:function(e,t,a){"use strict";a.r(t);a(1379);var n=a(1380),r=a.n(n),i=(a(675),a(676)),c=a.n(i),o=(a(1385),a(1386)),l=a.n(o),u=(a(1381),a(1382)),s=a.n(u),p=(a(247),a(183)),g=a.n(p),d=(a(184),a(1378)),h=a.n(d),f=(a(1383),a(1384)),m=a.n(f),v=(a(361),a(20)),y=a.n(v),b=(a(1376),a(1377)),S=a.n(b),E=(a(677),a(362)),O=a.n(E),k=a(0),w=a.n(k),j=a(246),P=a(10),C=a(1708),T=(a(1709),a(48));function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){I(e,t,a[t])})}return e}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=O.a.Option,J=S.a.confirm,V=[],W=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=N(t).call(this),e=!n||"object"!==L(n)&&"function"!=typeof n?z(a):n,I(z(e),"handleChange",function(t){(0,e.props.dispatch)(Object(C.c)({tagLevel:t})),e.setState({adStatus:t}),e.doSearch("init",{currentPage:1,tagLevel:t})}),I(z(e),"handleStatusChange",function(t){(0,e.props.dispatch)(Object(C.c)({tagStatus:t})),e.doSearch("init",{currentPage:1,tagStatus:t})}),e.state={loading:!1},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,k["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.search,n=t.filter;V=[{title:"Tag名称",width:220,key:"name",render:function(e,t){return t&&w.a.createElement("div",null,t.name)}},{title:"图标",width:220,key:"tagImg",render:function(e,t){return t&&w.a.createElement("div",null,t.tagImg&&w.a.createElement("img",{src:t.tagImg,alt:"标签图标"}))}},{title:"说明",width:220,key:"description",render:function(e,t){return w.a.createElement("div",null,t.description)}},{title:"类型",width:220,key:"tagLevel",render:function(e,t){return w.a.createElement("div",null,0===t.tagLevel?"普通":"重要")}},{title:"状态",width:220,key:"tagStatus",render:function(e,t){return w.a.createElement("div",null,2!==t.tagStatus?0===t.tagStatus?"未启用":"启用":"删除")}},{title:"操作",width:220,key:"option",render:function(t){return w.a.createElement("div",{className:"btns"},w.a.createElement("p",null,w.a.createElement(P.Link,{className:"mr10 opt-btn",to:{pathname:"/tagv2-send",query:{id:t.id}},style:{background:"#108ee8"}},"编辑")),w.a.createElement("p",null,w.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){return e.deleteTagsv2(t)},style:{background:"#f68e15"}},1===t.tagStatus?"禁用":"启用")),w.a.createElement("p",null,w.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){return e.updateTagsv2(t)},style:{background:"#d73435"}},0===t.tagLevel?"重要":"普通")))}}],this.doSearch("init",_({},n,{title:a.title}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(C.e)({type:"init",nickName:""})),e(Object(C.d)({pageSize:20,totalCount:0}))}},{key:"doSearch",value:function(e,t){var a=this,n=this.props,r=n.dispatch,i=n.pageData,c=_({},n.filter,{names:n.search.name,pageSize:20,currentPage:i.currPage});this.setState({loading:!0}),c=_({},c,t),r(Object(C.a)(e,c,function(){a.setState({loading:!1})}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,r=t.filter;a(Object(C.d)({currPage:e})),this.doSearch(n.type,_({currentPage:e},r))}},{key:"deleteTagsv2",value:function(e){var t=this.props.dispatch,a=this;J({title:"提示",content:"确认要".concat(1===e.tagStatus?"禁用":"启用","吗"),onOk:function(){var n={id:e.id,tagStatus:0===e.tagStatus?1:0};Object(T.i)("POST","/tagmgr/editTag",_({},n),function(e){1===e.code?(y.a.success("修改成功"),a.doSearch("init"),t(Object(C.e)({type:"init"}))):y.a.error(e.msg)})}})}},{key:"updateTagsv2",value:function(e){var t=this.props.dispatch,a=this;J({title:"提示",content:"确认要设为".concat(0===e.tagLevel?"重要":"普通","吗"),onOk:function(){var n={id:e.id,tagLevel:0===e.tagLevel?1:0};Object(T.i)("POST","/tagmgr/editTag",_({},n),function(e){1===e.code?(y.a.success("修改成功"),a.doSearch("init"),t(Object(C.e)({type:"init"}))):y.a.error(e.msg)})}})}},{key:"_search",value:function(){var e=this.props.dispatch;this.setState({loading:!0}),this.doSearch("init",{currentPage:1}),e(Object(C.e)({type:"init"})),e(Object(C.d)({currPage:1}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,r=t.filter,i=t.search,o=t.dispatch;return w.a.createElement("div",{className:"tags-index"},w.a.createElement(s.a,null,w.a.createElement(m.a,{span:2},w.a.createElement("span",null,"类型："),w.a.createElement(O.a,{onChange:this.handleChange,style:{width:60,marginRight:15},defaultValue:"".concat(r.tagLevel)},w.a.createElement(x,{value:""},"全部"),w.a.createElement(x,{value:"0"},"普通"),w.a.createElement(x,{value:"1"},"重要"))),w.a.createElement(m.a,{span:2},w.a.createElement("span",null,"状态："),w.a.createElement(O.a,{onChange:this.handleStatusChange,style:{width:60,marginRight:15},defaultValue:"".concat(r.tagStatus)},w.a.createElement(x,{value:""},"全部"),w.a.createElement(x,{value:"0"},"未启用"),w.a.createElement(x,{value:"1"},"启用"))),w.a.createElement(m.a,{span:8},w.a.createElement("span",null,"名字："),w.a.createElement(h.a,{value:i.name,onChange:function(e){return o(Object(C.e)({name:e.target.value}))},style:{width:150,marginRight:15},placeholder:"请输入关键词搜索",onPressEnter:function(){return e._search()}}),w.a.createElement(g.a,{type:"primary",onClick:function(){e.doSearch("init")},style:{marginRight:15}},"搜索"),w.a.createElement(g.a,{type:"primary",onClick:function(){P.hashHistory.push("/tagv2-send")}},"新增"))),w.a.createElement("div",{className:"mt30"},w.a.createElement(c.a,{spinning:this.state.loading,size:"large"},w.a.createElement(l.a,{dataSource:a.map(function(e,t){return _({},e,{key:t})}),columns:V,bordered:!0,pagination:{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))))}}])&&D(a.prototype,n),r&&D(a,r),t}();t.default=Object(j.connect)(function(e){return{tagsv2:e.tagsv2,list:e.tagsv2.list,search:e.tagsv2.search,filter:e.tagsv2.filter,pageData:e.tagsv2.pageData,selectedData:e.tagsv2.selectedData}})(r.a.create()(W))}}]);