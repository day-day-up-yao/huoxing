(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{1594:function(e,t,n){"use strict";n.r(t);n(675);var a=n(676),r=n.n(a),o=(n(1385),n(1386)),i=n.n(o),c=(n(1381),n(1382)),s=n.n(c),u=(n(1383),n(1384)),l=n.n(u),p=(n(247),n(183)),f=n.n(p),h=(n(184),n(1378)),d=n.n(h),m=(n(361),n(20)),y=n.n(m),g=(n(1379),n(1380)),b=n.n(g),v=(n(1376),n(1377)),w=n.n(v),S=n(0),O=n.n(S),E=n(246),k=(n(1833),n(48)),T=n(2);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){return{type:T.xb,data:e}},A=function(e,t,n){return function(a){var r="init"===e?"/news/tags/list":"/post/search";Object(k.i)("get",r,t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){j(e,t,n[t])})}return e}({},t):{},function(e){if(1===e.code){var t=e.obj;a(N({list:t.inforList})),a(C({totalCount:t.recordCount,pageSize:t.pageSize,currentPage:t.currentPage})),n&&n(t)}else y.a.error(e.msg)})}},N=function(e){return{type:T.N.ADD_DATA,data:e}},I=function(e){return{type:T.N.SET_SEARCH_QUERY,data:e}},_=function(e){return{type:T.N.SET_FILTER_DATA,data:e}},C=function(e){return{type:T.N.SET_PAGE_DATA,data:e}};function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){L(e,t,n[t])})}return e}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=w.a.confirm,J=b.a.Item,U=[],W=[{label:"前三交易对占比",value:1},{label:"24H 成交额占比",value:2}],G=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=F(t).call(this),e=!a||"object"!==D(a)&&"function"!=typeof a?H(n):a,L(H(e),"typeHandleChange",function(t){(0,e.props.dispatch)(_({type:t})),e.setState({loading:!0,type:t}),e.doSearch("init",{currentPage:1,type:t})}),e.state={loading:!0,newsStatus:null,editNewsId:"",topIsShow:!1,visible:!1,passwordModal:!1,confirmDirty:!1},e}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,S["Component"]),n=t,(a=[{key:"channelName",value:function(e){var t="";return W.map(function(n,a){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.search,a=t.filter;this.doSearch("init",M({},a,{search:n.search})),U=[{title:"名称",key:"tag",render:function(t,n){return n&&O.a.createElement("div",{className:"hotAuthorAndTags-info clearfix"},O.a.createElement("div",null,O.a.createElement("h4",{title:n.tag,dangerouslySetInnerHTML:e.createMarkup(Object(k.q)(n.tag,30))}),0===n.showNum?"":O.a.createElement("p",{className:"top-tag"},"置顶: ",n.showNum)))}},{title:"热度",key:"hotCount",dataIndex:"hotCount"},{title:"更新时间",key:"updateTime",render:function(e){return Object(k.w)(e.updateTime)}},{title:"操作",key:"action",render:function(t){return O.a.createElement("div",{className:"btns"},parseInt(t.showNum)?O.a.createElement("p",null,O.a.createElement("a",{className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#ff4f3e"},onClick:function(){return e.cancelTop(t.id)}},"取消置顶")):"",O.a.createElement("p",null,parseInt(t.showNum)?O.a.createElement("a",{className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#ff4f3e"},onClick:function(){return e.showToTopModal(t.id,t)}},"修改置顶位"):O.a.createElement("a",{className:"mr10 top-btn opt-btn",href:"javascript:void(0)",onClick:function(){return e.showToTopModal(t.id,t)}},"置顶")))}}]}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(C({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"updateAccount",value:function(e){this.props.dispatch(P(e)),this.setState({visible:!0})}},{key:"doSearch",value:function(e,t){var n=this,a=this.props,r=a.dispatch,o=a.pageData,i=a.search;this.setState({loading:!0});var c={search:i.search,pageSize:20,currentPage:o.currPage};c=M({},c,t),r(A(e,c,function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(I({type:"init"})),e(C({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,n=t.dispatch,a=t.search,r=t.filter;n(C({currPage:e})),this.doSearch(a.type,M({currentPage:e},r))}},{key:"cancelTop",value:function(e){var t=this.props.dispatch,n=this;q({title:"提示",content:"确认要取消置顶吗 ?",onOk:function(){var a={id:e,showNum:0};Object(k.i)("POST","/news/tags/setorder",M({},a),function(e){1===e.code?(y.a.success("取消置顶成功"),n.doSearch("init"),t(I({type:"init"}))):y.a.error(e.msg)})}})}},{key:"showToTopModal",value:function(e,t){var n=this.props.dispatch;this.setState({activityId:e,topIsShow:!0}),n(P(t))}},{key:"setNewsTop",value:function(){var e=this,t=this.props.form,n=this;t.validateFields(function(a,r){a||(e.setState({topIsShow:!1,loading:!0}),Object(k.i)("post","/news/tags/setorder",{id:e.state.activityId,showNum:r.showNum},function(e){1===e.code?(y.a.success("操作成功！"),n.doSearch("init")):y.a.error(e.msg)}),t.resetFields())})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.form,o=t.selectedData,c=t.pageData,u=t.dispatch,p=t.search,h=a.getFieldDecorator;return O.a.createElement("div",{className:"hotAuthorAndTags-index"},O.a.createElement(s.a,null,O.a.createElement(l.a,null,O.a.createElement(d.a,{value:p.search,style:{width:150,margin:"0 15px"},onChange:function(e){return u(I({search:e.target.value}))},placeholder:"手机号/昵称/姓名",onPressEnter:function(){e._search()}}),O.a.createElement(f.a,{type:"primary",onClick:function(){e._search()}},"搜索"))),O.a.createElement("div",{className:"mt10"},O.a.createElement(r.a,{spinning:this.state.loading,size:"large"},O.a.createElement(i.a,{dataSource:n.map(function(e,t){return M({},e,{key:t})}),columns:U,bordered:!0,pagination:{current:c.currPage,total:c.totalCount,pageSize:c.pageSize,onChange:function(t){return e.changePage(t)}}}))),O.a.createElement(w.a,{title:"置顶权重",visible:this.state.topIsShow,onOk:function(){return e.setNewsTop()},onCancel:function(){e.setState({topIsShow:!1}),a.resetFields()}},O.a.createElement(b.a,null,O.a.createElement(J,x({},{labelCol:{span:4},wrapperCol:{span:18,offset:1}},{label:"置顶权重"}),h("showNum",{rules:[{required:!0,message:"请输入置顶权重!"},{pattern:/^[1-9]\d*$/,message:"设置权重必须为数字且大于0!"}],initialValue:0===o.showNum?1:o.showNum})(O.a.createElement(d.a,{min:1,placeholder:"请输入置顶位"}))))))}}])&&z(n.prototype,a),o&&z(n,o),t}();t.default=Object(E.connect)(function(e){return{hotAuthorAndTagsInfo:e.hotAuthorAndTagsInfo,list:e.hotAuthorAndTagsInfo.list,search:e.hotAuthorAndTagsInfo.search,filter:e.hotAuthorAndTagsInfo.filter,pageData:e.hotAuthorAndTagsInfo.pageData,selectedData:e.hotAuthorAndTagsInfo.selectedData}})(b.a.create()(G))},1833:function(e,t,n){var a=n(1834);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1834:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);