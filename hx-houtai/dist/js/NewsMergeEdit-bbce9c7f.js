(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{1477:function(e,t,n){"use strict";n.r(t);n(1379);var r=n(1380),o=n.n(r),a=(n(675),n(676)),i=n.n(a),c=(n(1385),n(1386)),u=n.n(c),l=(n(247),n(183)),s=n.n(l),f=(n(361),n(20)),m=n.n(f),d=(n(184),n(1378)),p=n.n(d),g=(n(1376),n(1377)),y=n.n(g),h=n(0),b=n.n(h),v=n(10),w=n(246),O=n(1699),S=n(51),k=n.n(S),E=n(48);n(1698);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){q(e,t,n[t])})}return e}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=y.a.confirm,T=[],N=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=P(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==j(o)&&"function"!=typeof o?C(r):o,q(C(n),"state",{loading:!0,contentList:[],codeValue:""}),q(C(n),"changeCode",function(e){n.setState({codeValue:e.target.value})}),q(C(n),"createMarkup",function(e){return{__html:e}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,h["Component"]),n=t,(r=[{key:"componentWillMount",value:function(){var e=this,t=this.props.location;t.query.id?this.doSearch({}):this.setState({loading:!1}),T=[{title:"文章标题",key:"title",render:function(t,n){return n&&b.a.createElement("div",{className:"columnAuthor-info clearfix"},b.a.createElement("div",null,b.a.createElement("a",{href:n.url,target:"_blank"},b.a.createElement("span",{title:n.title,dangerouslySetInnerHTML:e.createMarkup(Object(E.q)(n.title,50))}))))}},{title:"文章摘要",key:"synopsis",render:function(t){return t&&""!==t.synopsis.trim()?b.a.createElement("h4",{dangerouslySetInnerHTML:e.createMarkup(Object(E.q)(t.synopsis,100))}):b.a.createElement("span",null,"暂无")}},{title:"发布时间",dataIndex:"publishTime",key:"publishTime",render:function(e){return 10===e.toString().length?Object(E.w)(1e3*parseInt(e)):Object(E.w)(parseInt(e))}},{title:"操作",key:"option",render:function(e){return b.a.createElement("div",null,b.a.createElement("a",{href:e.url,target:"_blank",style:{background:"#3dadf2"},className:"mr10 opt-btn"},"查看"),b.a.createElement(v.Link,{to:{pathname:"/post-send",query:{url:e.url,webName:t.query.type,title:e.title,publishTime:e.publishTime,coverPic:e.coverPic,synopsis:e.synopsis,author:e.author}},style:{background:"#3dadf2"},className:"mr10 opt-btn",href:"javascript:void(0)"},"编辑"))}}]}},{key:"changeImg",value:function(e){var t=Math.random().toString(36).substr(2);e.target.setAttribute("src","".concat(window.location.protocol,"//").concat(window.location.host,"/mgr/merge/verify/img?count=").concat(t))}},{key:"changeSouGouImg",value:function(e){var t=Math.random().toString(36).substr(2);e.target.setAttribute("src","".concat(window.location.protocol,"//").concat(window.location.host,"/mgr/merge/sougou/verifyimg?count=").concat(t))}},{key:"doSearch",value:function(e){var t=this,n=this.props,r=n.dispatch,o=n.location,a=this,i={source:o.query.id,webName:-1!==o.query.type.indexOf("weixin")?"weixin":-1!==o.query.type.indexOf("toutiao")?"toutiao":o.query.type,currentPage:1,snuid:k.a.get("snuid")||o.query.snuid||""};i=M({},i,e),r(Object(O.a)(i,function(e){if(-2===e.code){var n=Math.random().toString(36).substr(2);A({title:"提示",content:b.a.createElement("div",{className:""},b.a.createElement("span",null,"请输入验证码："),b.a.createElement(p.a,{onChange:t.changeCode,style:{width:"30%",verticalAlign:"middle"}}),b.a.createElement("img",{onClick:function(e){return t.changeImg(e)},title:"点击切换图片",style:{cursor:"pointer",width:"36%",verticalAlign:"middle",marginLeft:15},src:"/mgr/merge/verify/img?count=".concat(n),alt:""})),onOk:function(){if(""===a.state.codeValue.trim())return m.a.error("验证码不能为空！"),a.doSearch(e),!1;Object(E.i)("POST","/merge/verify/code",{code:a.state.codeValue},function(t){a.doSearch(e)})},onCancel:function(){v.hashHistory.push({pathname:"/merge-list"})}})}else if(-3===e.code){var r=Math.random().toString(36).substr(2);A({title:"提示",content:b.a.createElement("div",{className:""},b.a.createElement("span",null,"请输入验证码："),b.a.createElement(p.a,{onChange:t.changeCode,style:{width:"30%",verticalAlign:"middle"}}),b.a.createElement("img",{onClick:function(e){return t.changeSouGouImg(e)},title:"点击切换图片",style:{cursor:"pointer",width:"36%",verticalAlign:"middle",marginLeft:15},src:"/mgr/merge/sougou/verifyimg?count=".concat(r),alt:""})),onOk:function(){if(""===a.state.codeValue.trim())return m.a.error("验证码不能为空！"),a.doSearch(e),!1;Object(E.i)("POST","/merge/sougou/verifycode",{code:a.state.codeValue},function(t){1===t.code?(m.a.success("验证成功！"),k.a.set("snuid",t.obj),a.doSearch(e)):(m.a.error(t.msg),a.doSearch(e))})},onCancel:function(){v.hashHistory.push({pathname:"/merge-list"})}})}else 1===e.code?t.setState({loading:!1}):m.a.error(e.msg)}))}},{key:"render",value:function(){var e=this.props.list;return b.a.createElement("div",{className:"newsMerge-index"},b.a.createElement(i.a,{spinning:this.state.loading,size:"large"},b.a.createElement(s.a,{type:"primary",className:"cancel",style:{marginBottom:15},onClick:function(){v.hashHistory.goBack()}},"返回"),b.a.createElement(u.a,{pagination:!1,bordered:!0,dataSource:e.map(function(e,t){return M({},e,{key:t})}),columns:T})))}}])&&I(n.prototype,r),o&&I(n,o),t}();t.default=Object(w.connect)(function(e){return{newsMergeInfo:e.newsMergeInfo,list:e.newsMergeInfo.contentList,search:e.newsMergeInfo.search,filter:e.newsMergeInfo.filter,pageData:e.newsMergeInfo.pageData,numArr:e.newsMergeInfo.numArr}})(o.a.create()(N))}}]);