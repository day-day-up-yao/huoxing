(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{1580:function(e,t,a){"use strict";a.r(t);a(1390);var n=a(1391),i=a.n(n),r=(a(675),a(676)),s=a.n(r),o=(a(1385),a(1386)),l=a.n(o),c=(a(1381),a(1382)),u=a.n(c),d=(a(1383),a(1384)),p=a.n(d),h=(a(247),a(183)),m=a.n(h),f=(a(361),a(20)),y=a.n(f),g=(a(184),a(1378)),v=a.n(g),b=(a(677),a(362)),E=a.n(b),S=(a(678),a(363)),w=a.n(S),k=(a(1376),a(1377)),N=a.n(k),C=a(0),A=a.n(C),O=a(246),I=(a(1627),a(48)),P=a(2),j=function(e){return{type:P.kb.ADD_DATA,data:e}},_=function(e){return{type:P.kb.SET_SEARCH_QUERY,data:e}},D=function(e){return{type:P.kb.SET_FILTER_DATA,data:e}},x=function(e){return{type:P.kb.SET_PAGE_DATA,data:e}},R=a(1695);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){L(e,t,a[t])})}return e}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var W=N.a.confirm,U=w.a.Group,G=E.a.Option,H=v.a.TextArea,J=[],K=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=B(t).call(this),e=!n||"object"!==V(n)&&"function"!=typeof n?F(a):n,L(F(e),"changeIdentityAuth",function(t){e.setState({identityAuth:t.target.value})}),L(F(e),"changeIdentityDesc",function(t){e.setState({identityDesc:t.target.value})}),L(F(e),"identityAuthChange",function(t){(0,e.props.dispatch)(D({identityAuth:t})),e.setState({loading:!0}),e.doSearch("init",{currentPage:1,identityAuth:t})}),L(F(e),"typeChange",function(t){(0,e.props.dispatch)(D({type:t})),e.setState({loading:!0}),e.doSearch("init",{currentPage:1,type:t})}),L(F(e),"symbolModalCancelVisible",function(){e.setState({value:0,symbolVisible:!1,identityDesc:""})}),L(F(e),"symbolValueChange",function(t){e.setState({value:t.target.value})}),L(F(e),"symbolChange",function(t){var a=F(e),n={passportId:e.state.passportId,ifAddV:e.state.value,identityAuth:e.state.identityAuth,identityDesc:e.state.identityDesc};Object(I.i)("POST","/account/updaterealauth",T({},n),function(e){1===e.code?(a.setState({value:0,symbolVisible:!1}),y.a.success("修改成功"),a.doSearch("init")):y.a.error(e.msg)})}),L(F(e),"handleImgModalCancel",function(){return e.setState({previewVisible:!1})}),L(F(e),"handlePreview",function(t){e.setState({previewImage:t.target.getAttribute("src"),previewVisible:!0})}),L(F(e),"checkAuthor",function(){if(!/^[1][3, 4, 5, 6, 7, 8, 9][0-9]{9}$/.test(e.state.phone))return y.a.error("手机号输入错误！"),!1;Object(I.i)("post","/account/getaccountinfo",{phoneNumOrNickName:e.state.phone},function(t){1===t.code?(y.a.success("查询成功！"),e.setState({authorInfo:t.obj})):-1===t.code&&y.a.error("未查询到此账号！")})}),L(F(e),"setPhone",function(t){e.setState({phone:t.target.value,authorInfo:{}})}),L(F(e),"setFuns",function(t){e.setState({funs:t})}),L(F(e),"handleOk",function(t){var a=e.state,n=a.phone,i=a.funs;if(""===n.trim()||11!==n.length)return y.a.error("输入内容有误，请检查后重新提交！"),!1;Object(I.i)("post","/account/addfollow",{phoneNum:n,followCount:i},function(t){1===t.code?(y.a.success("添加成功！"),e.setState({visible:!1}),e.doSearch("init")):-1===t.code?y.a.error("参数错误！"):-3===t.code?y.a.error("未查询到此账号！"):-5===t.code&&y.a.error("手机号码格式不对！")})}),L(F(e),"handleCancel",function(t){e.setState({disabled:!1,visible:!1,phone:""})}),L(F(e),"onBtnChangeUpdateClick",function(t){console.log("obj",t);var a=e.props.dispatch,n={passportId:t.passportId};Object(I.i)("get","/account/getRealAuthByPassportId",n,function(e){if(1===e.code){var n=e.obj;n.realFollow=t.realFollow,n.jiaFollow=t.jiaFollow,a(Object(R.b)(n)),window.sessionStorage.setItem("hx_identify_info",JSON.stringify(e.obj)),window.location.href="".concat(window.location.origin,"/#/audit-update?id=").concat(t.passportId)}else y.a.error(e.msg)})}),L(F(e),"onBtnUpdateStateClick",function(t){var a=F(e),n={passportId:t.passportid,state:-1};W({title:"提示",content:"确认要取消认证吗 ?",onOk:function(){W({title:"提示",content:A.a.createElement("div",{className:"modal-input"},A.a.createElement("span",{style:{marginRight:10}},"请填写认证不通过原因："),A.a.createElement(H,{rows:3,autoFocus:!0,onChange:function(e){a.getReason(e)}})),onOk:function(){""!==a.state.noPassReason.trim()?(a.setState({loading:!0}),n.noPassReason=a.state.noPassReason,n.ifAddV=0,Object(I.i)("get","/account/updateauthstate",n,function(e){1===e.code?(y.a.success("操作成功！"),a.doSearch("init")):(y.a.error(e.msg),a.setState({loading:!0}))})):y.a.error("请填写驳回原因!")}})}})}),L(F(e),"getReason",function(t){e.setState({noPassReason:t.target.value})}),L(F(e),"onBtnAddClick",function(){window.location.href="".concat(window.location.origin,"/#/audit-add")}),e.state={loading:!0,auditStatus:null,visible:!1,previewVisible:!1,previewImage:"",phone:"",funs:0,disabled:!1,authorInfo:{},value:0,passportId:"",symbolVisible:!1,identityAuth:0,identityDesc:"",noPassReason:""},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,C["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.search,n=t.filter;this.doSearch(a.type?a.type:"init",{state:n.status,type:n.type,identityAuth:n.identityAuth}),J=[{title:"MarsBit专栏昵称",width:100,key:"nickName",render:function(t,a){return A.a.createElement("div",{className:"audit-info clearfix"},A.a.createElement("div",null,A.a.createElement("h4",{title:a.nickName,dangerouslySetInnerHTML:e.createMarkup(a.nickName?Object(I.q)(a.nickName,30):"暂无")})))}},{title:"MarsBit账号 ",dataIndex:"phoneNum",key:"phoneNum",width:114,render:function(e,t){return A.a.createElement("h3",{title:t.phoneNum},t.phoneNum?Object(I.q)(t.phoneNum,30):"暂无")}},{title:"认证类型",width:96,dataIndex:"vGrade",key:"vGrade",render:function(e){return 0===e?A.a.createElement("span",{className:"state-btns ordinary-v"},"普通"):1===e?A.a.createElement("span",{className:"state-btns personal-v"},"个人认证"):3===e?A.a.createElement("span",{className:"state-btns company-v"},"企业认证"):2===e?A.a.createElement("span",{className:"state-btns media-v"},"媒体认证"):A.a.createElement("span",{className:"state-btns ordinary-v"},"普通")}},{title:"分类",width:96,dataIndex:"identityAuth",key:"identityAuth",render:function(e){return 0===e?A.a.createElement("span",{className:"state-btns ordinary-v"},"其他"):1===e?A.a.createElement("span",{className:"state-btns personal-v"},"媒体"):2===e?A.a.createElement("span",{className:"state-btns company-v"},"KOL"):3===e?A.a.createElement("span",{className:"state-btns media-v"},"投研"):4===e?A.a.createElement("span",{className:"state-btns pass-identify"},"项目"):5===e?A.a.createElement("span",{className:"state-btns cant-identify"},"行情"):6===e?A.a.createElement("span",{className:"state-btns newColor1"},"社群"):A.a.createElement("span",{className:"state-btns ordinary-v"},"其他")}},{title:"操作",key:"action",width:120,render:function(t){return A.a.createElement("div",{style:{display:"flex"}},A.a.createElement("div",null,A.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.onBtnChangeUpdateClick(t)},style:{background:"#108ee9",marginRight:50}},"编辑")),A.a.createElement("div",null))}}]}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(_({type:"init",nickName:"",title:""})),e(x({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"auditStatus",value:function(e){var t="";return I.g.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,i=n.dispatch,r=n.pageData,s=n.search,o=n.filter,l={phoneOrName:s.search,state:o.status,type:o.type,identityAuth:o.identityAuth,pageSize:20,currentPage:r.currPage};i(function(e,t,a){return function(n){var i="init"===e?"/account/noVerificationlist":"/post/search";Object(I.i)("post",i,t||{},function(e){if(1===e.code){var t=e.obj;n(j({list:t.inforList})),n(x({totalCount:t.recordCount,pageSize:t.pageSize||20,currPage:t.currentPage})),a&&a(t)}else y.a.error(e.msg)})}}("init",l=T({},l,t),function(){a.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(x({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search,i=t.filter;a(x({currPage:e})),this.doSearch(n.type,{currentPage:e,state:i.status,type:i.type,identityAuth:i.identityAuth})}},{key:"delAudit",value:function(e){var t=this.props.dispatch,a=this;W({title:"提示",content:"确认要删除吗 ?",onOk:function(){var n={id:e.id,status:0};Object(I.i)("POST","/ad/status",T({},n),function(e){1===e.code?(y.a.success("删除成功"),a.doSearch("init"),t(_({type:"init"}))):y.a.error(e.msg)})}})}},{key:"funsChange",value:function(e){this.setState({phone:e.phoneNum,disabled:!0,visible:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,r=t.search,o=t.dispatch,c=t.filter;return A.a.createElement("div",{className:"audit-index"},A.a.createElement(u.a,null,A.a.createElement(p.a,{span:20},A.a.createElement("span",null,"认证类型："),A.a.createElement(E.a,{defaultValue:"".concat(c.type),style:{width:120},onChange:this.typeChange},A.a.createElement(G,{value:""},"全部"),A.a.createElement(G,{value:"1"},"个人认证"),A.a.createElement(G,{value:"2"},"媒体认证"),A.a.createElement(G,{value:"3"},"企业/机构认证")),A.a.createElement("span",{style:{marginLeft:15}},"分类："),A.a.createElement(E.a,{defaultValue:"".concat(c.identityAuth),style:{width:120,marginRight:15},onChange:this.identityAuthChange},A.a.createElement(G,{value:""},"全部"),A.a.createElement(G,{value:"1"},"媒体"),A.a.createElement(G,{value:"2"},"KOL"),A.a.createElement(G,{value:"3"},"投研"),A.a.createElement(G,{value:"4"},"项目"),A.a.createElement(G,{value:"5"},"行情"),A.a.createElement(G,{value:"6"},"社群"),A.a.createElement(G,{value:"0"},"其他")),A.a.createElement(v.a,{value:r.search,style:{width:150},onChange:function(e){return o(_({search:e.target.value}))},placeholder:"手机号/昵称/姓名",onPressEnter:function(){e._search()}}),A.a.createElement(m.a,{style:{margin:"0 15px"},type:"primary",onClick:function(){e._search()}},"搜索"),A.a.createElement(m.a,{type:"primary",onClick:this.onBtnAddClick},"添加作者"))),A.a.createElement("div",{className:"mt30"},A.a.createElement(s.a,{spinning:this.state.loading,size:"large"},A.a.createElement(l.a,{dataSource:a.map(function(e,t){return T({},e,{key:t})}),columns:J,bordered:!0,pagination:{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))),A.a.createElement(N.a,{className:"pre-Modal",visible:this.state.previewVisible,footer:null,onCancel:this.handleImgModalCancel},A.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),A.a.createElement(N.a,{title:"添加认证作者",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},A.a.createElement("div",{className:"auditModalInfo",style:{padding:"0 10px 10px"}},A.a.createElement(u.a,null,A.a.createElement(p.a,{span:6,className:"audit-title",style:{lineHeight:"28px",fontWeight:"bold"}},"手机号: "),A.a.createElement(p.a,{span:12},A.a.createElement(v.a,{placeholder:"输入手机号进行搜索",onPressEnter:this.checkAuthor,type:"tel",disabled:this.state.disabled,value:this.state.phone,style:{width:"100%"},className:"",onChange:function(t){e.setPhone(t)}})),A.a.createElement(p.a,{span:5,offset:1},A.a.createElement(m.a,{type:"primary",onClick:this.checkAuthor},"查询"))),this.state.authorInfo&&void 0!==this.state.authorInfo.nickName?A.a.createElement(u.a,null,A.a.createElement(p.a,{span:6,className:"audit-title",style:{fontWeight:"bold"}},"查询结果: "),A.a.createElement(p.a,{span:16,className:""},this.state.authorInfo.nickName)):"",A.a.createElement(u.a,null,A.a.createElement(p.a,{span:6,className:"audit-title",style:{lineHeight:"28px",fontWeight:"bold"}},"添加/修改粉丝数: "),A.a.createElement(p.a,{span:16,className:"audit-title",style:{fontWeight:"bold"}},A.a.createElement(i.a,{defaultValue:0,min:0,className:"",onChange:this.setFuns}))))),A.a.createElement(N.a,{className:"",title:"修改认证标识",visible:this.state.symbolVisible,onOk:this.symbolChange,onCancel:this.symbolModalCancelVisible},A.a.createElement(u.a,{className:"",style:{margin:"0 0 20px"}},A.a.createElement("span",{className:"name",style:{marginRight:10}},"认证类型："),A.a.createElement(U,{onChange:this.symbolValueChange,value:this.state.value},A.a.createElement(w.a,{value:1},"个人认证"),A.a.createElement(w.a,{value:2}," 媒体认证"),A.a.createElement(w.a,{value:3},"企业认证"))),A.a.createElement(u.a,{className:"",style:{margin:"0 0 20px"}},A.a.createElement("span",{className:"name",style:{marginRight:10}},"身份属性："),A.a.createElement(U,{onChange:this.changeIdentityAuth,value:this.state.identityAuth},A.a.createElement(w.a,{value:1},"媒体"),A.a.createElement(w.a,{value:2},"KOL"),A.a.createElement(w.a,{value:3},"投研"),A.a.createElement(w.a,{value:4},"项目"),A.a.createElement(w.a,{value:6},"社群"),A.a.createElement(w.a,{value:5},"行情"),A.a.createElement(w.a,{value:0},"其他"))),A.a.createElement(u.a,{className:"",style:{margin:"0 0 20px"}},A.a.createElement("span",{className:"name",style:{marginRight:10}},"认证信息："),A.a.createElement(v.a,{style:{width:400},placeholder:"认证信息",onChange:this.changeIdentityDesc,value:this.state.identityDesc}))))}}])&&M(a.prototype,n),r&&M(a,r),t}();t.default=Object(O.connect)(function(e){return{auditInfo:e.officialAuditInfo,selectedData:e.officialAuditInfo.selectedData,list:e.officialAuditInfo.list,search:e.officialAuditInfo.search,filter:e.officialAuditInfo.filter,pageData:e.officialAuditInfo.pageData}})(K)}}]);