(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1585:function(e,t,n){"use strict";n.r(t);n(1379);var a=n(1380),r=n.n(a),i=(n(675),n(676)),o=n.n(i),c=(n(1385),n(1386)),l=n.n(c),u=(n(247),n(183)),s=n.n(u),f=(n(184),n(1378)),p=n.n(f),d=(n(361),n(20)),y=n.n(d),m=(n(1376),n(1377)),h=n.n(m),g=n(0),b=n.n(g),v=n(246),k=(n(1691),n(10)),E=n(48),O=n(2),w=function(e,t){return function(n){Object(E.i)("get","/calendar/list",e||{},function(e){if(1===e.code){var a=e.obj;n({type:O.p.CALENDAR_LISTS,data:a}),n(S({totalCount:a.recordCount,pageSize:a.pageSize,currPage:a.currentPage})),t&&t(a)}else y.a.error(e.msg)})}},S=function(e){return{type:O.p.CHANCE_PAGE_DATA,data:e}};function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){P(e,t,n[t])})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function L(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=h.a.confirm,N=[],I=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=L(this,T(t).call(this))).state={visible:!1,loading:!0,searchVal:""},e}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,g["Component"]),n=t,(a=[{key:"componentWillMount",value:function(){var e=this;this.getCalendarListFn(1),N=[{title:"日历标题",key:"title",width:250,render:function(e,t){return b.a.createElement("div",{className:"flash-info clearfix"},b.a.createElement("div",null,b.a.createElement("h3",null,t.title)))}},{title:"日历内容",key:"content",render:function(t,n){return b.a.createElement("div",{className:"flash-info clearfix"},b.a.createElement("div",null,b.a.createElement("h3",{title:Object(E.y)(n.content),dangerouslySetInnerHTML:e.createMarkup(Object(E.q)(Object(E.y)(n.content),300))})))}},{title:"关联标签",dataIndex:"tagsV2",width:200,key:"tagsV2",render:function(e){return b.a.createElement("p",null,""===e?[]:JSON.parse(e).map(function(e){return b.a.createElement("span",{style:{marginLeft:"10px"},key:e.id},e.name)}))}},{title:"重要程度",dataIndex:"star",width:70,key:"star",render:function(e){return b.a.createElement("p",null,e)}},{title:"发表时间",width:80,key:"publishTime",render:function(t){return b.a.createElement("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:e.createMarkup(Object(E.w)(1e3*t.publishTime,"-",!0))})}},{title:"操作",key:"action",width:70,render:function(t){return b.a.createElement("div",{className:"btns"},b.a.createElement("p",null,b.a.createElement(k.Link,{className:"mr10 opt-btn",onClick:function(){e.setEditorCookies(t)},to:{pathname:"/cc-calendarAdd",query:{id:t.id}},style:{background:"#e35ba3"}},"编辑")),b.a.createElement("p",null,b.a.createElement("a",{onClick:function(){return e.delCalendar(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"getCalendarListFn",value:function(e){var t=this,n=this.props.dispatch,a={pageSize:20,currentPage:e,search:this.state.searchVal};n(w(j({},a),function(){t.setState({loading:!1})}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"changePage",value:function(e){var t=this,n=this.props.dispatch;this.setState({loading:!0}),n(w({currentPage:e},function(){t.setState({loading:!1})}))}},{key:"searchValue",value:function(e){var t=e.target.value;this.setState({searchVal:t})}},{key:"delCalendar",value:function(e){var t=this.props,n=t.dispatch,a=t.pageData,r=this;A({title:"提示",content:"确认要删除吗 ?",onOk:function(){var t={id:e.id,status:-1};Object(E.i)("POST","/calendar/delete",j({},t),function(e){1===e.code?(y.a.success("删除成功"),n(w({currentPage:a.currPage},function(){r.setState({loading:!1})}))):y.a.error(e.msg)})}})}},{key:"setEditorCookies",value:function(e){for(var t in e)window.sessionStorage.setItem("hx_calendar_"+t,e[t])}},{key:"render",value:function(){var e=this,t=this.props,n=t.calendarList,a=t.pageData;return b.a.createElement("div",{className:"flash-index"},b.a.createElement("span",{style:{marginLeft:15}},"日历标题/内容："),b.a.createElement(p.a,{onPressEnter:function(){e.getCalendarListFn(1)},style:{width:150,marginRight:15},onChange:function(t){e.searchValue(t)},placeholder:"请输入要搜索的内容"}),b.a.createElement(s.a,{type:"primary",style:{marginRight:15},onClick:function(){e.getCalendarListFn(1)}},"搜索"),b.a.createElement(s.a,{type:"primary",onClick:function(){k.hashHistory.push("/cc-calendarAdd")}},"新增日历"),b.a.createElement("div",{style:{marginTop:15}},b.a.createElement(o.a,{spinning:this.state.loading,size:"large"},b.a.createElement(l.a,{dataSource:n.map(function(e,t){return j({},e,{key:t})}),columns:N,bordered:!0,pagination:{current:a.currPage,total:a.totalCount,pageSize:a.pageSize,onChange:function(t){return e.changePage(t)}}}))))}}])&&_(n.prototype,a),r&&_(n,r),t}();t.default=Object(v.connect)(function(e){return{calendarList:e.calendarInfo.calendarList,pageData:e.chanceInfo.pageData}})(r.a.create()(I))}}]);