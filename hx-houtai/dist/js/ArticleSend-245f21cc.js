(window.webpackJsonp=window.webpackJsonp||[]).push([[65,18],{1452:function(e,t,a){"use strict";a.r(t),function(e){a(1376);var n=a(1377),r=a.n(n),i=(a(1392),a(1393)),o=a.n(i),s=(a(1396),a(1397)),l=a.n(s),c=(a(675),a(676)),p=a.n(c),u=(a(1381),a(1382)),d=a.n(u),h=(a(1383),a(1384)),m=a.n(h),f=(a(247),a(183)),g=a.n(f),v=(a(1388),a(1389)),b=a.n(v),y=(a(1387),a(50)),w=a.n(y),x=(a(361),a(20)),E=a.n(x),S=(a(679),a(249)),k=a.n(S),N=(a(678),a(363)),C=a.n(N),T=(a(1394),a(1395)),O=a.n(T),U=(a(677),a(362)),R=a.n(U),M=(a(184),a(1378)),V=a.n(M),D=(a(1379),a(1380)),j=a.n(D),I=a(0),F=a.n(I),L=a(246),W=a(1667),P=a(1614),B=a(1398),_=(a(1606),a(11)),z=a.n(_),Y=a(1620),Z=a(248),H=a(1624),A=a(48),J=(a(1618),a(1762)),X=a(1859),Q=a(1617),q=a(51),G=a.n(q),K=a(1608);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ae(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){pe(e,t,a[t])})}return e}function re(e,t,a,n,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ie(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function o(e){re(i,n,r,o,s,"next",e)}function s(e){re(i,n,r,o,s,"throw",e)}o(void 0)})}}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ue,de,he=j.a.Item,me=V.a.TextArea,fe=R.a.Option,ge=O.a.CheckableTag,ve=C.a.Group,be=k.a.Group,ye=G.a.get("hx_passportId"),we=["文章包含广告信息","文章包含违规信息","发布内容与行业无关","请修改默认昵称","其它"],xe=[{id:4960,name:"MarsBit专栏精选",type:3,typeName:"聚合关键字"}],Ee=function(t){function a(t){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,i=se(a).call(this,t),n=!i||"object"!==$(i)&&"function"!=typeof i?le(r):i,pe(le(n),"getTopicListData",ie(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={type:4,pageSize:999,status:1,currentPage:1},e.next=3,Object(Z.j)(t);case 3:if(a=e.sent){e.next=8;break}return E.a.info("获取列表错误"),n.setState({loading:!1}),e.abrupt("return");case 8:if(1===a.code){e.next=12;break}return E.a.info(a.msg),n.setState({loading:!1}),e.abrupt("return");case 12:r=a.obj.inforList.map(function(e,t){return ne({},e,{key:e.id})}),n.setState({topicList:r});case 14:case"end":return e.stop()}},e)}))),pe(le(n),"removeHTMLTag",function(e){return e=(e=(e=e.replace(/<\/?[^>]*>/g,"")).replace(/[ | ]*\n/g,"\n")).replace(/ /gi,"")}),pe(le(n),"inquireRepetition",function(e,t){var a={timeStamp:Date.parse(new Date)/1e3,title:e.title,content:n.removeHTMLTag(e.content),media:"新闻"};Object(A.i)("post","/news/dedup/predict",a,function(e){""!==e.obj?(console.log(e),n.setState({isRepetition:!0,isRepetitionEdit:"该文章与已有文章高度相似",similarityUrl:e.obj})):""===e.obj&&t&&n.setState({isRepetition:!0,isRepetitionEdit:"文章内容无重复",similarityUrl:""})})}),pe(le(n),"isArticleAudit",function(e,t){var a={title:e.title,content:n.removeHTMLTag(e.content),media:"新闻"};Object(A.i)("post","/news/article/filter",a,function(e){e.code})}),pe(le(n),"isRepetitionOk",function(){n.setState({isRepetition:!1})}),pe(le(n),"isRepetitionCancel",function(){n.setState({isRepetition:!1})}),pe(le(n),"optionSearchChange",function(e){var t=le(n);(0,n.props.dispatch)(Object(H.b)("init",{pageSize:1e3,currentPage:1,keyword:e},function(e){var a=e.inforList;console.log(a),t.setState({list:a})}))}),pe(le(n),"channelIdChange",function(e){n.setState({channelId:e.target.value})}),pe(le(n),"handleCancel",function(){return n.setState({previewVisible:!1})}),pe(le(n),"handlePreview",function(e){if(e.hasOwnProperty("target")){var t=e.target.getAttribute("data-type");""!==n.state[t]?n.setState({previewImage:n.state[t],previewVisible:!0}):E.a.info("请先上传图片")}else n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),pe(le(n),"file",function(e){return new Promise(function(t){var a=new FileReader,n=new Image;a.readAsDataURL(e),a.onload=function(e){var t=e.target.result;n.src=t},t(n)})}),pe(le(n),"image",function(e){return new Promise(function(t){e.onload=function(){var a=e.width,n=e.height;t(a<=800&&n<=800)}})}),pe(le(n),"beforeUpload",function(){var e=ie(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.file(t).then(function(e){return n.image(e)}).then(function(e){return e});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pe(le(n),"handleChange",function(){var e=ie(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,"removed"!==a.status){e.next=5;break}n.setState({coverImgUrl:""}),e.next=11;break;case 5:return e.next=7,n.beforeUpload(a.originFileObj);case 7:if(e.sent){e.next=11;break}return E.a.warning("单张图片上传尺寸不能大于 800 * 800, 请重新选择图片或使用统一上传!"),e.abrupt("return",!1);case 11:n.setState({fileList:r}),a.response&&(1===a.response.code&&"done"===a.status&&n.setState({coverImgUrl:a.response.obj}),"error"===a.status&&(E.a.error("网络错误，上传失败！"),n.setState({coverImgUrl:"",fileList:[]})));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pe(le(n),"handlePcChange",function(){var e=ie(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,"removed"!==a.status){e.next=5;break}n.setState({pccoverImgUrl:""}),e.next=11;break;case 5:return e.next=7,n.beforeUpload(a.originFileObj);case 7:if(e.sent){e.next=11;break}return E.a.warning("单张图片上传尺寸不能大于 800 * 800, 请重新选择图片或使用统一上传!"),e.abrupt("return",!1);case 11:n.setState({pcfileList:r}),a.response&&(1===a.response.code&&"done"===a.status&&n.setState({pccoverImgUrl:a.response.obj}),"error"===a.status&&(E.a.error("网络错误，上传失败！"),n.setState({pccoverImgUrl:"",pcfileList:[]})));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pe(le(n),"handleMobileChange",function(){var e=ie(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,"removed"!==a.status){e.next=5;break}n.setState({mcoverImgUrl:""}),e.next=11;break;case 5:return e.next=7,n.beforeUpload(a.originFileObj);case 7:if(e.sent){e.next=11;break}return E.a.warning("单张图片上传尺寸不能大于 800 * 800, 请重新选择图片或使用统一上传!"),e.abrupt("return",!1);case 11:n.setState({mfileList:r}),a.response&&(1===a.response.code&&"done"===a.status&&n.setState({mcoverImgUrl:a.response.obj}),"error"===a.status&&(E.a.error("网络错误，上传失败！"),n.setState({mcoverImgUrl:"",mfileList:[]})));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pe(le(n),"handleMobileCommentChange",function(){var e=ie(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,"removed"!==a.status){e.next=5;break}n.setState({mccoverImgUrl:""}),e.next=11;break;case 5:return e.next=7,n.beforeUpload(a.originFileObj);case 7:if(e.sent){e.next=11;break}return E.a.warning("单张图片上传尺寸不能大于 800 * 800, 请重新选择图片或使用统一上传!"),e.abrupt("return",!1);case 11:n.setState({mcfileList:r}),a.response&&(1===a.response.code&&"done"===a.status&&n.setState({mccoverImgUrl:a.response.obj}),"error"===a.status&&(E.a.error("网络错误，上传失败！"),n.setState({mccoverImgUrl:"",mcfileList:[]})));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pe(le(n),"newsVisibleHide",function(){n.setState({newsVisible:!1})}),pe(le(n),"newsVisibleShow",function(){n.setState({newsVisible:!0})}),pe(le(n),"getReason",function(e){n.setState({reason:e.target.value})}),pe(le(n),"doRejectSelect",function(e){n.setState({reason:we[e],rejectSelectVal:e})}),pe(le(n),"doRejectDo",function(){var e=le(n);n.setState({loading:!0}),""!==n.state.reason.trim()?Object(A.i)("POST","/news/status",{id:e.props.newsInfo.id,status:2,reason:e.state.reason},function(t){console.log(t),1===t.code?(E.a.success("操作成功！"),e.dataGather2(e.state.reason,t.currentTime),e.closeWindow()):(e.setState({loading:!1}),E.a.error(t.msg))}):(n.setState({loading:!1}),E.a.error("原因不能为空!"))}),pe(le(n),"uploadAllImg",function(t){var a=t.file,r=t.fileList,i=le(n);n.setState({allfileList:r}),"removed"===a.status&&(n.setState({allfilelist:[],allcoverImgUrl:""}),n.state.cropImgRule.map(function(e,t){var a;i.setState((pe(a={},e.coverName,""),pe(a,e.coverList,[]),a))})),a.response&&(1===a.response.code&&"done"===a.status&&n.setState({allcoverImgUrl:a.response.obj,uploadAllImgModal:!0,focusImg:-1},function(){var t=document.querySelector("#croppedImg");t.src=a.thumbUrl,i.setState({cropper:new B.a(t,{aspectRatio:n.state.ratio,viewMode:1,crop:function(t){var a=this.cropper.getCroppedCanvas({maxWidth:640}).toDataURL("image/jpeg"),n=e(".crop-preview-item"),r=i.state.focusImg;-1===r?n.each(function(t,n){e(this).children("img").attr("src",a)}):n.eq(r).children("img").attr("src",a)}})})}),"error"===a.status&&(E.a.error("网络错误，上传失败！"),n.setState({allcoverImgUrl:"",allfileList:[]})))}),pe(le(n),"sureCropImg",function(){var t=0,a=le(n);n.setState({loading:!0,uploadAllImgModal:!1,confirmLoading:!0}),E.a.warning("上传中，请稍候！"),n.state.cropper.destroy(),e(".crop-preview-item").each(function(n,r){var i=this;setTimeout(function(){var n,r=e(i).data("type"),o=e(i).data("list");a.setState((pe(n={},r,""),pe(n,o,[]),n));var s=Object(A.r)(e(i).find("img").prop("src")),l=new FormData;l.append("uploadFile",s),e.ajax("".concat(A.a,"/pic/upload"),{headers:{"Sign-Param":Object(A.A)()},method:"POST",data:l,processData:!1,timeout:3e4,contentType:!1,success:function(e){var n;4===(t+=1)&&(a.setState({loading:!1,confirmLoading:!1}),E.a.success("上传完毕！")),a.setState((pe(n={},r,e.obj),pe(n,o,[{uid:0,name:"xxx.png",status:"done",url:e.obj}]),n),function(){})},error:function(e,t){a.setState({confirmLoading:!1,loading:!1}),"timeout"===t?E.a.error("网络不稳定, 请检查网络后重新上传！"):E.a.error("上传发生错误, 请尝试重新上传！"),e.abort()}})},500*n)})}),pe(le(n),"uploadAllImgCancel",function(){n.setState({uploadAllImgModal:!1}),n.state.cropper.destroy()}),pe(le(n),"handleSubmit",function(t){if(n.state.editor.mediaUploading())return E.a.warning("编辑器中图片或视频正在上传, 请稍候提交!"),!1;var a=Date.parse(n.props.form.getFieldValue("publishTime").format("YYYY/MM/DD HH:mm:ss")),r=Date.parse(new Date),i=n.state,o=i.vFileInfo,s=i.aFileInfo,l=i.vmUrl,c=i.vpcUrl,p=le(n),u=n.props.newsInfo,d=t.target.getAttribute("data-status");if(t.preventDefault(),"2"===d)return n.doReject(),!1;if(e(".simditor").find("img.uploading").length>0)return E.a.warning("编辑器中图片正在上传, 请稍候提交!"),!1;if(n.state.uploading)return E.a.warning("视频正在上传, 请稍候提交!"),n.setState({iconLoading:!1}),!1;if("3"===d&&a<=r)return n.setState({iconLoading:!1}),E.a.warning("预发布新闻时间应 大于 当前时间，请重新设置!"),!1;if("1"===d&&a>r)return n.setState({iconLoading:!1}),E.a.warning("直接发布新闻的时间应 小于等于 当前时间，请重新设置!"),!1;var h=n.state.vFileInfo?{video_pc:n.state.vpcUrl,video_m:n.state.vmUrl}:{};n.props.form.setFieldsValue(ne({original:!!n.state.original,advertised:!!n.state.advertised,tags:"",content:n.state.newsContent,pc_recommend:n.state.pccoverImgUrl,pc:n.state.coverImgUrl,wap_small:n.state.mcoverImgUrl,wap_big:n.state.mccoverImgUrl,subTitle:n.state.newsAssist},h)),n.props.form.validateFieldsAndScroll(function(e,t){var a,r=t.strategyCat,i=(a=r.join(",").replace(/,/g,"|"),new Function("return "+a)());if(!e&&"2"!==d){if(t.publishTime=Date.parse(t.publishTime.format("YYYY/MM/DD HH:mm:ss")),t.coverPic=JSON.stringify({mainImg:Object(A.G)(u.coverPic)&&(JSON.parse(u.coverPic).mainImg||JSON.parse(u.coverPic).wap_big)||"",pc_recommend:t.pc_recommend||"",pc:t.pc,wap_big:t.wap_big,wap_small:t.wap_small}),t.createdBy=t.source.key,t.source=t.source.label,t.original=t.original?1:0,t.advertised=t.advertised?1:0,t.strategyCat=i,delete t.pc,delete t.pc_recommend,delete t.wap_big,delete t.wap_small,delete t.watermark,delete t.alignLeft,delete t.wordBreak,t.id=n.props.location.query.id||"",t.status=d||1,t.cateId=n.state.cateId,0===t.tagsV2.length)t.tagsV2="";else{var h=[];t.tagsV2.forEach(function(e){h.push(ne({name:e.label},JSON.parse(e.key)))}),t.tagsV2=JSON.stringify(h)}if(o){var m=JSON.parse(t.coverPic);m=ne({},m,{video_pc:c,video_m:l}),t=ne({},t,{video:JSON.stringify([n.state.vFileInfo]),coverPic:JSON.stringify(m)})}else t=ne({},t,{video:""});delete(t=ne({},t,s?{audio:JSON.stringify([n.state.aFileInfo])}:{audio:""})).video_pc,delete t.video_m,!n.state.updateOrNot&&delete t.id,t.topicValue&&(t.topicId=t.topicValue.key,delete t.topicValue),n.setState({loading:!0}),Object(A.i)("post","".concat(n.state.updateOrNot?"/news/update":"/news/add"),t,function(e){if(1===e.code){if(1===parseInt(d)&&Object(A.i)("post","/caster/mars/content/sent",{newsId:t.id,title:t.title,synopsis:t.synopsis,coverPic:t.coverPic,createdBy:t.createdBy}),p.setState({loading:!1}),4===parseInt(d))E.a.success("已存储到列表!");else{E.a.success("操作成功！");var a=(t.strategyCat,"新闻");p.dataGather(p.props.newsInfo.id,a,p.state.oldTags,t.tagsV2,e.currentTime)}p.closeWindow()}else p.setState({loading:!1}),E.a.error(e.msg)})}})}),pe(le(n),"dataGather",function(e,t,a,r,i){var o={event_type:"COMMIT_ARTICLE",event_info:{article:{id:e,type:t},algo_tags:n.state.oldTags,edit_tags:r,algo_category:"其他",edit_category:"其他"},timestamp:i};Object(A.i)("post","/passport/account/recommend/gather",{data:JSON.stringify(o)})}),pe(le(n),"dataGather2",function(t,a){var r=e(n.state.editor.root).text(),i={event_type:"COMMIT_ANTI_REJECT",event_info:{title:e(".news-title-inp").val(),content:r,reason:t},timestamp:a};Object(A.i)("post","/passport/account/recommend/gather",{data:JSON.stringify(i)})}),pe(le(n),"sendPost",function(e){var t=n.state,a=t.wordBreak,r=t.alignLeft,i='<style type="text/css"> .details .details-cont p, p {word-break: '.concat(a?"break-all !important":"normal","; text-align: ").concat(r?"left !important":"unset","} p img {text-align: center !important;} </style>"),o={newsTitle:e.postTitle||"",newsContent:"<div class=".concat(r?"simditorSupport":"",">").concat(i).concat(e.postContent,"</div>")||!1};n.setState(ne({},n.state,o))}),pe(le(n),"handleCheck",function(e){n.setState({previewVisible:!0,previewImage:e.target.src})}),pe(le(n),"optionChange",function(e){n.setState({source:e.label,createdBy:e.key})}),pe(le(n),"FormItem",function(e){var t=n.state.updateOrNot,a=n.props.form.getFieldDecorator,r=F.a.createElement("div",null,F.a.createElement(w.a,{type:"plus"}),F.a.createElement("div",{className:"ant-upload-text"},e.label));return F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:20}},F.a.createElement("div",{className:"dropbox"},a(e.imgName,{initialValue:t&&e.newsInfo?e.fileList:"",rules:[{required:e.require,message:"请上传相应封面"}]})(F.a.createElement(b.a,{headers:{"Sign-Param":Object(A.A)()},action:"".concat(A.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:e.fileList,onPreview:n.handlePreview,onChange:e.changeEvent},e.fileList.length>=1?null:r)),e.noBtn?"":F.a.createElement(g.a,{"data-type":e.imgUrl,onClick:n.handlePreview,className:"img-preview",type:"primary"},"预览"),F.a.createElement("p",{className:"cover-img-tip"},F.a.createElement("span",{style:{color:"#249aef"}},e.size))))}),pe(le(n),"handleTagsChange",function(e,t){e.map(function(e){e.title=Object(A.R)(JSON.parse(e.key).type,e.label)}),n.setState({value:e})}),pe(le(n),"handleBlur",function(){n.setState({searchText:""})}),pe(le(n),"handleSelect",function(e,t){e.type=t.props.dataType}),pe(le(n),"handleDeselect",function(e,t){var a=n.state.selectedTags.filter(function(t){return JSON.parse(t).id!==JSON.parse(e.key).id});n.setState({selectedTags:a})}),pe(le(n),"judgeExist",function(e,t){0===(t&&0!==t.length?t.filter(function(t){return t.name===e}):[]).length&&0!==t.length?n.setState({noCurrResult:!0}):n.setState({noCurrResult:!1})}),pe(le(n),"getTagList",function(e){ue&&(clearTimeout(ue),ue=null),de=e;ue=setTimeout(function(){n.setState({searching:!0,data:[]}),Object(A.i)("post","/tagmgr/like",{name:e},function(t){if(n.setState({searching:!1}),n.judgeExist(de,t.obj),0===t.obj.length&&""!==e.trim()?n.setState({searchText:F.a.createElement("div",null,F.a.createElement("span",null,"未查询到相关标签, 是否创建?"),F.a.createElement(g.a,{type:"primary",loading:n.state.tagsIconLoading,style:{margin:"0 10px"},onClick:n.addNewTag,size:"small"},"是"),F.a.createElement(g.a,{type:"primary",size:"small",onClick:function(){n.setState({searchText:""})}},"否")),noCurrResult:!1}):n.setState({searchText:""}),de===e){var a=t.obj;n.setState({data:a})}})},500)}),pe(le(n),"addNewTag",function(e){e.target.disabled=!0;var t=n.props.form;n.setState({tagsIconLoading:!0}),Object(A.i)("post","/tagmgr/addSimpleTag",{name:de,creator:G.a.get("hx_passportId")},function(e){n.setState({searchText:"",tagsIconLoading:!1,noCurrResult:!1});var a=[{title:"".concat(e.obj.name,"-聚合"),key:JSON.stringify({id:e.obj.id,type:e.obj.type}),type:e.obj.type,label:e.obj.name}];t.setFieldsValue({tagsV2:[].concat(ae(t.getFieldValue("tagsV2")),a)})})}),pe(le(n),"transTags",function(e){var t=[];return e.forEach(function(e){t.push({title:"".concat(Object(A.R)(e.type,e.name)),label:e.name,key:JSON.stringify({id:e.id,type:e.type})})}),t}),pe(le(n),"handleTagsSelect",function(e,t){var a=JSON.parse(e),r=n.state.selectedTags,i=n.props.form.getFieldValue("tagsV2"),o=t?[].concat(ae(r),[e]):r.filter(function(t){return t!==e}),s=(a.name,te(a,["name"])),l=[{title:"".concat(a.name,"-行情"),key:JSON.stringify(s),type:a.type,label:a.name}],c=!1;i.forEach(function(e){e.key===l[0].key&&(c=!0)}),n.props.form.setFieldsValue({tagsV2:t?c?ae(i):[].concat(ae(i),l):i.filter(function(e){return e.key!==l[0].key})}),n.setState({selectedTags:o})}),pe(le(n),"handleSmartTags",function(){var t=e(n.state.editor.root).text(),a=e(".news-title-inp").val(),r=(n.props.newsInfo.strategyCat,"新闻"),i=n.props.form.getFieldValue("tagsV2");if(""===t.trim())return E.a.error("新闻内容不能为空!"),!1;n.setState({tagsLoading:!0}),console.log(a),Object(A.i)("post","/news/tags/predict",{content:t,title:a,media:r,passportId:ye},function(e){var t=[],a=[],r={};n.setState({oldTags:e.obj});e.obj.forEach(function(e){var n=JSON.stringify({id:e.id,type:e.type,name:e.name}),r={title:"".concat(e.name,"-行情"),key:JSON.stringify({id:e.id,type:e.type}),label:e.name};t.push(n),a.push(r)});var o=[].concat(ae(i),a).reduce(function(e,t){return r[t.key]?r[t.key]=!0:(r[t.key]=!0,e.push(t)),e},[]);n.props.form.setFieldsValue({tagsV2:o}),n.setState({selectedTags:t,smartTags:e.obj,smartTagsStatus:!0,tagsLoading:!1})})}),pe(le(n),"handleSmartTagsCancel",function(){n.setState({smartTags:[],smartTagsStatus:!1})}),pe(le(n),"onBtnFixTagClick",function(e){var t=n.props.form.getFieldValue("tagsV2"),a=!1,r=[];t.forEach(function(t){t.key===e.key&&(a=!0)}),r.push(e),!0===a?E.a.error("标签: “".concat(e.label,"” 已存在！")):n.props.form.setFieldsValue({tagsV2:[].concat(ae(t),r)})}),pe(le(n),"closeWindow",function(){n.setState({closeLoading:!0})}),n.state={closeLoading:!1,confirmLoading:!1,editor:"",reason:"",rejectSelectVal:"",doRejectShow:!1,updateOrNot:!1,tags:[],smartTags:[],smartTagsStatus:!1,selectedTags:[],tagsLoading:!1,source:"",createdBy:"",inputVisible:!1,inputValue:"",isLogin:!1,channelId:"1",newsVisible:!1,previewVisible:!1,previewImage:"",newsTitle:"",newsContent:"",fileList:[],pcfileList:[],mfileList:[],mcfileList:[],allfileList:[],coverImgUrl:"",pccoverImgUrl:"",mcoverImgUrl:"",mccoverImgUrl:"",allcoverImgUrl:"",loading:!0,original:0,advertised:0,aFileInfo:null,vFileInfo:null,uploadAllImgModal:!1,cropper:null,focusImg:-1,ratio:2,searching:!1,data:[],searchText:"",tagsIconLoading:!1,noCurrResult:!1,cropImgRule:[{coverName:"mccoverImgUrl",coverList:"mcfileList",width:"640px",height:"320px",ratio:2,intro:"M端推荐新闻的滚动:640 * 320"},{coverName:"pccoverImgUrl",coverList:"pcfileList",width:"266px",height:"167px",ratio:532/335,intro:"PC端推荐位新闻封面:532 * 335"},{coverName:"coverImgUrl",coverList:"fileList",width:"220px",height:"160px",ratio:1.375,intro:"PC 端新闻封面:220 * 160"},{coverName:"mcoverImgUrl",coverList:"mfileList",width:"164px",height:"109px",ratio:200/133,intro:"M端新闻封面:164 * 109"}],wordBreak:0,alignLeft:0,list:n.props.list?n.props.list:[],oldTags:[],isRepetition:!1,isRepetitionEdit:!1,similarityUrl:"",topicValue:{key:"",label:""},topicList:[],cateId:0,newsAssist:""},n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(a,I["Component"]),n=a,(i=[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location,r=this;this.getTopicListData(),G.a.set("watermark",0),a(Object(Z.f)()),a(Object(H.b)("init",{pageSize:1e3,currentPage:1})),a(Object(K.a)("post",{pageSize:20,status:1,currentPage:1},function(){r.setState({loading:!1})})),n.query.id?a(Object(Y.b)({id:n.query.id},function(t){e.inquireRepetition(t),e.isArticleAudit(t);var a=t.content.replace(/<style(.+)<\/style>/,"");a=a.replace(/<img[^>]*>/gi,function(e,t){e.replace(/height="(.*)"/gi,"");return e.replace(/width="(.*)"/gi,"")}),e.state.editor.clipboard.dangerouslyPasteHTML(a,"user"),e.state.editor.videoInit();var n=Object(A.G)(t.coverPic)?JSON.parse(t.coverPic):{pc_recommend:"",pc:"",wap_big:"",wap_small:""},r=n.pc_recommend&&""!==n.pc_recommend?[{uid:0,name:"xxx.png",status:"done",url:n.pc_recommend}]:[],i=n.pc&&""!==n.pc?[{uid:0,name:"xxx.png",status:"done",url:n.pc}]:[],o=n.wap_small&&""!==n.wap_small?[{uid:0,name:"xxx.png",status:"done",url:n.wap_small}]:[],s=n.wap_big&&""!==n.wap_big?[{uid:0,name:"xxx.png",status:"done",url:n.wap_big}]:[];e.setState({updateOrNot:!0,fileList:i,reason:t.nopassReason||"",pcfileList:r,mfileList:o,mcfileList:s,tags:t.tags?t.tags.split(","):[],newsContent:a,coverImgUrl:n.pc,pccoverImgUrl:n.pc_recommend||"",mcoverImgUrl:n.wap_small,mccoverImgUrl:n.wap_big,loading:!1,original:t.original||0,advertised:t.advertised||0,vFileInfo:t.video&&-1!==t.video.indexOf("[")?JSON.parse(t.video)[0]:null,aFileInfo:t.audio&&-1!==t.audio.indexOf("[")?JSON.parse(t.audio)[0]:null,vmUrl:t.coverPic&&JSON.parse(t.coverPic).video_m?JSON.parse(t.coverPic).video_m:"",vpcUrl:t.coverPic&&JSON.parse(t.coverPic).video_pc?JSON.parse(t.coverPic).video_pc:"",source:{key:t.createdBy,label:t.source},createdBy:t.createdBy,cateId:t.cateId});var l=t.audio&&-1!==t.audio.indexOf("[")?JSON.parse(t.audio)[0]:null;if(l){var c=e.uploadAudio,p=c.state.uploadData;c.setState({uploadData:ne({},p,{fileName:l.fileName?l.fileName:"",url:l.fileUrl?l.fileUrl:"",isFinish:!!l.fileUrl})})}else;var u=t.video&&-1!==t.video.indexOf("[")?JSON.parse(t.video)[0]:null;if(u){var d=e.uploadVideo,h=d.state.uploadData;d.setState({uploadData:ne({},h,{fileName:u.fileName?u.fileName:"",url:u.fileUrl?u.fileUrl:"",isFinish:!!u.fileUrl})})}else;})):(this.setState({loading:!1}),sessionStorage.setItem("hx_content",""))}},{key:"doReject",value:function(){this.setState({reason:we[0],rejectSelectVal:"0",doRejectShow:!0})}},{key:"changeActiveImg",value:function(e,t,a){var n=this;if(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a===this.state.focusImg)return!1;this.setState({ratio:t.ratio,focusImg:a},function(){n.state.cropper.setAspectRatio(t.ratio)})}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"onDetailValueChange",value:function(e){var t,a=e.replace(/<br>+/g,"").replace(/ style=""+/,"").match(/<p(?:(?!<\/p>).|\n)*?<\/p>/gm);t=a.join(""),console.log("得到的字符串"+a),this.setState({newsAssist:t})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n=this.props,i=n.newsInfo,s=n.classifyList,c=this.state,u=c.selectedTags,h=c.focusImg,f=c.allfileList,v=c.uploadAllImgModal,y=c.previewVisible,x=c.previewImage,E=c.fileList,S=c.pcfileList,N=c.mfileList,C=c.mcfileList,T=c.newsContent,O=c.updateOrNot,U=c.newsVisible,M=c.list,D=c.topicList,I=c.topicValue,L={labelCol:{span:1},wrapperCol:{span:18}},B=[];s.map(function(e){1===e.status&&B.push({label:e.strategyCatName,value:e.strategyCat})});var _=[];i.strategyCat&&B.map(function(e){(i.strategyCat&e.value)===e.value&&_.push(e.value.toString())});var Y=F.a.createElement("div",null,F.a.createElement(w.a,{type:"plus"}),F.a.createElement("div",{className:"ant-upload-text"},"统一上传图片")),Z=[];0!==M.length&&M.map(function(e){return Z.push({label:e.nickName,value:e.passportId}),Z});var H=this.state.data.map(function(e){return F.a.createElement(fe,{title:Object(A.R)(e.type,e.name),dataType:e.type,className:"tagType-".concat(e.type),value:JSON.stringify({id:e.id,type:e.type}),key:e.id},e.name)});return F.a.createElement("div",{className:"post-send"},F.a.createElement(p.a,{spinning:this.state.loading,size:"large"},F.a.createElement(j.a,{onSubmit:this.handleSubmit},F.a.createElement(d.a,{style:{maxWidth:1200}},F.a.createElement(m.a,{span:18},F.a.createElement(he,ee({},L,{label:"标题: "}),a("title",{initialValue:O&&i?"".concat(i.title):"",rules:[{required:!0,message:"请输入新闻标题！"}]})(F.a.createElement(V.a,{className:"news-title-inp",placeholder:"新闻标题"}))))),F.a.createElement(d.a,{style:{maxWidth:1200}},F.a.createElement(m.a,{span:6},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:12},label:"作者: "},a("author",{initialValue:O&&i?"".concat(i.author):"",rules:[{required:!0,message:"请输入作者！"}]})(F.a.createElement(V.a,{ref:function(t){e.authorInput=t},className:"news-author",placeholder:"请输入作者"})))),F.a.createElement(m.a,{span:5},F.a.createElement(he,{className:"labelWidth60",labelCol:{span:1},wrapperCol:{span:16},label:"来源"},a("source",{initialValue:O&&i?{key:this.props.newsInfo.createdBy,label:this.props.newsInfo.source?this.props.newsInfo.source:this.props.newsInfo.author}:{key:"fff9d400cb94444fadaefd429516c276",label:"MarsBit"},rules:[{required:!0,message:"请选择新闻来源！"}]})(F.a.createElement(R.a,{labelInValue:!0,showSearch:!0,style:{width:"100%"},placeholder:"选择新闻来源",defaultActiveFirstOption:!1,notFoundContent:this.state.searching?F.a.createElement(p.a,{size:"small"}):"未查询到相关内容",showArrow:!0,optionFilterProp:"children",filterOption:!0,onChange:this.optionChange,onSearch:this.optionSearchChange,allowClear:!0},F.a.createElement(fe,{key:i.createdBy||"fff9d400cb94444fadaefd429516c276"},i.source),0!==Z.length&&Z.map(function(e){return F.a.createElement(fe,{key:e.value},e.label)}))))),F.a.createElement(m.a,{span:7},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:15},label:"所属专题: "},a("topicValue",{initialValue:I,rules:[{required:!1,message:"请输入核心关键词！"}]})(F.a.createElement(R.a,{labelInValue:!0,showSearch:!0,style:{width:"100%"},placeholder:"选择所属专题",defaultActiveFirstOption:!1,notFoundContent:this.state.loading?F.a.createElement(p.a,{size:"small"}):"未查询到相关内容",showArrow:!0,optionFilterProp:"children",filterOption:!0,allowClear:!0},0!==D.length&&D.map(function(e){return F.a.createElement(fe,{key:e.id},e.topicName)})))))),0!==this.props.channelList.length&&F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:20},label:"频道: "},a("channelId",{initialValue:O&&i?"".concat(i.channelId||"1"):"1"})(F.a.createElement(ve,{options:this.props.channelList.filter(function(e){return!e.disabled}),onChange:this.channelIdChange,setFieldsValue:this.state.channelId}))),F.a.createElement("div",{style:{display:"none"}},0!==s.length&&F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:20},label:"策略分类: "},a("strategyCat",{initialValue:O&&i?_:[],rules:[{required:!1,message:"请选择策略名称！"}]})(F.a.createElement(be,null,F.a.createElement(d.a,null,B.map(function(e,t){return F.a.createElement(m.a,{span:2,key:t},F.a.createElement(k.a,{value:"".concat(e.value)},e.label))})))))),F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:20},style:{maxWidth:1200},label:"摘要: "},a("synopsis",{initialValue:O&&i?"".concat(i.synopsis):"",rules:[{max:1024,required:!0,message:"请输入新闻内容摘要, 最多120字！"}]})(F.a.createElement(me,{rows:4,className:"news-summary",placeholder:"新闻摘要, 最多120字"}))),F.a.createElement(d.a,{style:{width:900}},F.a.createElement(m.a,{span:4},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:8},label:"文章左对齐: "},a("alignLeft",{initialValue:!1,valuePropName:"checked"})(F.a.createElement(l.a,{onChange:function(t){e.setState({alignLeft:t?1:0},function(){e.sendPost({postTitle:e.state.newsTitle,postContent:e.state.editor.root.innerHTML})})},checkedChildren:"是",unCheckedChildren:"否"})))),F.a.createElement(m.a,{span:4},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:8},label:"英文强制换行: "},a("wordBreak",{initialValue:!1,valuePropName:"checked"})(F.a.createElement(l.a,{onChange:function(t){e.setState({wordBreak:t?1:0},function(){e.sendPost({postTitle:e.state.newsTitle,postContent:e.state.editor.root.innerHTML})})},checkedChildren:"是",unCheckedChildren:"否"})))),F.a.createElement(m.a,{span:4},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:8},label:"图片加水印: "},a("watermark",{initialValue:!0,valuePropName:"checked"})(F.a.createElement(l.a,{onChange:function(e){e?G.a.set("watermark",1):G.a.set("watermark",0)},checkedChildren:"是",unCheckedChildren:"否"})))),F.a.createElement(m.a,{span:3},F.a.createElement(he,{className:"labelWidth40",labelCol:{span:1},wrapperCol:{span:10},label:"独家: "},a("original",{initialValue:!(!O||!i.original)&&1===parseInt(i.original),valuePropName:"checked"})(F.a.createElement(l.a,{onChange:function(t){e.setState({original:t?1:0})},checkedChildren:"是",unCheckedChildren:"否"})))),F.a.createElement(m.a,{span:3},F.a.createElement(he,{className:"labelWidth40",labelCol:{span:1},wrapperCol:{span:10},label:"推广: "},a("advertised",{initialValue:!(!O||!i.advertised)&&1===parseInt(i.advertised),valuePropName:"checked"})(F.a.createElement(l.a,{onChange:function(t){e.setState({advertised:t?1:0})},checkedChildren:"是",unCheckedChildren:"否"}))))),F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:20},label:"辅助信息"},a("subTitle",{initialValue:O&&i&&void 0!=="".concat(i.subTitle)?"".concat(i.subTitle):"",rules:[{required:!1,message:"选填"}]})(F.a.createElement(me,{style:{widthSpace:"pre-line",display:"none"},className:"news-summary",placeholder:"可填写原文作者、原文标题、编译人员等信息"})),F.a.createElement(W.a,{onValueChange:function(t){e.onDetailValueChange(t)},info:i&&i.subTitle})),F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:20},label:"内容: "},a("content",{initialValue:O&&i?T:"",rules:[{required:!0,message:"请输入新闻内容！"}]})(F.a.createElement(V.a,{className:"news",style:{display:"none"}})),F.a.createElement("div",{className:"media-quill-editor"},F.a.createElement(P.a,{setEditor:function(t){e.setState({editor:t})},subSend:function(t){return e.sendPost(t)}}))),F.a.createElement(he,ee({},L,{label:"标签: ",style:{display:"none"}}),a("tags",{initialValue:this.state.tags,rules:[{required:!1,message:"至少输入一个标签！"}]})(F.a.createElement(V.a,{className:"tag-item",placeholder:"中文/英文/数字, 标签之间用英文逗号隔开!"}))),F.a.createElement(d.a,{style:{maxWidth:700}},F.a.createElement(m.a,{span:14},F.a.createElement(he,ee({},L,{label:"智能标签: "}),a("smartTags",{initialValue:this.state.tags.join(","),rules:[{required:!1,message:"至少输入一个标签！"}]})(F.a.createElement(V.a,{className:"tag-item",style:{display:"none"}})),this.state.smartTagsStatus?F.a.createElement("div",null,0!==this.state.smartTags.length?this.state.smartTags.map(function(t){var a=JSON.stringify({id:t.id,type:t.type,name:t.name});return F.a.createElement(ge,{style:{border:"1px dashed #108ee9"},key:a,checked:u.indexOf(a)>-1,onChange:function(t){return e.handleTagsSelect(a,t)}},t.name)}):"没有查询到相关标签",0!==this.state.smartTags.length&&"(点击选择/取消需要关联的标签)",F.a.createElement(g.a,{loading:this.state.tagsLoading,style:{margin:"0 10px"},size:"small",type:"primary",onClick:this.handleSmartTags},"重新生成"),F.a.createElement(g.a,{size:"small",type:"primary",onClick:this.handleSmartTagsCancel},"取消")):F.a.createElement("div",null,"点击",F.a.createElement(g.a,{loading:this.state.tagsLoading,style:{margin:"0 10px"},size:"small",type:"primary",onClick:this.handleSmartTags},"此处"),"根据内容智能生成行情(币)标签"))),F.a.createElement(m.a,{span:10},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:14},label:"固定标签: "},this.transTags(xe).map(function(t,a){return F.a.createElement(g.a,{key:a,style:{margin:"0 10px"},size:"small",type:"primary",onClick:function(){return e.onBtnFixTagClick(t)}},t.label)})))),F.a.createElement(d.a,{style:{maxWidth:1200}},F.a.createElement(m.a,{span:14},F.a.createElement(he,ee({},L,{label:"新版标签："}),a("tagsV2",{initialValue:O&&i&&i.tagsV2&&0!==JSON.parse(i.tagsV2).length?this.transTags(JSON.parse(i.tagsV2)):[],rules:[{required:!0,message:"请选择相关标签！"}]})(F.a.createElement(R.a,{mode:"multiple",showSearch:!0,labelInValue:!0,notFoundContent:this.state.searching?F.a.createElement(p.a,{size:"small"}):this.state.searchText,filterOption:!1,optionFilterProp:"children",style:{width:"100%"},onSearch:this.getTagList,onSelect:this.handleSelect,onDeselect:this.handleDeselect,onChange:this.handleTagsChange,onBlur:this.handleBlur},H)),this.state.noCurrResult&&F.a.createElement("p",{style:{position:"absolute",right:"-155px",bottom:0}},F.a.createElement("span",null,"未找到结果?"),F.a.createElement(g.a,{type:"primary",loading:this.state.tagsIconLoading,style:{margin:"0 10px"},onClick:this.addNewTag,size:"small"},"创建"),F.a.createElement("span",null,"一个")))),F.a.createElement(m.a,{span:10},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:14},label:"核心关键词: "},a("keyTags",{initialValue:O&&i?"".concat(i.keyTags||""):"",rules:[{required:!1,message:"请输入核心关键词！"}]})(F.a.createElement(V.a,{placeholder:"核心关键词"}))))),F.a.createElement(d.a,{style:{maxWidth:1200}},F.a.createElement(m.a,{span:7},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:16},label:"发布日期: "},a("publishTime",{rules:[{required:!0,message:"请选择新闻发布时间！"}],initialValue:O&&i?z()(Object(A.w)(i.publishTime),"YYYY-MM-DD HH:mm:ss"):z()()})(F.a.createElement(o.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})))),F.a.createElement(m.a,{span:7},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:16},label:"热度: "},a("hotCounts",{initialValue:O&&i&&i.hotCounts||0,rules:[{required:!0,pattern:/^[0-9]+$/,message:"请输入新闻热度值(正整数)！"}]})(F.a.createElement(V.a,{className:"news-source",placeholder:"请输入新闻热度值"}))))),F.a.createElement(d.a,{style:{width:900}},F.a.createElement(m.a,{span:6},F.a.createElement(he,{labelCol:{span:1},wrapperCol:{span:14},label:"图片剪裁: "},F.a.createElement("div",{className:"dropbox"},F.a.createElement(b.a,{headers:{"Sign-Param":Object(A.A)()},action:"".concat(A.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:f,onPreview:this.handlePreview,onChange:this.uploadAllImg},f.length>=1?null:Y)))),F.a.createElement(m.a,{span:3},this.FormItem({imgName:"pc",label:"PC-封面",imgUrl:"coverImgUrl",newsInfo:i,fileList:E,changeEvent:this.handleChange,size:"220px * 160px",require:!0,noBtn:!0})),F.a.createElement(m.a,{span:3},this.FormItem({imgName:"pc_recommend",label:"PC-推荐位",imgUrl:"pccoverImgUrl",newsInfo:i,fileList:S,changeEvent:this.handlePcChange,size:"532px * 335px",require:!1,noBtn:!0})),F.a.createElement(m.a,{span:3},this.FormItem({imgName:"wap_small",label:"M-缩略图",imgUrl:"mcoverImgUrl",newsInfo:i,fileList:N,changeEvent:this.handleMobileChange,size:"164px * 109px",require:!0,noBtn:!0})),F.a.createElement(m.a,{span:3},this.FormItem({imgName:"wap_big",label:"M-轮播图",imgUrl:"mccoverImgUrl",newsInfo:i,fileList:C,changeEvent:this.handleMobileCommentChange,size:"640px * 320px",require:!1,noBtn:!0})),F.a.createElement(m.a,{span:4},Object(A.G)(i.coverPic)&&JSON.parse(i.coverPic).mainImg&&F.a.createElement("p",{className:"exImg"},F.a.createElement("span",null,"原封面图: "),F.a.createElement("img",{onClick:this.handleCheck,src:JSON.parse(i.coverPic).mainImg,alt:""})))),F.a.createElement(d.a,{style:{maxWidth:1e3}},F.a.createElement(m.a,{span:9,style:{display:"none"}},F.a.createElement(he,ee({},L,{label:"添加视频: "}),F.a.createElement("div",null,F.a.createElement(J.a,{ref:function(t){e.uploadVideo=t},isBtn:!1,setUrl:function(t,a,n){return e.setState({vUrl:t,vName:a,vFileInfo:n})},title:" 点击上传视频"})))),F.a.createElement(m.a,{span:12},F.a.createElement(he,ee({},L,{label:"添加音频: "}),F.a.createElement("div",null,F.a.createElement(J.a,{ref:function(t){e.uploadAudio=t},isBtn:!1,setUrl:function(t,a,n){return e.setState({aUrl:t,aName:a,aFileInfo:n})},title:" 点击上传音频"}))))),this.state.vFileInfo?F.a.createElement(d.a,{className:"post-cover",style:{marginLeft:80}},F.a.createElement(m.a,{span:4},F.a.createElement(he,ee({},L,{label:"视频M封面: "}),a("video_m",{initialValue:this.state.vmUrl,rules:[{required:!0,message:"请上传视频M封面！"}]})(F.a.createElement("div",{className:"upload-img-warp clearfix"},F.a.createElement("div",{className:"upload-img-box"},F.a.createElement(X.a,{ref:function(e){},url:this.state.vmUrl,setUrl:function(t){return e.setState({vmUrl:t})}})),F.a.createElement("span",{className:"cover-img-tip"},"用于 M 端推荐位视频封面展示, 建议尺寸: ",F.a.createElement("font",{style:{color:"red"}},"280px * 205px")))))),F.a.createElement(m.a,{span:4},F.a.createElement(he,ee({},L,{label:"视频PC封面: "}),a("video_pc",{initialValue:this.state.vpcUrl,rules:[{required:!0,message:"请上传视频PC封面！"}]})(F.a.createElement("div",{className:"upload-img-warp clearfix"},F.a.createElement("div",{className:"upload-img-box"},F.a.createElement(X.a,{ref:function(e){},url:this.state.vpcUrl,setUrl:function(t){return e.setState({vpcUrl:t})}})),F.a.createElement("p",{className:"cover-img-tip"},F.a.createElement("font",{style:{color:"#249aef"}},"280px * 205px"))))))):"",F.a.createElement(he,{style:{width:1100},wrapperCol:{span:16,offset:2}},F.a.createElement(g.a,{type:"primary",onClick:this.newsVisibleShow,className:"preview",style:{marginRight:"10px",marginBottom:10}},"新闻内容预览"),F.a.createElement(g.a,{type:"primary","data-status":"1",onClick:this.handleSubmit,style:{marginRight:"10px",marginBottom:10}},"审核通过"),F.a.createElement(g.a,{type:"primary","data-status":"3",onClick:this.handleSubmit,style:{marginRight:"10px",marginBottom:10}},"定时发表"),F.a.createElement(g.a,{type:"primary","data-status":"4",onClick:this.handleSubmit,style:{marginRight:"10px",marginBottom:10}},"暂存一下"),F.a.createElement(g.a,{type:"primary","data-status":"2",onClick:this.handleSubmit,style:{marginRight:"10px",marginBottom:10}},"审核驳回"),F.a.createElement(g.a,{type:"primary",className:"cancel",style:{marginRight:"10px",marginBottom:10},onClick:this.closeWindow},"取消")),F.a.createElement(r.a,{visible:U,footer:null,className:"newsModal",onCancel:this.newsVisibleHide,width:1e3},F.a.createElement(d.a,null,F.a.createElement(m.a,{className:"previewNews simditor"},F.a.createElement("p",{className:"simditor-body",style:{padding:10},dangerouslySetInnerHTML:this.createMarkup(T)})))),F.a.createElement(r.a,{visible:y,footer:null,onCancel:this.handleCancel},F.a.createElement("img",{alt:"example",style:{width:"100%"},src:x})),F.a.createElement(r.a,{confirmLoading:this.state.confirmLoading,height:"700px",width:"1400px",style:{top:"50px"},visible:v,onOk:this.sureCropImg,onCancel:this.uploadAllImgCancel},F.a.createElement("div",{className:"croper-wrap checkPost clearfix"},F.a.createElement("div",{className:"crop-img",id:"cropImgWrap"},F.a.createElement("img",{id:"croppedImg",src:"",alt:"Picture"})),F.a.createElement("div",{onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.setState({focusImg:-1})},className:"crop-preview"},this.state.cropImgRule.map(function(e,a){return F.a.createElement("div",{key:a,onClick:function(n){t.changeActiveImg(n,e,a)},className:"cropper-intro"},F.a.createElement("div",{className:"cropper-item-wrap ".concat(h===a?"active":"")},F.a.createElement("div",{"data-type":e.coverName,"data-list":e.coverList,className:"crop-preview-item",style:{fontSize:0,width:e.width,height:e.height}},F.a.createElement("img",{src:"",alt:"",style:{width:"100%",height:"100%"}}))),F.a.createElement("span",null,e.intro))})))),F.a.createElement(r.a,{title:"提示",visible:this.state.isRepetition,onOk:this.isRepetitionOk,onCancel:this.isRepetitionCancel},F.a.createElement("p",{style:{lineHeight:"40px",fontSize:"14px"}},this.state.isRepetitionEdit," ",F.a.createElement("a",{href:this.state.similarityUrl,style:{display:""===this.state.similarityUrl?"none":"inlineBlock"},target:"_blank"},"查看相似文章"))),F.a.createElement(r.a,{title:"审核驳回",visible:this.state.doRejectShow,onOk:this.doRejectDo,onCancel:function(){e.setState({doRejectShow:!1})}},F.a.createElement("div",{className:"modal-input-reject"},F.a.createElement("span",{style:{marginRight:10}},"请",4===parseInt(this.state.rejectSelectVal)?"填写":"选择","文章不通过原因：",this.state.reason||""),F.a.createElement(R.a,{value:this.state.rejectSelectVal,style:{width:280},onChange:this.doRejectSelect},we.map(function(e,t){return F.a.createElement(fe,{value:"".concat(t),key:t},e)})),F.a.createElement(me,{style:{display:4===parseInt(this.state.rejectSelectVal)?"block":"none"},rows:3,autoFocus:!0,onChange:function(t){e.getReason(t)}}))))),this.state.closeLoading&&F.a.createElement(Q.a,{handleCancel:function(t){clearInterval(t),e.setState({closeLoading:!1})},closeLoading:this.state.closeLoading}))}}])&&oe(n.prototype,i),s&&oe(n,s),a}();t.default=Object(L.connect)(function(e){return{list:e.postAccountInfo.list,userInfo:e.articleAudit.userInfo,newsInfo:e.articleAudit.info,channelList:e.channelListInfo,classifyList:e.postTacticsInfo.list}})(j.a.create()(Ee))}.call(this,a(97))},1608:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a(361);var n=a(20),r=a.n(n),i=a(48),o=a(2),s=function(e,t,a){return function(n){Object(i.i)(e,"/news/strategyCategory/showStrategyCategorylist",t,function(e){if(1===e.code){var t=e.obj;n({type:o.nb.LIST_POST_TACTICS,data:t}),a&&a(t)}else r.a.error(e.msg)})}}},1614:function(e,t,a){"use strict";a.d(t,"a",function(){return v});var n=a(0),r=a.n(n),i=a(1402),o=a.n(i),s=a(248);a(1615);function l(e,t,a,n,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function o(e){l(i,n,r,o,s,"next",e)}function s(e){l(i,n,r,o,s,"throw",e)}o(void 0)})}}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=o.a.import("delta"),g=function(e){var t=this.quill.getSelection(!0),a=this.quill.getContents(t.index,t.length),n=(new f).retain(t.index+t.length);a.ops=a.ops.map(function(e){if(!e.insert)return e;if("object"!==m(e.insert))return{insert:e.insert};switch(Object.keys(e.insert)[0]){case"LinkBlot":return{insert:e.insert.LinkBlot.text};default:return{insert:e.insert}}}),n=n.concat(a),this.quill.updateContents(n,o.a.sources.USER),this.quill.deleteText(t.index,t.length),this.quill.videoInit()},v=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=u(this,d(t).call(this,e));var n=e.toolbar;return a.toolbarOptions=n||[[{header:[1,2,3,4,!1]}],[{header:2},"bold","italic","underline","strike"],["blockquote"],[{color:[]},{background:[]}],[{align:[]}],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"],["sourceEditor"]],a.state={editor:null,fullscreen:!1},a}var a,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n["Component"]),a=t,(i=[{key:"componentDidMount",value:function(){var e=this,t={modules:{toolbar:{container:this.toolbarOptions,handlers:{clean:g}},imageResize:{},clipboard:{imageUpload:function(){var e=c(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(s.p)([{signTime:(new Date).getTime(),imgSrc:t||""}]);case 3:if(!((a=e.sent)&&a.code&&1===a.code&&a.obj[0]&&a.obj[0].imgSrc)){e.next=6;break}return e.abrupt("return",a.obj[0].imgSrc);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),paste:function(t){e.props.state&&e.props.paste(t)},matchVisual:!1},mediaUploader:{imageUpload:function(){var e=c(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(s.c)({type:"news",uploadFile:t});case 3:if(!(a=e.sent)||1!==a.code){e.next=6;break}return e.abrupt("return",a.obj);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),videoUpload:function(){var e=c(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.d)({file:t});case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},placeholder:"请输入文章内容",theme:"snow"},a=new o.a("#editorQuill",t);a.on("text-change",function(t,n,r){e.props.subSend({postContent:a.root.innerHTML})}),this.props.setEditor&&this.props.setEditor(a),this.setState({editor:a});var n=document.createElement("span");n.setAttribute("class","ql-formats ql-fullscreen-formats");var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("class","ql-fullscreen"),r.innerHTML='<svg class="ql-fullscreen-svg" viewBox="0 0 1024 1024"><path d="M160 96h192q14.016 0.992 23.008 10.016t8.992 22.496-8.992 22.496T352 160H160v192q0 14.016-8.992 23.008T128 384t-23.008-8.992T96 352V96h64z m0 832H96v-256q0-14.016 8.992-23.008T128 640t23.008 8.992T160 672v192h192q14.016 0 23.008 8.992t8.992 22.496-8.992 22.496T352 928H160zM864 96h64v256q0 14.016-8.992 23.008T896 384t-23.008-8.992T864 352V160h-192q-14.016 0-23.008-8.992T640 128.512t8.992-22.496T672 96h192z m0 832h-192q-14.016-0.992-23.008-10.016T640 895.488t8.992-22.496T672 864h192v-192q0-14.016 8.992-23.008T896 640t23.008 8.992T928 672v256h-64z" p-id="8486"></path></svg>',n.appendChild(r),document.querySelector(".ql-toolbar").appendChild(n),document.addEventListener("click",function(t){var a=t.target.getAttribute("class");a&&a.indexOf("ql-fullscreen")>-1&&e.setState({fullscreen:!e.state.fullscreen})},!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"editor-quill-box ".concat(this.state.fullscreen?"active":"")},r.a.createElement("div",{className:"editor-quill-cotent"},r.a.createElement("div",{id:"editorQuill"})))}}])&&p(a.prototype,i),l&&p(a,l),t}()},1615:function(e,t,a){var n=a(1616);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1616:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},1618:function(e,t,a){var n=a(1619);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1619:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},1620:function(e,t,a){"use strict";a.d(t,"e",function(){return c}),a.d(t,"c",function(){return p}),a.d(t,"b",function(){return u}),a.d(t,"d",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"h",function(){return f}),a.d(t,"f",function(){return g}),a.d(t,"g",function(){return v});a(361);var n=a(20),r=a.n(n),i=a(48),o=a(2);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){l(e,t,a[t])})}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e){return{type:o.xb,data:e}},p=function(e,t,a){return function(n){var o="init"===e?"/news/shownews":"/post/search";Object(i.i)("get",o,t?s({},t,{createrType:1}):{},function(e){if(1===e.code){var t=e.obj;n(h({list:t.inforList})),n(v({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),a&&a(t)}else r.a.error(e.msg)})}},u=function(e,t){return function(a){Object(i.i)("post","/news/getbyid",s({},e),function(e){if(1===e.code){var n=e.obj;a(h({info:n})),t&&t(n)}else r.a.error(e.msg)})}},d=function(e,t){return function(a){Object(i.i)("post","/news/setorder",s({},e),function(a){1===a.code?(0===parseInt(e.topOrder)?r.a.success("取消置顶成功！"):r.a.success("置顶成功！"),t&&t()):r.a.error(a.msg)})}},h=function(e){return{type:o.k.ADD_DATA,data:e}},m=function(e,t){return{type:o.k.EDIT_LIST_ITEM,data:e,index:t}},f=function(e){return{type:o.k.SET_SEARCH_QUERY,data:e}},g=function(e){return{type:o.k.SET_FILTER_DATA,data:e}},v=function(e){return{type:o.k.SET_PAGE_DATA,data:e}}},1622:function(e,t){e.exports="data:image/png;base64,bW9kdWxlLmV4cG9ydHMgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFMc0FBQUNDQ0FZQUFBQWU1YmtQQUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzTUFBQTdEQWNkdnFHUUFBQWVwU1VSQlZIaGU3ZDFMYUZ4VkdBZndrNmEydHRvV0RDbE5zSzJyMG4zY1dhbFlVRlFRRkNvVUZGd0lMbHdJTHJvUVhMZ1FCRi9nd29YZ3dvV2cyTlpxcmZHdFZPb3o0NHRhRTVzMG1VblNwSG0wU2ROSm1yZjluNTRMN1REUGUrL00vYzc5L2orUVRrWXdpZk9mYzc3em5YT21UVjFkWGF1R1NJRTE3aytpMUdQWVNRMkduZFJnMkVrTmhwM1VZTmhKRFlhZDFHRFlTWTJxTnBVNk9qcmNJeUtaTXBtTWUxUWFSM1pTZzJFbk5SaDJVb05oSnpVWWRsS0RZU2MxR0haU2cyRW5OUmgyVW9OaEYyNXBhY2xNVDArYnljbEordzhlTHl3c3VIOUx0ZUJ4QWFIeStid1pHaG95bHk5ZmRzL2NhT1BHamFhOXZkMXMyYkxGUGFNYmp3dDRhR1ZseFF3UEQ1dWVucDZTUVlmWjJWblQyOXRyc3Rtc1dWNWVkczlTT1F5N0lBaHRkM2UzR1IwZE5hdXIxWDNvdzhURWhEbDkralJMbXlvdzdJS2diSm1ibTNOZlZROUJIeGdZY0Y5UktReTdFRmg0WXBRT2EyWm14b3lOamJtdnFCaUdYUUNVTExsY3puMFZIbXA5ZEcrb09JWmRBQ3hFNDZpNXNiakZERUhGTWV3Q2xPdTYxQ3JPLzFiYU1Pd0N4TmxKbVorZmQ0K29FTU11UUxWdFJvcUdZUmVndWJuWlBZcHV6UnErcEtYdy80d0E2OWV2ZDQraTI3QmhnM3RFaFJoMkFlSTgzN0pwMHliM2lBb3g3QUpnWkk4ajhEZ2N4ckNYbHJxdy96aVNOdzkvT21DK0hmS3JCYmRqeDQ1SXRYdFRVNVBadVhPbi9aT0tTMDNZcHhlV3pjR1RJK2FSNDFuenkraXNPZkI1enJ6dzgza3p2K3hIcDJQZHVuVm0rL2J0N3F2YWJkdTJ6WTdzVkZvcXd2NVZic2JjYy9pc2VmZmZpKzZaYTk0K05Xa2UvS1RmbkpxODRwNlJyYVdseFo1UnIzVjAzcnAxcTJscmEzTmZVU2xlaC8zQ2xXWHoxRGRENXZFdkI4MjUvS0o3OWtZSU9nS1A0UHNBb2QyOWUzZFZvelJxL1YyN2R0a1pnZVZMWmQ3ZVZIci92eW56NHEvbmJlQ3JkZS90dDVyWDdtNHo3YmZjNUo2UkN4dE51SVkzTlRWbEwyb3NMbDU3TTY5ZHU5YStFVFp2M214YVcxdlpWM2VxdWFua1hkZ3hnaDg4T1dwTGx6QnV1N25adkw2bjNUeHdCN3NXYVpLNmEzbnYvSFBCN0RuVUZ6cm9nSm5neWE4SDdXSTJ2N2ppbmlVTnZBajdtYWw1MjA1OC9xZlIyQUtLeGV6OUgvZWJQOGRydnhsRWZoSWQ5cVdWVmZQbVh4Tm0zMGRuYlRzeGJuZ1RQWFJzd0g0UGZDOUtON0ZoUnhjRkkrOUx2NDNWdFZlT2tPTjdQTmFaTTRNenhUczZsQTdpd281Z0kzd0llaVA3NHlkSDhuWUdPZHJIbXo1cEpTcnNLRlVRdUtUS0N1ekNQdjNkc0hubSsySDdtTkpGUk5peDZNVGlFNHRRMU5GSk85UTdYYmQxQWlVbjhiQ2pqWWgySXRxS2txQitmL1N6ckhrNU04N0ZhMG9rRm5iMHU1ODljYTdzVm4vU0VQSTMvaGkzTTA3L0pYN2lsdThTQ2Z1eC9rdm1ya085ZHN2ZkI1bXhPVnZXdk5kejQwRXp6WHpja0d0bzJER0NZeVRINGExYXpyUklnQmYzdVI5R3ZQelo0NGE3QW5kK2NNWWVvZmFweEd0WTJMRmppV080VWJiNkpjQ3NoRkgreEhEZVBhTkhzQ2VCdXdKNHcrTWtLVGJsZk5tZnFIdlk3VUx2ZU5hZVJVbExPdzh6MVA3T3JEMTFxV1h4aXQ4WkMzYTBoYStINHhaNDgzY095Qi9FNmhaMmhPQ3R2eWR0Ylk0Tm16VEM3NGZOcis2TDZmNWdJcFF0NVZxeEdNUnd1RTU2V1ZPWHNHUG5FeDBNakh5K1hJc0xDNy9yZlVmUGltdWR4cUd3Yktra0tHdWtkdGRpRFR1Qy9jcnY0M2EwUXdkREMvemUyQlRENG50c0xoMmZvbHVxYktra0tHc2tYbmlQTGV4QmUrN1ZxMkhYVXNjV3d1Sjc3K0ZvNSswbHFGUzJWSUpaQUxNQlpnVkpXWWdjZHJUa1VLdEoyZXBQR2w1b2pQQnhucjF2RkFRVE0vTVRWMy8rT05xcm1CVXdPMGdwYXlLRkhlMjN2VWY2YksybWRUUXZCVFY4bzA5dVJvSHk2OEFYdWRobjV1QnduNFN5SmxUWXNmckdWai9hYnp3RFhocG1PZ1FlWFJ2Sk1HanRPMUsvdllPZ3JFbjZuRkdvc08vNXNNK2JyZjZrNGNWRlZ3cDdEZEs2RkVIWmdoRzlFUXRybkROcTFQY3FKbFRZMDlKeGFDVHNOV0FIR1R1d0V0U3JiS21rM3JOSU9aRVhxRlE5bEg4NFc0TVNNTW5GYTVLQmcrQ05obG1sa1c4MGhqMEJLQUd4c0U5aUw2S1JaVXM1Q0RsbWxVYitMQXg3UXJDd1I3dTJVYU5ic0VpVXRnOFN6REw0OU9WNlk5Z1RGSXh1Q0gwOXUxcVMybi9GWUdUZjM1bXJlYmUyVmd5N0FDaG5VTmJnN212Y3BHM3NsSUkzZmkzbmNNSmcySVhBZ2hXZmFvQUZiQnhIb1lPeVJkcVdmU1ZSanlxVXc3QUxnOVlrV3BSUmFsanBaVXNsWVEraFZjS3dDNFFYR3pWc21Nc2h2cFF0bFFSbERjNFp4WFhwaDJFWENpOTJjRG1rbWdOMkNJU1BaVXNsT0VHS1dTcU9ENkJsMklVTFB2T3k4Sy9RdVo3a00rUnhRS2NLbDBLaS91MHBETHNIc0hqRkhWNU02WVdkQ3Q4dVBZZUYyUXBIeVhIOUwyeFp3N0I3SkxnY2doRWNMN2dQOXo3amhvdmRZY3NhaHQwejlsekoxZG9jSjA5OXVORmZEMEZaVXl1RzNWTkpuMjFKV3BqWmpHRW5OUmgyVW9OaEp6VVlkbEtEWVNjMUdIWlNnMkVuTlJoMlVvTmhKelVZZGxLRFlTYzFHSFpTZzJFbk5SaDJVb05oSnpVWWRsS0RZU2MxR0haU2cyRW5OUmgyVW9OaEp6VVlkbEtEWVNjMUdIWlNnMkVuTlJoMlVvTmhKelVZZGxLRFlTYzFHSFpTZzJFbk5SaDJVb05oSnpVWWRsS0RZU2MxR0haU2cyRW5OUmgyVW9OaEp6VVlkbEtEWVNjMUdIWlNvNm1ycTZ2aTM0dmQwZEhoSGhISmxNbGszS1BTT0xLVEdndzdxVkZWR1VPVUJoelpTUTJHbmRSZzJFa05ocDNVWU5oSkRZYWQxR0RZU1EyR25aUXc1bjlTajM0aER1YnRFUUFBQUFCSlJVNUVya0pnZ2c9PSI="},1623:function(e,t,a){var n,r,i;i=this,n=[a(97),a(1399)],void 0===(r=function(e,t){return i.SimditorClearHtml=(a=e,n=t,o={}.hasOwnProperty,r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var a in t)o.call(t,a)&&(e[a]=t[a]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n.Button),t.cls="simditor-clearhtml",t.i18n={"zh-CN":{clearhtml:"清除格式"},"en-US":{clearhtml:"Clear Format"}},t.prototype.name="clearhtml",t.prototype.needFocus=!1,t.prototype.iconClassOf=function(){return"simditor-clearhtml-icon-uuke-qingchu"},t.prototype._init=function(){return t.__super__._init.call(this)},t.prototype.styleRootNodes=null,t.prototype.isStyleRootNode=function(e){return null===this.styleRootNodes&&(this.styleRootNodes=["th","td"].concat(this.editor.util.blockNodes)),!(!(e=a(e)[0])||e.nodeType===Node.TEXT_NODE)&&new RegExp("^("+this.styleRootNodes.join("|")+")$").test(e.nodeName.toLowerCase())},t.prototype.canNodeBeRemoved=function(e){return 0===e.contents().length&&e[0].nodeType!==Node.TEXT_NODE&&!e.is("hr, br, img, th, td")},t.prototype._moveLeavesUp=function(e){for(;e.length>0;){var t=e.pop(),n=a(t),r=n.contents();if(r.length>0)a.merge(e,r.get());else if(this.canNodeBeRemoved(n))n.remove();else for(var i=t.parentNode;!this.isStyleRootNode(i);){var o=a(i);n.detach(),this.canNodeBeRemoved(o)?(o.replaceWith(n),i=t):o.after(n),i=i.parentNode}}},t.prototype.command=function(){var e=this.editor.selection.range();if(e&&!e.collapsed){var t,n=[],r=e.startContainer,i=e.endContainer,o=e.startOffset,s=e.endOffset,l=r,c=a(l),p=null,u=null,d=(t=this,function(e,n,r){for(var i=a(e).contents().slice(n).detach();!t.isStyleRootNode(e);){var o=a(e.parentNode).contents(),s=o.index(e),l=e.cloneNode(!1),c=a(l);c.append(i),i=c.add(o.slice(s+1).detach()),e=e.parentNode}a(e).append(r),a(e).append(i)}),h=function(t){return function(){t._moveLeavesUp(n),(e=document.createRange()).setStartBefore(r),e.setEndAfter(i),t.editor.selection.range(e),t.editor.trigger("valuechanged"),t.editor.trigger("selectionchanged")}}(this);if(r!=i){var m=this.editor.selection.startNodes().slice(0);if(r.nodeType===Node.TEXT_NODE){if(o>0){selected=document.createTextNode(r.nodeValue.substring(o)),r.nodeValue=r.nodeValue.substring(0,o),a(r).after(selected);var f=a(r.parentNode).contents(),g=f.index(r);r=f[g+1],m[0]=r}}else{o>=a(r).contents().length&&a(r).append(document.createTextNode("")),r=a(r).contents()[o];var v=m.get();v.unshift(r),m=a(v)}var b=this.editor.selection.endNodes().slice(0);if(i.nodeType===Node.TEXT_NODE){if(s<i.nodeValue.length){selected=document.createTextNode(i.nodeValue.substring(0,s)),i.nodeValue=i.nodeValue.substring(s),a(i).before(selected);var y=a(i.parentNode).contents(),w=y.index(i);i=y[w-1],b[0]=i}}else{s<=0&&(a(i).prepend(document.createTextNode("")),s=1),i=a(i).contents()[s-1];var x=b.get();x.unshift(i),b=a(x)}for(var E=null,S=null,k=null,N=0;N<m.length;++N){var C=m[N];if(null===S&&this.isStyleRootNode(C)&&(S=C),b.index(C)>-1){E=C;break}}for(null===E&&(E=this.editor.body[0]),N=0;N<b.length;++N){var T=b[N];if(this.isStyleRootNode(T)){k=T;break}if(T===E)break}var O=null;if(r!==E){for(var U=a(r);r.parentNode!==S&&r.parentNode!==E;){var R=a(r.parentNode),M=R.contents(),V=M.index(r);U=U.add(M.slice(V+1)).detach(),R.contents().length>0?R.after(U):R.replaceWith(U)}for(var D=U[U.length-1];D.parentNode!==E;){var j=a(D.parentNode).contents(),I=j.index(D);U=U.add(j.slice(I+1)),D=D.parentNode}O=D,a.merge(n,U.get())}var F=null;if(i!==E){for(var L=a(i);i.parentNode!==k&&i.parentNode!==E;){var W=a(i.parentNode),P=W.contents(),B=P.index(i);L=L.add(P.slice(0,B)).detach(),W.contents().length>0?W.before(L):W.replaceWith(L)}for(var _=L[0];_.parentNode!==E;){var z=a(_.parentNode).contents(),Y=z.index(_);L=L.add(z.slice(0,Y)),_=_.parentNode}F=_,a.merge(n,L.get())}if(null===S&&null===k){var Z=a(E).contents(),H=Z.index(r),A=Z.index(i),J=Z.slice(H,A+1).detach();d(E,H,J),E=J.parent()[0]}var X=a(E).contents(),Q=null===O?0:X.index(O)+1,q=null===F?void 0:X.index(F);a.merge(n,X.slice(Q,q).get()),h()}else{if(l.nodeType===Node.TEXT_NODE){var G,K=(u=a(l.parentNode)).contents().index(r);0===o&&s===l.nodeValue.length?a(G=r).detach():(G=document.createTextNode(l.nodeValue.substring(o,s)),0===o?l.nodeValue=l.nodeValue.substring(s):(s<l.nodeValue.length&&c.after(l.nodeValue.substring(s)),l.nodeValue=l.nodeValue.substring(0,o),++K)),d(u[0],K,G),r=i=G}else{var $=(u=a(p=l)).contents().slice(o,s).detach();d(p,o,$),a.merge(n,$.get()),r=$.first()[0],i=$.last()[0]}h()}}},t}(),n.Toolbar.addButton(r),r);var a,n,r,o}.apply(t,n))||(e.exports=r)},1624:function(e,t,a){"use strict";a.d(t,"e",function(){return c}),a.d(t,"b",function(){return p}),a.d(t,"d",function(){return u}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return h}),a.d(t,"h",function(){return f}),a.d(t,"f",function(){return g}),a.d(t,"g",function(){return v});a(361);var n=a(20),r=a.n(n),i=a(48),o=a(2);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){l(e,t,a[t])})}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e){return{type:o.xb,data:e}},p=function(e,t,a){return function(n){var o="init"===e?"/account/author/list":"/post/search";Object(i.i)("get",o,t?s({},t):{},function(e){if(1===e.code){var t=e.obj;n(m({list:t.inforList})),n(v({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),a&&a(t)}else r.a.error(e.msg)})}},u=function(){return Object(i.k)({type:"get",url:"/account/author/list",params:{pageSize:1e4,currentPage:1}})},d=function(e){return Object(i.k)({type:"post",url:"/account/author/importnews",params:{passportId:e}})},h=function(e,t){return function(a){Object(i.i)("post","/account/author/add",s({},e),function(e){t&&t(e),1===e.code?r.a.success("添加成功！"):r.a.error(e.msg)})}},m=function(e){return{type:o.nb.ADD_DATA,data:e}},f=function(e){return{type:o.nb.SET_SEARCH_QUERY,data:e}},g=function(e){return{type:o.nb.SET_FILTER_DATA,data:e}},v=function(e){return{type:o.nb.SET_PAGE_DATA,data:e}}},1667:function(e,t,a){"use strict";a(184);var n=a(1378),r=a.n(n),i=a(0),o=a.n(i),s=a(246),l=a(97),c=a.n(l),p=a(1399),u=a.n(p),d=(a(1640),a(1622)),h=a.n(d);a(1668),a(1623);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=r.a.TextArea,w=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=g(this,v(t).call(this,e))).state={info:{postContent:""}};var n=e.toolBar;return a.EDITTOOLBAR=n||["link"],a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i["Component"]),a=t,(n=[{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.info)!==JSON.stringify(e.info)}},{key:"componentDidMount",value:function(){this.editor=new u.a({pasteImage:!0,textarea:c()(".editor"),defaultImage:h.a,placeholder:"可填写原文作者、原文标题、编译人员等信息",toolbar:this.EDITTOOLBAR,cleanPaste:!0,allowedTags:["a","span","p","br"]}),this.bindEditorEvent()}},{key:"bindEditorEvent",value:function(){var e=this;this.editor.on("valuechanged ",function(t){var a=e.editor.getValue();e.setState({info:e.editor.getValue()}),e.props.onValueChange(a)})}},{key:"render",value:function(){if(void 0!==this.editor){var e=this.editor.getValue();this.props.info!==e&&this.editor.setValue(this.props.info)}return o.a.createElement("div",{className:"editor-post-content"},o.a.createElement(y,{className:"editor",autosize:!0}))}}])&&f(a.prototype,n),r&&f(a,r),t}();t.a=Object(s.connect)(function(e){return{query:e.postInfo.query}})(w)},1668:function(e,t,a){var n=a(1669);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1669:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},1762:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(0),r=a.n(n),i=a(48);a(1763);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){d(e,t,a[t])})}return e}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=c(t).call(this,e),a=!r||"object"!==o(r)&&"function"!=typeof r?p(n):r,d(p(a),"selectFile",function(e){var t=e.target.files,n={currIndex:1,uploadId:"",url:"",fileName:t[0].name,progress:0,isUpload:!1,isFinish:!1};a.setState({file:t[0],fileList:t,uploadData:n}),a.props.setUrl("",t[0].name,null),a.uploadFile(t[0],n)}),d(p(a),"delFile",function(){a.setState(s({},{file:null,fileList:[],uploadData:{currIndex:1,uploadId:"",url:"",fileName:"",progress:0,isUpload:!1,isFinish:!1}})),a.props.setUrl("","",null)}),d(p(a),"uploadFile",function(e,t){var n=null,r=null;e?(n=t,r=e):(n=a.state.uploadData,r=a.state.file);var i=n.currIndex,o=n.uploadId,s=r.size,l=Math.ceil(s/2097152),c=new FormData;c.append("fileName",r.name),c.append("blockCount",l),c.append("currIndex",i),c.append("uploadId",o),c.append("uploadFile",null),c.append("type","video");var p={totalSize:s,blockSize:2097152,blockCount:l};a.UploadPost(r,c,n,p)}),d(p(a),"UploadPost",function(e,t,n,r){var o=a.props.setUrl,l=n.currIndex,c=n.uploadId,u=p(a);a.setState({uploadData:s({},n,{isUpload:!0})});try{var d=(l-1)*r.blockSize,h=Math.min(r.totalSize,d+r.blockSize),m=e.slice(d,h);t.set("uploadFile",m),t.set("currIndex",l),t.set("uploadId",c),Object(i.l)("POST","/file/upload",t,function(a){if(1===a.code){var i=l/r.blockCount*100;if(l+1>=r.blockCount&&(i=100),l<r.blockCount){u.setState({uploadData:s({},n,{currIndex:l+1,progress:i.toFixed(2),uploadId:a.obj})});var c=s({},n,{currIndex:l+1,progress:i.toFixed(2),uploadId:a.obj});u.UploadPost(e,t,c,r)}}else if(a.code<0)console.log("code:"+a.code+"; msg:"+a.msg);else if(2===a.code){console.log("上传成功");var p={uid:"rc-upload-".concat(e.lastModified,"-").concat(Math.round(99*Math.random())),fileName:e.name,fileUrl:a.obj};u.setState({uploadData:s({},n,{url:a.obj,isUpload:!1,isFinish:!0,fileName:e.name,fileInfo:p})}),o(a.obj,e.name,p)}})}catch(e){alert(e)}}),a.state={file:null,fileList:[],fileInfo:null,fileValue:"",uploadData:{currIndex:1,uploadId:"",fileName:"",url:"",progress:0,isUpload:!1,isFinish:!1}},a}var a,h,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Component"]),a=t,(h=[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.isBtn,i=this.state,o=i.file,s=i.uploadData,l=i.fileValue;return r.a.createElement("div",{className:"upload-file"},r.a.createElement("div",{className:"file-select"},r.a.createElement("div",{className:"file-select-btn"},r.a.createElement("i",{className:"iconfont iconfont-upload"}),r.a.createElement("span",null,a)),r.a.createElement("input",{value:l,type:"file",onChange:function(t){return e.selectFile(t)}})),n?r.a.createElement("div",{style:{display:o?"block":"none"},className:"file-list clearfix"},r.a.createElement("div",null,r.a.createElement("i",{className:"iconfont iconfont-file"}),r.a.createElement("span",null,o?o.name:"")),r.a.createElement("i",{onClick:function(){return e.delFile()},className:"iconfont iconfont-close"})):"",r.a.createElement("div",{style:{display:s.isFinish?"block":"none"},className:"file-finish-list"},r.a.createElement("a",{href:s.url,target:"_blank",className:"file-name"},s.fileName),r.a.createElement("a",{onClick:function(){return e.delFile()},className:"del-btn",href:"javascript:void(0)"},"删除")),n?r.a.createElement("a",{className:!o||s.isFinish?"upload-btn disabled":s.isUpload?"upload-btn primary loading":"upload-btn primary",onClick:function(){return!o||s.isFinish||s.isUpload?"":e.uploadFile()},href:"javascript:void(0)"},"开始上传"):"",r.a.createElement("div",{className:"file-progress",style:{display:s.isUpload?"block":"none"}},r.a.createElement("div",{className:"file-progress-bg"},r.a.createElement("div",{style:{width:"".concat(s.progress,"%")},className:"file-progress-bar"})),r.a.createElement("div",{className:"file-progress-text"},s.progress,"%")))}}])&&l(a.prototype,h),m&&l(a,m),t}()},1763:function(e,t,a){var n=a(1764);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1764:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},1765:function(e,t,a){var n=a(1766);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1766:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},1767:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(0)),r=o(a(1)),i=o(a(1768));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=["dragMode","aspectRatio","data","crop","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","ready","cropstart","cropmove","cropend","zoom"],m=h.slice(4),f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,u(t).apply(this,arguments))}var a,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,n.Component),a=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter(function(e){return-1!==h.indexOf(e)}).reduce(function(t,a){return l({},t,(n={},r=a,i=e.props[a],r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n));var n,r,i},{});this.cropper=new i.default(this.img,t)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src),e.aspectRatio!==this.props.aspectRatio&&this.setAspectRatio(e.aspectRatio),e.data!==this.props.data&&this.setData(e.data),e.dragMode!==this.props.dragMode&&this.setDragMode(e.dragMode),e.cropBoxData!==this.props.cropBoxData&&this.setCropBoxData(e.cropBoxData),e.canvasData!==this.props.canvasData&&this.setCanvasData(e.canvasData),e.moveTo!==this.props.moveTo&&(e.moveTo.length>1?this.moveTo(e.moveTo[0],e.moveTo[1]):this.moveTo(e.moveTo[0])),e.zoomTo!==this.props.zoomTo&&this.zoomTo(e.zoomTo),e.rotateTo!==this.props.rotateTo&&this.rotateTo(e.rotateTo),e.scaleX!==this.props.scaleX&&this.scaleX(e.scaleX),e.scaleY!==this.props.scaleY&&this.scaleY(e.scaleY),e.enable!==this.props.enable&&(e.enable?this.enable():this.disable()),Object.keys(e).forEach(function(a){var n=e[a]!==t.props[a],r=-1!==m.indexOf(a);if("function"==typeof e[a]&&"function"==typeof t.props[a]&&(n=e[a].toString()!==t.props[a].toString()),n&&r)throw new Error("prop: ".concat(a," can't be change after componentDidMount"))})}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"setDragMode",value:function(e){return this.cropper.setDragMode(e)}},{key:"setAspectRatio",value:function(e){return this.cropper.setAspectRatio(e)}},{key:"getCroppedCanvas",value:function(e){return this.cropper.getCroppedCanvas(e)}},{key:"setCropBoxData",value:function(e){return this.cropper.setCropBoxData(e)}},{key:"getCropBoxData",value:function(){return this.cropper.getCropBoxData()}},{key:"setCanvasData",value:function(e){return this.cropper.setCanvasData(e)}},{key:"getCanvasData",value:function(){return this.cropper.getCanvasData()}},{key:"getImageData",value:function(){return this.cropper.getImageData()}},{key:"getContainerData",value:function(){return this.cropper.getContainerData()}},{key:"setData",value:function(e){return this.cropper.setData(e)}},{key:"getData",value:function(e){return this.cropper.getData(e)}},{key:"crop",value:function(){return this.cropper.crop()}},{key:"move",value:function(e,t){return this.cropper.move(e,t)}},{key:"moveTo",value:function(e,t){return this.cropper.moveTo(e,t)}},{key:"zoom",value:function(e){return this.cropper.zoom(e)}},{key:"zoomTo",value:function(e){return this.cropper.zoomTo(e)}},{key:"rotate",value:function(e){return this.cropper.rotate(e)}},{key:"rotateTo",value:function(e){return this.cropper.rotateTo(e)}},{key:"enable",value:function(){return this.cropper.enable()}},{key:"disable",value:function(){return this.cropper.disable()}},{key:"reset",value:function(){return this.cropper.reset()}},{key:"clear",value:function(){return this.cropper.clear()}},{key:"replace",value:function(e,t){return this.cropper.replace(e,t)}},{key:"scale",value:function(e,t){return this.cropper.scale(e,t)}},{key:"scaleX",value:function(e){return this.cropper.scaleX(e)}},{key:"scaleY",value:function(e){return this.cropper.scaleY(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.src,r=t.alt,i=t.crossOrigin,o=t.style,s=t.className;return n.default.createElement("div",{style:o,className:s},n.default.createElement("img",{crossOrigin:i,ref:function(t){e.img=t},src:a,alt:void 0===r?"picture":r,style:{opacity:0}}))}}])&&c(a.prototype,r),o&&c(a,o),t}();f.propTypes={style:r.default.object,className:r.default.string,crossOrigin:r.default.string,src:r.default.string,alt:r.default.string,aspectRatio:r.default.number,dragMode:r.default.oneOf(["crop","move","none"]),data:r.default.shape({x:r.default.number,y:r.default.number,width:r.default.number,height:r.default.number,rotate:r.default.number,scaleX:r.default.number,scaleY:r.default.number}),scaleX:r.default.number,scaleY:r.default.number,enable:r.default.bool,cropBoxData:r.default.shape({left:r.default.number,top:r.default.number,width:r.default.number,height:r.default.number}),canvasData:r.default.shape({left:r.default.number,top:r.default.number,width:r.default.number,height:r.default.number}),zoomTo:r.default.number,moveTo:r.default.arrayOf(r.default.number),rotateTo:r.default.number,viewMode:r.default.oneOf([0,1,2,3]),preview:r.default.string,responsive:r.default.bool,restore:r.default.bool,checkCrossOrigin:r.default.bool,checkOrientation:r.default.bool,modal:r.default.bool,guides:r.default.bool,center:r.default.bool,highlight:r.default.bool,background:r.default.bool,autoCrop:r.default.bool,autoCropArea:r.default.number,movable:r.default.bool,rotatable:r.default.bool,scalable:r.default.bool,zoomable:r.default.bool,zoomOnTouch:r.default.bool,zoomOnWheel:r.default.bool,wheelZoomRatio:r.default.number,cropBoxMovable:r.default.bool,cropBoxResizable:r.default.bool,toggleDragModeOnDblclick:r.default.bool,minContainerWidth:r.default.number,minContainerHeight:r.default.number,minCanvasWidth:r.default.number,minCanvasHeight:r.default.number,minCropBoxWidth:r.default.number,minCropBoxHeight:r.default.number,ready:r.default.func,cropstart:r.default.func,cropmove:r.default.func,cropend:r.default.func,crop:r.default.func,zoom:r.default.func},f.defaultProps={src:null,dragMode:"crop",data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0};var g=f;t.default=g},1768:function(e,t,a){
/*!
 * Cropper.js v1.0.0-rc.3
 * https://github.com/fengyuanchen/cropperjs
 *
 * Copyright (c) 2017 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2017-07-07T12:56:42.462Z
 */
e.exports=function(){"use strict";var e={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=/^data:.*,/,i=/([a-z\d])([A-Z])/g,o=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,s=/\s+/,l=/^(width|height|left|top|marginLeft|marginTop)$/,c=/^\s+(.*)\s+$/,p="undefined"!=typeof window?window.navigator:null,u=p&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(p.userAgent),d=Object.prototype,h=d.toString,m=d.hasOwnProperty,f=(Array.prototype.slice,String.fromCharCode);function g(e){return h.call(e).slice(8,-1).toLowerCase()}function v(e){return"number"==typeof e&&!isNaN(e)}function b(e){return void 0===e}function y(e){return"object"===(void 0===e?"undefined":t(e))&&null!==e}function w(e){if(!y(e))return!1;try{var t=e.constructor,a=t.prototype;return t&&a&&m.call(a,"isPrototypeOf")}catch(e){return!1}}function x(e){return"function"===g(e)}function E(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(c,"$1")),e}function S(e,t){if(e&&x(t)){var a=void 0;if(r=e,(Array.isArray?Array.isArray(r):"array"===g(r))||v(e.length)){var n=e.length;for(a=0;a<n&&!1!==t.call(e,e[a],a,e);a++);}else y(e)&&Object.keys(e).forEach(function(a){t.call(e,e[a],a,e)})}var r;return e}function k(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(y(e)&&a.length>0){if(Object.assign)return Object.assign.apply(Object,[e].concat(a));a.forEach(function(t){y(t)&&Object.keys(t).forEach(function(a){e[a]=t[a]})})}return e}function N(e,t){for(var a=arguments.length,n=Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];return function(){for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return e.apply(t,n.concat(r))}}function C(e,t){var a=e.style;S(t,function(e,t){l.test(t)&&v(e)&&(e+="px"),a[t]=e})}function T(e,t){if(t)if(v(e.length))S(e,function(e){T(e,t)});else if(e.classList)e.classList.add(t);else{var a=E(e.className);a?a.indexOf(t)<0&&(e.className=a+" "+t):e.className=t}}function O(e,t){t&&(v(e.length)?S(e,function(e){O(e,t)}):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function U(e,t,a){t&&(v(e.length)?S(e,function(e){U(e,t,a)}):a?T(e,t):O(e,t))}function R(e){return e.replace(i,"$1-$2").toLowerCase()}function M(e,t){return y(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+R(t))}function V(e,t,a){y(a)?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-"+R(t),a)}function D(e,t){if(y(e[t]))delete e[t];else if(e.dataset)try{delete e.dataset[t]}catch(a){e.dataset[t]=null}else e.removeAttribute("data-"+R(t))}function j(e,t,a){var n=E(t).split(s);n.length>1?S(n,function(t){j(e,t,a)}):e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,a)}function I(e,t,a,n){var r=E(t).split(s),i=a;r.length>1?S(r,function(t){I(e,t,a)}):(n&&(a=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return j(e,t,a),i.apply(e,r)}),e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a))}function F(e,t,a){if(e.dispatchEvent){var n=void 0;return x(Event)&&x(CustomEvent)?n=b(a)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):b(a)?(n=document.createEvent("Event")).initEvent(t,!0,!0):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,a),e.dispatchEvent(n)}return!e.fireEvent||e.fireEvent("on"+t)}function L(e){var t=e||window.event;if(t.target||(t.target=t.srcElement||document),!v(t.pageX)&&v(t.clientX)){var a=e.target.ownerDocument||document,n=a.documentElement,r=a.body;t.pageX=t.clientX+((n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0)),t.pageY=t.clientY+((n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0))}return t}function W(e){var t=document.documentElement,a=e.getBoundingClientRect();return{left:a.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:a.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}}function P(e,t){return e.getElementsByTagName(t)}function B(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function _(e){return document.createElement(e)}function z(e,t){e.appendChild(t)}function Y(e){e.parentNode&&e.parentNode.removeChild(e)}function Z(e){var t=e.match(o);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function H(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t}function A(e){var t=[],a=e.translateX,n=e.translateY,r=e.rotate,i=e.scaleX,o=e.scaleY;v(a)&&0!==a&&t.push("translateX("+a+"px)"),v(n)&&0!==n&&t.push("translateY("+n+"px)"),v(r)&&0!==r&&t.push("rotate("+r+"deg)"),v(i)&&1!==i&&t.push("scaleX("+i+")"),v(o)&&1!==o&&t.push("scaleY("+o+")");var s=t.length?t.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function J(e,t){var a=Math.abs(e.degree)%180,n=(a>90?180-a:a)*Math.PI/180,r=Math.sin(n),i=Math.cos(n),o=e.width,s=e.height,l=e.aspectRatio,c=void 0,p=void 0;return t?p=(c=o/(i+r/l))/l:(c=o*i+s*r,p=o*r+s*i),{width:c,height:p}}function X(e,t,a){var n=_("canvas"),r=n.getContext("2d"),i=0,o=0,s=t.naturalWidth,l=t.naturalHeight,c=t.rotate,p=t.scaleX,u=t.scaleY,d=v(p)&&v(u)&&(1!==p||1!==u),h=v(c)&&0!==c,m=h||d,f=s*Math.abs(p||1),g=l*Math.abs(u||1),b=void 0,y=void 0,w=void 0;return d&&(b=f/2,y=g/2),h&&(w=J({width:f,height:g,degree:c}),f=w.width,g=w.height,b=f/2,y=g/2),n.width=f,n.height=g,a.fillColor&&(r.fillStyle=a.fillColor,r.fillRect(0,0,f,g)),m&&(i=-s/2,o=-l/2,r.save(),r.translate(b,y)),h&&r.rotate(c*Math.PI/180),d&&r.scale(p,u),r.imageSmoothingEnabled=!!a.imageSmoothingEnabled,a.imageSmoothingQuality&&(r.imageSmoothingQuality=a.imageSmoothingQuality),r.drawImage(e,Math.floor(i),Math.floor(o),Math.floor(s),Math.floor(l)),m&&r.restore(),n}function Q(e){var t=new DataView(e),a=t.byteLength,n=void 0,r=void 0,i=void 0,o=void 0,s=void 0,l=void 0,c=void 0,p=void 0,d=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(p=2;p<a;){if(255===t.getUint8(p)&&225===t.getUint8(p+1)){l=p;break}p++}if(l&&(r=l+10,"Exif"===function(e,t,a){var n="",r=t;for(a+=t;r<a;r++)n+=f(e.getUint8(r));return n}(t,l+4,4)&&(s=t.getUint16(r),((o=18761===s)||19789===s)&&42===t.getUint16(r+2,o)&&(i=t.getUint32(r+4,o))>=8&&(c=r+i))),c)for(a=t.getUint16(c,o),d=0;d<a;d++)if(p=c+12*d+2,274===t.getUint16(p,o)){p+=8,n=t.getUint16(p,o),u&&t.setUint16(p,1,o);break}return n}var q={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.options,t=this.element,a=this.container,n=this.cropper,r="cropper-hidden",i=void 0;T(n,r),O(t,r),this.containerData=i={width:Math.max(a.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(a.offsetHeight,Number(e.minContainerHeight)||100)},C(n,{width:i.width,height:i.height}),T(t,r),O(n,r)},initCanvas:function(){var e=this.options.viewMode,t=this.containerData,a=this.imageData,n=Math.abs(a.rotate)%180==90,r=n?a.naturalHeight:a.naturalWidth,i=n?a.naturalWidth:a.naturalHeight,o=r/i,s=t.width,l=t.height;t.height*o>t.width?3===e?s=t.height*o:l=t.width/o:3===e?l=t.width/o:s=t.height*o;var c={naturalWidth:r,naturalHeight:i,aspectRatio:o,width:s,height:l};c.oldLeft=c.left=(t.width-s)/2,c.oldTop=c.top=(t.height-l)/2,this.canvasData=c,this.limited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImageData=k({},a),this.initialCanvasData=k({},c)},limitCanvas:function(e,t){var a=this.options,n=a.viewMode,r=this.containerData,i=this.canvasData,o=i.aspectRatio,s=this.cropBoxData,l=this.cropped&&s;if(e){var c=Number(a.minCanvasWidth)||0,p=Number(a.minCanvasHeight)||0;n>1?(c=Math.max(c,r.width),p=Math.max(p,r.height),3===n&&(p*o>c?c=p*o:p=c/o)):n>0&&(c?c=Math.max(c,l?s.width:0):p?p=Math.max(p,l?s.height:0):l&&(c=s.width,(p=s.height)*o>c?c=p*o:p=c/o)),c&&p?p*o>c?p=c/o:c=p*o:c?p=c/o:p&&(c=p*o),i.minWidth=c,i.minHeight=p,i.maxWidth=1/0,i.maxHeight=1/0}if(t)if(n){var u=r.width-i.width,d=r.height-i.height;i.minLeft=Math.min(0,u),i.minTop=Math.min(0,d),i.maxLeft=Math.max(0,u),i.maxTop=Math.max(0,d),l&&this.limited&&(i.minLeft=Math.min(s.left,s.left+(s.width-i.width)),i.minTop=Math.min(s.top,s.top+(s.height-i.height)),i.maxLeft=s.left,i.maxTop=s.top,2===n&&(i.width>=r.width&&(i.minLeft=Math.min(0,u),i.maxLeft=Math.max(0,u)),i.height>=r.height&&(i.minTop=Math.min(0,d),i.maxTop=Math.max(0,d))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=r.width,i.maxTop=r.height},renderCanvas:function(e){var t=this.canvasData,a=this.imageData,n=a.rotate;if(this.rotated){this.rotated=!1;var r=J({width:a.width,height:a.height,degree:n}),i=r.width/r.height,o=1===a.aspectRatio;if(o||i!==t.aspectRatio){if(t.left-=(r.width-t.width)/2,t.top-=(r.height-t.height)/2,t.width=r.width,t.height=r.height,t.aspectRatio=i,t.naturalWidth=a.naturalWidth,t.naturalHeight=a.naturalHeight,o&&n%90||n%180){var s=J({width:a.naturalWidth,height:a.naturalHeight,degree:n});t.naturalWidth=s.width,t.naturalHeight=s.height}this.limitCanvas(!0,!1)}}(t.width>t.maxWidth||t.width<t.minWidth)&&(t.left=t.oldLeft),(t.height>t.maxHeight||t.height<t.minHeight)&&(t.top=t.oldTop),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),this.limitCanvas(!1,!0),t.oldLeft=t.left=Math.min(Math.max(t.left,t.minLeft),t.maxLeft),t.oldTop=t.top=Math.min(Math.max(t.top,t.minTop),t.maxTop),C(this.canvas,k({width:t.width,height:t.height},A({translateX:t.left,translateY:t.top}))),this.renderImage(),this.cropped&&this.limited&&this.limitCropBox(!0,!0),e&&this.output()},renderImage:function(e){var t=this.canvasData,a=this.imageData,n=void 0,r=void 0,i=void 0,o=void 0;a.rotate&&(r=J({width:t.width,height:t.height,degree:a.rotate,aspectRatio:a.aspectRatio},!0),i=r.width,o=r.height,n={width:i,height:o,left:(t.width-i)/2,top:(t.height-o)/2}),k(a,n||{width:t.width,height:t.height,left:0,top:0}),C(this.image,k({width:a.width,height:a.height},A(k({translateX:a.left,translateY:a.top},a)))),e&&this.output()},initCropBox:function(){var e=this.options,t=e.aspectRatio,a=Number(e.autoCropArea)||.8,n=this.canvasData,r={width:n.width,height:n.height};t&&(n.height*t>n.width?r.height=r.width/t:r.width=r.height*t),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*a),r.height=Math.max(r.minHeight,r.height*a),r.oldLeft=r.left=n.left+(n.width-r.width)/2,r.oldTop=r.top=n.top+(n.height-r.height)/2,this.initialCropBoxData=k({},r)},limitCropBox:function(e,t){var a=this.options,n=a.aspectRatio,r=this.containerData,i=this.canvasData,o=this.cropBoxData,s=this.limited;if(e){var l=Number(a.minCropBoxWidth)||0,c=Number(a.minCropBoxHeight)||0,p=Math.min(r.width,s?i.width:r.width),u=Math.min(r.height,s?i.height:r.height);l=Math.min(l,r.width),c=Math.min(c,r.height),n&&(l&&c?c*n>l?c=l/n:l=c*n:l?c=l/n:c&&(l=c*n),u*n>p?u=p/n:p=u*n),o.minWidth=Math.min(l,p),o.minHeight=Math.min(c,u),o.maxWidth=p,o.maxHeight=u}t&&(s?(o.minLeft=Math.max(0,i.left),o.minTop=Math.max(0,i.top),o.maxLeft=Math.min(r.width,i.left+i.width)-o.width,o.maxTop=Math.min(r.height,i.top+i.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=r.width-o.width,o.maxTop=r.height-o.height))},renderCropBox:function(){var e=this.options,t=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.oldLeft=a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),e.movable&&e.cropBoxMovable&&V(this.face,"action",a.width===t.width&&a.height===t.height?"move":"all"),C(this.cropBox,k({width:a.width,height:a.height},A({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),this.complete&&F(this.element,"crop",this.getData())}},G={initPreview:function(){var e=this.options.preview,t=_("img"),a=this.crossOrigin,n=a?this.crossOriginUrl:this.url;if(a&&(t.crossOrigin=a),t.src=n,z(this.viewBox,t),this.image2=t,e){var r=e.querySelector?[e]:document.querySelectorAll(e);this.previews=r,S(r,function(e){var t=_("img");V(e,"preview",{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),a&&(t.crossOrigin=a),t.src=n,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),z(e,t)})}},resetPreview:function(){S(this.previews,function(e){var t=M(e,"preview");C(e,{width:t.width,height:t.height}),e.innerHTML=t.html,D(e,"preview")})},preview:function(){var e=this.imageData,t=this.canvasData,a=this.cropBoxData,n=a.width,r=a.height,i=e.width,o=e.height,s=a.left-t.left-e.left,l=a.top-t.top-e.top;this.cropped&&!this.disabled&&(C(this.image2,k({width:i,height:o},A(k({translateX:-s,translateY:-l},e)))),S(this.previews,function(t){var a=M(t,"preview"),c=a.width,p=a.height,u=c,d=p,h=1;n&&(d=r*(h=c/n)),r&&d>p&&(u=n*(h=p/r),d=p),C(t,{width:u,height:d}),C(P(t,"img")[0],k({width:i*h,height:o*h},A(k({translateX:-s*h,translateY:-l*h},e))))}))}},K="undefined"!=typeof window?window.PointerEvent:null,$=K?"pointerdown":"touchstart mousedown",ee=K?"pointermove":"touchmove mousemove",te=K?" pointerup pointercancel":"touchend touchcancel mouseup",ae={bind:function(){var e=this.options,t=this.element,a=this.cropper;x(e.cropstart)&&I(t,"cropstart",e.cropstart),x(e.cropmove)&&I(t,"cropmove",e.cropmove),x(e.cropend)&&I(t,"cropend",e.cropend),x(e.crop)&&I(t,"crop",e.crop),x(e.zoom)&&I(t,"zoom",e.zoom),I(a,$,this.onCropStart=N(this.cropStart,this)),e.zoomable&&e.zoomOnWheel&&I(a,"wheel mousewheel DOMMouseScroll",this.onWheel=N(this.wheel,this)),e.toggleDragModeOnDblclick&&I(a,"dblclick",this.onDblclick=N(this.dblclick,this)),I(document,ee,this.onCropMove=N(this.cropMove,this)),I(document,te,this.onCropEnd=N(this.cropEnd,this)),e.responsive&&I(window,"resize",this.onResize=N(this.resize,this))},unbind:function(){var e=this.options,t=this.element,a=this.cropper;x(e.cropstart)&&j(t,"cropstart",e.cropstart),x(e.cropmove)&&j(t,"cropmove",e.cropmove),x(e.cropend)&&j(t,"cropend",e.cropend),x(e.crop)&&j(t,"crop",e.crop),x(e.zoom)&&j(t,"zoom",e.zoom),j(a,$,this.onCropStart),e.zoomable&&e.zoomOnWheel&&j(a,"wheel mousewheel DOMMouseScroll",this.onWheel),e.toggleDragModeOnDblclick&&j(a,"dblclick",this.onDblclick),j(document,ee,this.onCropMove),j(document,te,this.onCropEnd),e.responsive&&j(window,"resize",this.onResize)}},ne=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;function re(e,t){var a=e.pageX,n=e.pageY,r={endX:a,endY:n};return t?r:k({startX:a,startY:n},r)}var ie={resize:function(){var e=this,t=e.options,a=e.container,n=e.containerData,r=Number(t.minContainerWidth)||200,i=Number(t.minContainerHeight)||100;if(!e.disabled&&n.width!==r&&n.height!==i){var o,s,l=a.offsetWidth/n.width;1===l&&a.offsetHeight===n.height||(o=void 0,s=void 0,t.restore&&(o=e.getCanvasData(),s=e.getCropBoxData()),e.render(),t.restore&&(e.setCanvasData(S(o,function(e,t){o[t]=e*l})),e.setCropBoxData(S(s,function(e,t){s[t]=e*l}))))}},dblclick:function(){var e,t;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=this.dragBox,t="cropper-crop",(e.classList?e.classList.contains(t):e.className.indexOf(t)>-1)?"move":"crop"))},wheel:function(e){var t=this,a=L(e),n=Number(t.options.wheelZoomRatio)||.1,r=1;t.disabled||(a.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?r=a.deltaY>0?1:-1:a.wheelDelta?r=-a.wheelDelta/120:a.detail&&(r=a.detail>0?1:-1),t.zoom(-r*n,a)))},cropStart:function(e){if(!this.disabled){var t=this.options,a=this.pointers,n=L(e),r=void 0;n.changedTouches?S(n.changedTouches,function(e){a[e.identifier]=re(e)}):a[n.pointerId||0]=re(n),r=Object.keys(a).length>1&&t.zoomable&&t.zoomOnTouch?"zoom":M(n.target,"action"),ne.test(r)&&!1!==F(this.element,"cropstart",{originalEvent:n,action:r})&&(n.preventDefault(),this.action=r,this.cropping=!1,"crop"===r&&(this.cropping=!0,T(this.dragBox,"cropper-modal")))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var a=this.pointers,n=L(e);n.preventDefault(),!1!==F(this.element,"cropmove",{originalEvent:n,action:t})&&(n.changedTouches?S(n.changedTouches,function(e){k(a[e.identifier],re(e,!0))}):k(a[n.pointerId||0],re(n,!0)),this.change(n))}},cropEnd:function(e){if(!this.disabled){var t=this.action,a=this.pointers,n=L(e);n.changedTouches?S(n.changedTouches,function(e){delete a[e.identifier]}):delete a[n.pointerId||0],t&&(n.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,U(this.dragBox,"cropper-modal",this.cropped&&this.options.modal)),F(this.element,"cropend",{originalEvent:n,action:t}))}}},oe={change:function(e){var t=this.options,a=this.containerData,n=this.canvasData,r=this.cropBoxData,i=t.aspectRatio,o=this.action,s=r.width,l=r.height,c=r.left,p=r.top,u=c+s,d=p+l,h=0,m=0,f=a.width,g=a.height,v=!0,b=void 0;!i&&e.shiftKey&&(i=s&&l?s/l:1),this.limited&&(h=r.minLeft,m=r.minTop,f=h+Math.min(a.width,n.width,n.left+n.width),g=m+Math.min(a.height,n.height,n.top+n.height));var y=this.pointers,w=y[Object.keys(y)[0]],x={x:w.endX-w.startX,y:w.endY-w.startY};switch(i&&(x.X=x.y*i,x.Y=x.x/i),o){case"all":c+=x.x,p+=x.y;break;case"e":if(x.x>=0&&(u>=f||i&&(p<=m||d>=g))){v=!1;break}s+=x.x,i&&(l=s/i,p-=x.Y/2),s<0&&(o="w",s=0);break;case"n":if(x.y<=0&&(p<=m||i&&(c<=h||u>=f))){v=!1;break}l-=x.y,p+=x.y,i&&(s=l*i,c+=x.X/2),l<0&&(o="s",l=0);break;case"w":if(x.x<=0&&(c<=h||i&&(p<=m||d>=g))){v=!1;break}s-=x.x,c+=x.x,i&&(l=s/i,p+=x.Y/2),s<0&&(o="e",s=0);break;case"s":if(x.y>=0&&(d>=g||i&&(c<=h||u>=f))){v=!1;break}l+=x.y,i&&(s=l*i,c-=x.X/2),l<0&&(o="n",l=0);break;case"ne":if(i){if(x.y<=0&&(p<=m||u>=f)){v=!1;break}l-=x.y,p+=x.y,s=l*i}else x.x>=0?u<f?s+=x.x:x.y<=0&&p<=m&&(v=!1):s+=x.x,x.y<=0?p>m&&(l-=x.y,p+=x.y):(l-=x.y,p+=x.y);s<0&&l<0?(o="sw",l=0,s=0):s<0?(o="nw",s=0):l<0&&(o="se",l=0);break;case"nw":if(i){if(x.y<=0&&(p<=m||c<=h)){v=!1;break}l-=x.y,p+=x.y,s=l*i,c+=x.X}else x.x<=0?c>h?(s-=x.x,c+=x.x):x.y<=0&&p<=m&&(v=!1):(s-=x.x,c+=x.x),x.y<=0?p>m&&(l-=x.y,p+=x.y):(l-=x.y,p+=x.y);s<0&&l<0?(o="se",l=0,s=0):s<0?(o="ne",s=0):l<0&&(o="sw",l=0);break;case"sw":if(i){if(x.x<=0&&(c<=h||d>=g)){v=!1;break}s-=x.x,c+=x.x,l=s/i}else x.x<=0?c>h?(s-=x.x,c+=x.x):x.y>=0&&d>=g&&(v=!1):(s-=x.x,c+=x.x),x.y>=0?d<g&&(l+=x.y):l+=x.y;s<0&&l<0?(o="ne",l=0,s=0):s<0?(o="se",s=0):l<0&&(o="nw",l=0);break;case"se":if(i){if(x.x>=0&&(u>=f||d>=g)){v=!1;break}s+=x.x,l=s/i}else x.x>=0?u<f?s+=x.x:x.y>=0&&d>=g&&(v=!1):s+=x.x,x.y>=0?d<g&&(l+=x.y):l+=x.y;s<0&&l<0?(o="nw",l=0,s=0):s<0?(o="sw",s=0):l<0&&(o="ne",l=0);break;case"move":this.move(x.x,x.y),v=!1;break;case"zoom":this.zoom(function(e){var t=k({},e),a=[];return S(e,function(e,n){delete t[n],S(t,function(t){var n=Math.abs(e.startX-t.startX),r=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),o=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+r*r),l=(Math.sqrt(i*i+o*o)-s)/s;a.push(l)})}),a.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),a[0]}(y),e),v=!1;break;case"crop":if(!x.x||!x.y){v=!1;break}b=W(this.cropper),c=w.startX-b.left,p=w.startY-b.top,s=r.minWidth,l=r.minHeight,x.x>0?o=x.y>0?"se":"ne":x.x<0&&(c-=s,o=x.y>0?"sw":"nw"),x.y<0&&(p-=l),this.cropped||(O(this.cropBox,"cropper-hidden"),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}v&&(r.width=s,r.height=l,r.left=c,r.top=p,this.action=o,this.renderCropBox()),S(y,function(e){e.startX=e.endX,e.startY=e.endY})}},se={crop:function(){return this.ready&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&T(this.dragBox,"cropper-modal"),O(this.cropBox,"cropper-hidden")),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=k({},this.initialImageData),this.canvasData=k({},this.initialCanvasData),this.cropBoxData=k({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(k(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),O(this.dragBox,"cropper-modal"),T(this.cropBox,"cropper-hidden")),this},replace:function(e,t){return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.image2.src=e,S(this.previews,function(t){P(t,"img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.load(e))),this},enable:function(){return this.ready&&(this.disabled=!1,O(this.cropper,"cropper-disabled")),this},disable:function(){return this.ready&&(this.disabled=!0,T(this.cropper,"cropper-disabled")),this},destroy:function(){var e=this.element,t=this.image;return this.loaded?(this.isImg&&this.replaced&&(e.src=this.originalUrl),this.unbuild(),O(e,"cropper-hidden")):this.isImg?j(e,"load",this.onStart):t&&Y(t),D(e,"cropper"),this},move:function(e,t){var a=this.canvasData;return this.moveTo(b(e)?e:a.left+Number(e),b(t)?t:a.top+Number(t))},moveTo:function(e,t){var a=this.canvasData,n=!1;return b(t)&&(t=e),e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(v(e)&&(a.left=e,n=!0),v(t)&&(a.top=t,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,t){var a=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(a.width*e/a.naturalWidth,t)},zoomTo:function(e,t){var a=this.options,n=this.canvasData,r=n.width,i=n.height,o=n.naturalWidth,s=n.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&a.zoomable){var l=o*e,c=s*e;if(!1===F(this.element,"zoom",{originalEvent:t,oldRatio:r/o,ratio:l/o}))return this;if(t){var p=this.pointers,u=W(this.cropper),d=p&&Object.keys(p).length?function(e){var t=0,a=0,n=0;return S(e,function(e){var r=e.startX,i=e.startY;t+=r,a+=i,n+=1}),{pageX:t/=n,pageY:a/=n}}(p):{pageX:t.pageX,pageY:t.pageY};n.left-=(l-r)*((d.pageX-u.left-n.left)/r),n.top-=(c-i)*((d.pageY-u.top-n.top)/i)}else n.left-=(l-r)/2,n.top-=(c-i)/2;n.width=l,n.height=c,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return v(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.rotated=!0,this.renderCanvas(!0)),this},scale:function(e,t){var a=this.imageData,n=!1;return b(t)&&(t=e),e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(v(e)&&(a.scaleX=e,n=!0),v(t)&&(a.scaleY=t,n=!0),n&&this.renderImage(!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,v(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(v(t)?t:1,e)},getData:function(e){var t=this.options,a=this.imageData,n=this.canvasData,r=this.cropBoxData,i=void 0,o=void 0;return this.ready&&this.cropped?(o={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height},i=a.width/a.naturalWidth,S(o,function(t,a){t/=i,o[a]=e?Math.round(t):t})):o={x:0,y:0,width:0,height:0},t.rotatable&&(o.rotate=a.rotate||0),t.scalable&&(o.scaleX=a.scaleX||1,o.scaleY=a.scaleY||1),o},setData:function(e){var t=this.options,a=this.imageData,n=this.canvasData,r={},i=void 0,o=void 0,s=void 0;return x(e)&&(e=e.call(this.element)),this.ready&&!this.disabled&&w(e)&&(t.rotatable&&v(e.rotate)&&e.rotate!==a.rotate&&(a.rotate=e.rotate,this.rotated=i=!0),t.scalable&&(v(e.scaleX)&&e.scaleX!==a.scaleX&&(a.scaleX=e.scaleX,o=!0),v(e.scaleY)&&e.scaleY!==a.scaleY&&(a.scaleY=e.scaleY,o=!0)),i?this.renderCanvas():o&&this.renderImage(),s=a.width/a.naturalWidth,v(e.x)&&(r.left=e.x*s+n.left),v(e.y)&&(r.top=e.y*s+n.top),v(e.width)&&(r.width=e.width*s),v(e.height)&&(r.height=e.height*s),this.setCropBoxData(r)),this},getContainerData:function(){return this.ready?this.containerData:{}},getImageData:function(){return this.loaded?this.imageData:{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&S(["left","top","width","height","naturalWidth","naturalHeight"],function(a){t[a]=e[a]}),t},setCanvasData:function(e){var t=this.canvasData,a=t.aspectRatio;return x(e)&&(e=e.call(this.element)),this.ready&&!this.disabled&&w(e)&&(v(e.left)&&(t.left=e.left),v(e.top)&&(t.top=e.top),v(e.width)?(t.width=e.width,t.height=e.width/a):v(e.height)&&(t.height=e.height,t.width=e.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t=void 0;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,a=this.options.aspectRatio,n=void 0,r=void 0;return x(e)&&(e=e.call(this.element)),this.ready&&this.cropped&&!this.disabled&&w(e)&&(v(e.left)&&(t.left=e.left),v(e.top)&&(t.top=e.top),v(e.width)&&e.width!==t.width&&(n=!0,t.width=e.width),v(e.height)&&e.height!==t.height&&(r=!0,t.height=e.height),a&&(n?t.height=t.width/a:r&&(t.width=t.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(w(e)||(e={}),!t.cropped)return X(t.image,t.imageData,e);var a=t.getData(),n=a.width,r=a.height,i=n/r,o=void 0,s=void 0,l=void 0;w(e)&&(o=e.width,s=e.height,o?(s=o/i,l=o/n):s&&(o=s*i,l=s/r));var c=Math.floor(o||n),p=Math.floor(s||r),u=_("canvas"),d=u.getContext("2d");u.width=c,u.height=p,e.fillColor&&(d.fillStyle=e.fillColor,d.fillRect(0,0,c,p));var h,m,f,g,v,b,y,x,E,S,k,N,C,T=(h=X(t.image,t.imageData,e),m=h.width,f=h.height,g=t.canvasData,v=[h],b=a.x+g.naturalWidth*(Math.abs(a.scaleX||1)-1)/2,y=a.y+g.naturalHeight*(Math.abs(a.scaleY||1)-1)/2,x=void 0,E=void 0,S=void 0,k=void 0,N=void 0,C=void 0,b<=-n||b>m?b=x=S=N=0:b<=0?(S=-b,b=0,x=N=Math.min(m,n+b)):b<=m&&(S=0,x=N=Math.min(n,m-b)),x<=0||y<=-r||y>f?y=E=k=C=0:y<=0?(k=-y,y=0,E=C=Math.min(f,r+y)):y<=f&&(k=0,E=C=Math.min(r,f-y)),v.push(Math.floor(b),Math.floor(y),Math.floor(x),Math.floor(E)),l&&(S*=l,k*=l,N*=l,C*=l),N>0&&C>0&&v.push(Math.floor(S),Math.floor(k),Math.floor(N),Math.floor(C)),v);return d.imageSmoothingEnabled=!!e.imageSmoothingEnabled,e.imageSmoothingQuality&&(d.imageSmoothingQuality=e.imageSmoothingQuality),d.drawImage.apply(d,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(T)),u},setAspectRatio:function(e){var t=this.options;return this.disabled||b(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,a=this.dragBox,n=this.face,r=void 0,i=void 0;return this.loaded&&!this.disabled&&(r="crop"===e,i=t.movable&&"move"===e,V(a,"action",e=r||i?e:"none"),U(a,"cropper-crop",r),U(a,"cropper-move",i),t.cropBoxMovable||(V(n,"action",e),U(n,"cropper-crop",r),U(n,"cropper-move",i))),this}},le=/^data:/,ce=/^data:image\/jpeg;base64,/,pe=void 0,ue=function(){function t(n,r){a(this,t),this.element=n,this.options=k({},e,w(r)&&r),this.loaded=!1,this.ready=!1,this.complete=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.replaced=!1,this.limited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvasData=null,this.cropBoxData=null,this.previews=null,this.pointers={},this.init()}return n(t,[{key:"init",value:function(){var e=this.element,t=e.tagName.toLowerCase(),a=void 0;if(!M(e,"cropper")){if(V(e,"cropper",this),"img"===t){if(this.isImg=!0,this.originalUrl=a=e.getAttribute("src"),!a)return;a=e.src}else"canvas"===t&&window.HTMLCanvasElement&&(a=e.toDataURL());this.load(a)}}},{key:"load",value:function(e){var t=this,a=t.options,n=t.element;if(e)if(t.url=e,t.imageData={},a.checkOrientation&&window.ArrayBuffer)if(le.test(e))ce.test(e)?t.read(function(e){var t=e.replace(r,""),a=atob(t),n=a.length,i=new ArrayBuffer(n),o=new Uint8Array(i),s=void 0;for(s=0;s<n;s++)o[s]=a.charCodeAt(s);return i}(e)):t.clone();else{var i=new XMLHttpRequest;i.onerror=i.onabort=function(){t.clone()},i.onload=function(){t.read(i.response)},a.checkCrossOrigin&&Z(e)&&n.crossOrigin&&(e=H(e)),i.open("get",e),i.responseType="arraybuffer",i.withCredentials="use-credentials"===n.crossOrigin,i.send()}else t.clone()}},{key:"read",value:function(e){var t=this.options,a=Q(e),n=this.imageData,r=0,i=1,o=1;if(a>1)switch(this.url=function(e){var t=new Uint8Array(e),a=t.length,n="",r=void 0;for(r=0;r<a;r++)n+=f(t[r]);return"data:image/jpeg;base64,"+btoa(n)}(e),a){case 2:i=-1;break;case 3:r=-180;break;case 4:o=-1;break;case 5:r=90,o=-1;break;case 6:r=90;break;case 7:r=90,i=-1;break;case 8:r=-90}t.rotatable&&(n.rotate=r),t.scalable&&(n.scaleX=i,n.scaleY=o),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,a=void 0,n=void 0,r=void 0,i=void 0;this.options.checkCrossOrigin&&Z(t)&&((a=e.crossOrigin)?n=t:(a="anonymous",n=H(t))),this.crossOrigin=a,this.crossOriginUrl=n;var o=_("img");a&&(o.crossOrigin=a),o.src=n||t,this.image=o,this.onStart=r=N(this.start,this),this.onStop=i=N(this.stop,this),this.isImg?e.complete?this.start():I(e,"load",r):(I(o,"load",r),I(o,"error",i),T(o,"cropper-hide"),e.parentNode.insertBefore(o,e.nextSibling))}},{key:"start",value:function(e){var t=this,a=t.isImg?t.element:t.image;e&&(j(a,"load",t.onStart),j(a,"error",t.onStop)),function(e,t){if(!e.naturalWidth||u){var a=_("img");a.onload=function(){t(this.width,this.height)},a.src=e.src}else t(e.naturalWidth,e.naturalHeight)}(a,function(e,a){k(t.imageData,{naturalWidth:e,naturalHeight:a,aspectRatio:e/a}),t.loaded=!0,t.build()})}},{key:"stop",value:function(){var e=this.image;j(e,"load",this.onStart),j(e,"error",this.onStop),Y(e),this.image=null}},{key:"build",value:function(){var e=this,t=e.options,a=e.element,n=e.image,r=void 0,i=void 0,o=void 0,s=void 0,l=void 0,c=void 0;if(e.loaded){e.ready&&e.unbuild();var p=_("div");p.innerHTML='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',e.container=r=a.parentNode,e.cropper=i=B(p,"cropper-container")[0],e.canvas=o=B(i,"cropper-canvas")[0],e.dragBox=s=B(i,"cropper-drag-box")[0],e.cropBox=l=B(i,"cropper-crop-box")[0],e.viewBox=B(i,"cropper-view-box")[0],e.face=c=B(l,"cropper-face")[0],z(o,n),T(a,"cropper-hidden"),r.insertBefore(i,a.nextSibling),e.isImg||O(n,"cropper-hide"),e.initPreview(),e.bind(),t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,e.cropped=t.autoCrop,t.autoCrop?t.modal&&T(s,"cropper-modal"):T(l,"cropper-hidden"),t.guides||T(B(l,"cropper-dashed"),"cropper-hidden"),t.center||T(B(l,"cropper-center"),"cropper-hidden"),t.background&&T(i,"cropper-bg"),t.highlight||T(c,"cropper-invisible"),t.cropBoxMovable&&(T(c,"cropper-move"),V(c,"action","all")),t.cropBoxResizable||(T(B(l,"cropper-line"),"cropper-hidden"),T(B(l,"cropper-point"),"cropper-hidden")),e.setDragMode(t.dragMode),e.render(),e.ready=!0,e.setData(t.data),e.completing=setTimeout(function(){x(t.ready)&&I(a,"ready",t.ready,!0),F(a,"ready"),F(a,"crop",e.getData()),e.complete=!0},0)}}},{key:"unbuild",value:function(){this.ready&&(this.complete||clearTimeout(this.completing),this.ready=!1,this.complete=!1,this.initialImageData=null,this.initialCanvasData=null,this.initialCropBoxData=null,this.containerData=null,this.canvasData=null,this.cropBoxData=null,this.unbind(),this.resetPreview(),this.previews=null,this.viewBox=null,this.cropBox=null,this.dragBox=null,this.canvas=null,this.container=null,Y(this.cropper),this.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=pe,t}},{key:"setDefaults",value:function(t){k(e,w(t)&&t)}}]),t}();return k(ue.prototype,q),k(ue.prototype,G),k(ue.prototype,ae),k(ue.prototype,ie),k(ue.prototype,oe),k(ue.prototype,se),"undefined"!=typeof window&&(pe=window.Cropper,window.Cropper=ue),ue}()},1859:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=(a(1765),a(48)),o=a(1767),s=a.n(o);a(1769),a(1606);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e,a,n,r,o,s,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return n=this,r=(e=p(t)).call.apply(e,[this].concat(h)),a=!r||"object"!==l(r)&&"function"!=typeof r?u(n):r,o=u(a),c=function(){var e=a.props.confirm;if(void 0!==a.cropper.getCroppedCanvas()){var t=new FormData,n=Object(i.r)(a.cropper.getCroppedCanvas().toDataURL());t.append("uploadFile",n),e(t)}},(s="cropImage")in o?Object.defineProperty(o,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[s]=c,a}var a,o,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,n["Component"]),a=t,(o=[{key:"render",value:function(){var e=this,t=this.props,a=t.isShow,n=t.src;return r.a.createElement("div",{className:"img-corpper-warp",style:{display:a?"block":"none"}},r.a.createElement("div",{className:"mask"}),r.a.createElement("div",{className:"img-corpper-contain"},r.a.createElement(s.a,{ref:function(t){e.cropper=t},src:n,style:{height:"auto",width:"100%",margin:"0 auto 18px"},aspectRatio:280/204,dragMode:"move",guides:!0}),r.a.createElement("div",{className:"confirm-btn",onClick:function(){return e.cropImage()}},"确认修改")))}}])&&c(a.prototype,o),h&&c(a,h),t}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return w});var w=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=g(t).call(this,e),a=!r||"object"!==m(r)&&"function"!=typeof r?v(n):r,y(v(a),"selectImg",function(e){e.preventDefault(),a.setState({filePath:e.target.value});var t=[];e.dataTransfer?e.target&&(t=e.dataTransfer.files):t=e.target.files;var n=t[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(){a.setState({imgUrl:r.result})},a.setState({isShowImgCorpper:!0})}),y(v(a),"submitImg",function(e,t){var n=a.props.setUrl,r=v(a);r.setState({isShowImgCorpper:!1,isUploading:!0}),Object(i.l)("POST","/pic/upload",e,function(e){1===e.code&&(r.setState({imgUrl:e.obj,isFinish:!0}),n(e.obj)),t&&t(e)})}),y(v(a),"delFile",function(){a.setState({imgUrl:"",filePath:"",isFinish:!1,isMask:!1,isUploading:!1,showPreview:!1,isShowImgCorpper:!1}),a.props.setUrl("")}),a.state={imgUrl:e.url?e.url:"",filePath:"",isFinish:!!e.url,isMask:!1,isUploading:!1,showPreview:!1,isShowImgCorpper:!1},a}var a,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,n["Component"]),a=t,(o=[{key:"render",value:function(){var e=this,t=this.state,a=t.imgUrl,n=t.isFinish,i=t.isMask,o=t.showPreview,s=t.isUploading,l=t.isShowImgCorpper,c=t.filePath;return r.a.createElement("div",{className:"upload-img"},r.a.createElement("div",{className:"upload-img-select",style:{display:n?"none":"block"}},r.a.createElement("div",{className:"select-box",style:{display:s?"none":"block"}},r.a.createElement("div",{className:"select-bg"},r.a.createElement("i",{className:"iconfont iconfont-add"}),r.a.createElement("div",null,"上传图片")),r.a.createElement("input",{type:"file",onChange:function(t){return e.selectImg(t)},value:c})),r.a.createElement("div",{className:"uploading-box",style:{display:s?"block":"none"}},r.a.createElement("div",null,"文件上传中"),r.a.createElement("div",{className:"upload-img-progress"},r.a.createElement("div",{className:"upload-img-progress-bg"},r.a.createElement("div",{className:"upload-img-progress-bar"}))))),r.a.createElement("div",{className:"upload-img-finish",onMouseEnter:function(){return e.setState({isMask:!0})},onMouseLeave:function(){return e.setState({isMask:!1})},style:{display:n?"block":"none"}},r.a.createElement("div",{className:"img-content"},r.a.createElement("img",{src:"".concat(a)}),r.a.createElement("div",{className:"upload-img-mask",style:{zIndex:i?"5":"-1"}},r.a.createElement("i",{onClick:function(){return e.setState({showPreview:!0})},className:"iconfont iconfont-look"}),r.a.createElement("i",{onClick:function(){return e.delFile()},className:"iconfont iconfont-del"})))),r.a.createElement("div",{className:"upload-img-preview",style:{display:o?"block":"none"}},r.a.createElement("div",{className:"preview-contain"},r.a.createElement("div",{onClick:function(){return e.setState({showPreview:!1})},className:"mask"}),r.a.createElement("div",{className:"img-preview-body"},r.a.createElement("div",{onClick:function(){return e.setState({showPreview:!1})},className:"close iconfont iconfont-close"}),r.a.createElement("div",{className:"img-content"},r.a.createElement("img",{src:a}))))),r.a.createElement(h,{isShow:l,src:a,confirm:function(t,a){return e.submitImg(t,a)},close:function(){return e.setState({isShowImgCorpper:!1})}}))}}])&&f(a.prototype,o),s&&f(a,s),t}()}}]);