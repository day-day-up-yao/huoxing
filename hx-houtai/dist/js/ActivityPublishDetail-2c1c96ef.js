(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1484:function(e,a,t){"use strict";t.r(a),function(e){t(675);var n=t(676),c=t.n(n),r=(t(1381),t(1382)),s=t.n(r),i=(t(1383),t(1384)),o=t.n(i),l=(t(247),t(183)),m=t.n(l),u=(t(361),t(20)),p=t.n(u),f=(t(1376),t(1377)),d=t.n(f),E=t(0),y=t.n(E),b=t(246),v=t(10),N=t(1605),h=t(1655),g=t(48);t(1661),t(1610);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){return(w=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function P(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,a){return(j=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function k(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var C=d.a.confirm,I=function(a){function t(){var e,a,n;return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=S(t).call(this),e=!n||"object"!==O(n)&&"function"!=typeof n?_(a):n,k(_(e),"edit",function(){var a=e.props.info;v.hashHistory.push({pathname:"/activityPublish-send",query:{id:a.id}}),sessionStorage.setItem("hx_content",JSON.stringify(a))}),k(_(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),k(_(e),"showModal",function(a){e.setState({previewVisible:!0,previewImage:a})}),e.state={isEdit:!1,loading:!0,previewVisible:!1,previewImage:""},e}var n,r,i;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&j(e,a)}(t,E["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.dispatch,n=a.location;t(Object(h.b)({id:n.query.id},function(){e.setState({loading:!1})}))}},{key:"_delActivityPublish",value:function(){var e=this.props.location;C({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={status:-1,id:e.query.id};Object(g.i)("POST","/news/status",function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(a){k(e,a,t[a])})}return e}({},a),function(e){1===e.code?(p.a.success("删除成功"),v.hashHistory.goBack()):p.a.error(e.msg)})}})}},{key:"_forbidcomment",value:function(a){var t=this.props,n=t.location,c=t.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(g.i)("POST","/activityPublish/forbidcomment",r,function(e){200===e.status?c(Object(h.b)({id:n.query.id})):p.a.error(e.msg)})}},{key:"_isTop",value:function(a){var t=this.props,n=t.location,c=t.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(a)?"0":"1"};Object(g.i)("POST","/activityPublish/top",r,function(e){200===e.status?c(Object(h.b)({id:n.query.id})):p.a.error(e.msg)})}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"channelName",value:function(e){var a="";return this.props.channelList.map(function(t,n){parseInt(t.value)===e&&(a=t.label)}),a}},{key:"render",value:function(){var e=this,a={md:{span:6},sm:{span:12}},t={md:{span:8},sm:{span:15}},n=this.props.info;return y.a.createElement(c.a,{spinning:this.state.loading,size:"large"},n.id?y.a.createElement("div",{className:"activityPublish-detail"},y.a.createElement(s.a,null,y.a.createElement(o.a,{span:1},y.a.createElement(m.a,{shape:"circle",icon:"arrow-left",onClick:function(){return v.hashHistory.goBack()}})),y.a.createElement(o.a,{className:"text-right",span:20,offset:3},y.a.createElement(m.a,{onClick:this.edit,className:"mr10",type:"primary"},y.a.createElement(N.a,{type:"icon-edit"}),"编辑"))),y.a.createElement(s.a,{className:"news-detail-info"},y.a.createElement(o.a,w({className:"section"},a),y.a.createElement("span",{className:"name"},"举办方："),y.a.createElement("span",{className:"desc"},n.sponsor," ")),y.a.createElement(o.a,w({className:"section"},a),y.a.createElement("span",{className:"name"},"联系方式："),y.a.createElement("span",{className:"desc"},n.connection)),y.a.createElement(o.a,w({className:"section"},a),y.a.createElement("span",{className:"name"},"费用："),y.a.createElement("span",{className:"desc"},n.fee)),y.a.createElement(o.a,w({className:"section"},a),y.a.createElement("span",{className:"name"},"人数："),y.a.createElement("span",{className:"desc"},n.numPeople)),y.a.createElement(o.a,w({className:"section"},a),y.a.createElement("span",{className:"name"},"推荐："),y.a.createElement("span",{className:"desc"},"".concat(n.recommend&&1===parseInt(n.recommend)?"是":"否")," ")),y.a.createElement(o.a,{className:"section",span:18},y.a.createElement("span",{className:"name"},"报名链接："),y.a.createElement("a",{title:n.url,href:n.url,target:"_blank"},n.url))),y.a.createElement(s.a,{className:"news-title"},y.a.createElement(o.a,w({className:"section"},t),y.a.createElement("span",{className:"name"},"开始时间："),y.a.createElement("span",{className:"desc"},Object(g.w)(n.startTime))),y.a.createElement(o.a,w({className:"section"},t),y.a.createElement("span",{className:"name"},"结束时间："),y.a.createElement("span",{className:"desc"},Object(g.w)(n.endTime)))),y.a.createElement(s.a,{className:"news-title"},y.a.createElement(o.a,w({className:"section"},t),y.a.createElement("span",{className:"name"},"举办城市："),y.a.createElement("span",{className:"desc"},"others"===n.place?"其他":"overseas"===n.place?"海外":n.place," ")),y.a.createElement(o.a,w({className:"section"},t),y.a.createElement("span",{className:"name"},"具体地址："),y.a.createElement("span",{className:"desc"},n.detailPlace))),Object(g.G)(n.coverPic)?y.a.createElement("div",{style:{margin:"15px 0"}},Object(g.G)(n.video)&&0!==JSON.parse(n.video).length?y.a.createElement(s.a,{className:"news-cover-img"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"PC-视频封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(n.coverPic).video_pc)},src:"".concat(JSON.parse(n.coverPic).video_pc)})),y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"M-视频封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(n.coverPic).video_m)},src:"".concat(JSON.parse(n.coverPic).video_m)}))):"",y.a.createElement(s.a,{className:"news-cover-img"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"PC-活动封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(n.coverPic).pc)},src:"".concat(JSON.parse(n.coverPic).pc)}))),y.a.createElement(s.a,{className:"news-cover-img"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"PC-推荐位封面："),JSON.parse(n.coverPic).pc_recommend&&""!==JSON.parse(n.coverPic).pc_recommend?y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(n.coverPic).pc_recommend)},src:"".concat(JSON.parse(n.coverPic).pc_recommend)}):y.a.createElement("span",{style:{padding:6}},"暂无推荐位封面"))),y.a.createElement(s.a,{className:"news-cover-img"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-活动封面："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(n.coverPic).wap_small)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(n.coverPic).wap_small)}))),y.a.createElement(s.a,{className:"news-cover-img"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-推荐："),y.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(n.coverPic).wap_big)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(n.coverPic).wap_big)})))):y.a.createElement(s.a,{className:"news-cover-img"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"活动封面："),y.a.createElement("span",null,"暂无"))),y.a.createElement(d.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},y.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),y.a.createElement(s.a,{className:"news-title"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"活动标题："),y.a.createElement("span",{className:"desc"},"".concat(n.title)," "))),y.a.createElement(s.a,{className:"news-summary"},y.a.createElement(o.a,{className:"section"},y.a.createElement("span",{className:"name"},"活动特色(简介)："),y.a.createElement("span",{className:"desc"},"".concat(n.synopsis)," "))),y.a.createElement(s.a,null,y.a.createElement(o.a,{style:{fontSize:"15px",fontWeight:"bolder",padding:"5px",color:"#000"}},"活动内容: "),y.a.createElement(o.a,{className:"page-box activityPublish-content simditor"},y.a.createElement("div",{className:"activityPublish-main simditor-body"},y.a.createElement("div",{className:"content-text",dangerouslySetInnerHTML:this.createMarkup(n.content)}))))):y.a.createElement("div",{style:{height:300}},"加载中..."))}}])&&P(n.prototype,r),i&&P(n,i),t}();a.default=Object(b.connect)(function(e){return{info:e.activityPublishInfo.info,channelList:e.channelListInfo}})(I)}.call(this,t(97))},1655:function(e,a,t){"use strict";(function(e){t.d(a,"d",function(){return l}),t.d(a,"c",function(){return m}),t.d(a,"b",function(){return u}),t.d(a,"a",function(){return f}),t.d(a,"g",function(){return d}),t.d(a,"e",function(){return E}),t.d(a,"f",function(){return y});t(361);var n=t(20),c=t.n(n),r=t(48),s=t(2);function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(a){o(e,a,t[a])})}return e}function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var l=function(e){return{type:s.xb,data:e}},m=function(e,a,t){return function(n){var s="init"===e?"/activity/list":"/post/search";Object(r.i)("get",s,a?i({},a):{},function(e){if(1===e.code){var a=e.obj;n(p({list:a.inforList})),n(y({totalCount:a.recordCount,pageSize:a.pageSize,currPage:a.currentPage})),t&&t(a)}else e.msg&&c.a.error(e.msg)})}},u=function(e,a){return function(t){Object(r.i)("post","/activity/getbyid",i({},e),function(e){if(1===e.code){var n=e.obj;t(p({info:n})),a&&a(n)}else c.a.error(e.msg)})}},p=function(e){return{type:s.c.ADD_DATA,data:e}},f=function(e,a){return{type:s.c.EDIT_LIST_ITEM,data:e,index:a}},d=function(e){return{type:s.c.SET_SEARCH_QUERY,data:e}},E=function(e){return{type:s.c.SET_FILTER_DATA,data:e}},y=function(e){return{type:s.c.SET_PAGE_DATA,data:e}}}).call(this,t(97))}}]);