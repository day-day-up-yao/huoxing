(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{1425:function(e,t,a){"use strict";a.r(t),function(e){a(675);var n=a(676),c=a.n(n),r=(a(1394),a(1395)),s=a.n(r),o=(a(1381),a(1382)),i=a.n(o),l=(a(1383),a(1384)),m=a.n(l),u=(a(247),a(183)),p=a.n(u),f=(a(361),a(20)),d=a.n(f),y=(a(1376),a(1377)),E=a.n(y),b=a(0),g=a.n(b),v=a(246),N=a(10),h=a(1605),O=a(1639),w=a(248),S=a(48);a(1609),a(1610);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=E.a.confirm,A=function(t){function a(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=this,n=_(a).call(this),e=!n||"object"!==j(n)&&"function"!=typeof n?I(t):n,C(I(e),"edit",function(){var t=e.props.info;N.hashHistory.push({pathname:"/post-send",query:{id:t.id}}),sessionStorage.setItem("hx_content",JSON.stringify(t))}),C(I(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),C(I(e),"showModal",function(t){e.setState({previewVisible:!0,previewImage:t})}),C(I(e),"closeWindow",function(){e.setState({closeLoading:!0})}),e.state={isEdit:!1,loading:!0,previewVisible:!1,previewImage:""},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,b["Component"]),n=a,(r=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location;a(Object(w.f)()),a(Object(O.d)({id:n.query.id},function(){e.setState({loading:!1})}))}},{key:"_delPost",value:function(){var e=this.props.location;x({title:"提示",content:"确认要删除吗 ?",onOk:function(){var t={status:-1,id:e.query.id};Object(S.i)("POST","/news/status",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){C(e,t,a[t])})}return e}({},t),function(e){1===e.code?(d.a.success("删除成功"),N.hashHistory.goBack()):d.a.error(e.msg)})}})}},{key:"_forbidcomment",value:function(t){var a=this.props,n=a.location,c=a.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(t)?"0":"1"};Object(S.i)("post","/post/forbidcomment",r,function(e){200===e.status?c(Object(O.d)({id:n.query.id})):d.a.error(e.msg)})}},{key:"_isTop",value:function(t){var a=this.props,n=a.location,c=a.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(t)?"0":"1"};Object(S.i)("post","/post/top",r,function(e){200===e.status?c(Object(O.d)({id:n.query.id})):d.a.error(e.msg)})}},{key:"sendPost",value:function(t){var a=this.props.location,n={appId:e.cookie("gameId"),id:a.query.id,title:t.postTitle,content:"".concat(t.postContent)};console.log(n)}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"channelName",value:function(e){var t="";return this.props.channelList.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"render",value:function(){var e=this,t={md:{span:15},lg:{span:7,offset:1}},a=this.props.info;return g.a.createElement(c.a,{spinning:this.state.loading,size:"large"},a.id?g.a.createElement("div",{className:"post-detail"},g.a.createElement(i.a,null,g.a.createElement(m.a,{span:1},g.a.createElement(p.a,{shape:"circle",icon:"arrow-left",onClick:function(){return N.hashHistory.goBack()}})),g.a.createElement(m.a,{className:"text-right",span:20,offset:3},g.a.createElement(p.a,{onClick:this.edit,className:"mr10",type:"primary"},g.a.createElement(h.a,{type:"icon-edit"}),"编辑"),g.a.createElement(p.a,{onClick:function(){return e._delPost()}},g.a.createElement(h.a,{type:"icon-clear"}),"删除"))),g.a.createElement(i.a,{className:"news-detail-info"},g.a.createElement(m.a,P({className:"section"},t),g.a.createElement("span",{className:"name"},"作者："),g.a.createElement("span",{className:"desc"},"".concat(a.author)," ")),g.a.createElement(m.a,P({className:"section"},t),g.a.createElement("span",{className:"name"},"新闻来源："),g.a.createElement("span",{className:"desc"},"".concat(a.source)," ")),g.a.createElement(m.a,P({className:"section"},t),g.a.createElement("span",{className:"name"},"频道："),g.a.createElement("span",{className:"desc"},"".concat(this.channelName(a.channelId))," ")),g.a.createElement(m.a,P({className:"section"},t),g.a.createElement("span",{className:"name"},"类别："),g.a.createElement("span",{className:"desc"},"".concat(1===a.cateId?"原创":"转载")," ")),g.a.createElement(m.a,P({className:"section"},t),g.a.createElement("span",{className:"name"},"独家："),g.a.createElement("span",{className:"desc"},"".concat(a.original&&1===parseInt(a.original)?"是":"否")," "))),g.a.createElement(i.a,{className:"news-tags"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"标签："),a.tags&&a.tags.split(",").map(function(e,t){return g.a.createElement(s.a,{key:t,color:"blue",style:{marginLeft:5}},e)}))),g.a.createElement(i.a,{className:"news-title"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"新闻标题："),g.a.createElement("span",{className:"desc"},"".concat(a.title)," "))),g.a.createElement(i.a,{className:"news-summary"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"新闻摘要："),g.a.createElement("span",{className:"desc"},"".concat(a.synopsis)," "))),g.a.createElement(i.a,{className:"news-summary"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name",style:{verticalAlign:"middle"}},"音频："),g.a.createElement("ul",{className:"desc",style:{display:"inline-block",verticalAlign:"middle"}},Object(S.G)(a.audio)&&0!==JSON.parse(a.audio).length?JSON.parse(a.audio).map(function(e,t){return g.a.createElement("li",{className:"clearfix",key:t,style:{margin:"5px 0"}},g.a.createElement("span",{style:{verticalAlign:"middle"}},e.fileName),g.a.createElement("audio",{style:{verticalAlign:"middle"},src:e.fileUrl,controls:"controls"}))}):g.a.createElement("span",null,"暂无")))),g.a.createElement(i.a,{className:"news-summary"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name",style:{verticalAlign:"middle"}},"视频："),g.a.createElement("ul",{className:"desc",style:{display:"inline-block",verticalAlign:"middle"}},Object(S.G)(a.video)&&0!==JSON.parse(a.video).length?JSON.parse(a.video).map(function(e,t){return g.a.createElement("li",{className:"clearfix",key:t,style:{margin:"5px 0"}},g.a.createElement("video",{width:"200",style:{verticalAlign:"middle"},src:e.fileUrl,preload:"metadata",controls:"controls"}))}):g.a.createElement("span",null,"暂无")))),Object(S.G)(a.coverPic)?g.a.createElement("div",null,Object(S.G)(a.video)&&0!==JSON.parse(a.video).length?g.a.createElement(i.a,{className:"news-cover-img"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"PC-视频封面："),g.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).video_pc)},src:"".concat(JSON.parse(a.coverPic).video_pc)})),g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"M-视频封面："),g.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).video_m)},src:"".concat(JSON.parse(a.coverPic).video_m)}))):"",g.a.createElement(i.a,{className:"news-cover-img"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"PC-新闻封面："),g.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).pc)},src:"".concat(JSON.parse(a.coverPic).pc)}))),g.a.createElement(i.a,{className:"news-cover-img"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"PC-推荐位封面："),JSON.parse(a.coverPic).pc_recommend&&""!==JSON.parse(a.coverPic).pc_recommend?g.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).pc_recommend)},src:"".concat(JSON.parse(a.coverPic).pc_recommend)}):g.a.createElement("span",{style:{padding:6}},"暂无推荐位封面"))),g.a.createElement(i.a,{className:"news-cover-img"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-新闻封面："),g.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).wap_small)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(a.coverPic).wap_small)}))),g.a.createElement(i.a,{className:"news-cover-img"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-推荐："),g.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).wap_big)},style:{width:95,border:"1px solid #eee"},src:"".concat(JSON.parse(a.coverPic).wap_big)})))):g.a.createElement(i.a,{className:"news-cover-img"},g.a.createElement(m.a,{className:"section"},g.a.createElement("span",{className:"name"},"新闻封面："),g.a.createElement("span",null,"暂无"))),g.a.createElement(E.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},g.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),g.a.createElement(i.a,null,g.a.createElement(m.a,{style:{fontSize:"15px",fontWeight:"bolder",padding:"5px",color:"#000"}},"新闻内容: "),g.a.createElement(m.a,{className:"page-box post-content simditor"},g.a.createElement("div",{className:"post-main simditor-body"},g.a.createElement("div",{className:"content-text",dangerouslySetInnerHTML:this.createMarkup(a.content)}))))):g.a.createElement("div",{style:{height:300}},"加载中..."))}}])&&k(n.prototype,r),o&&k(n,o),a}();t.default=Object(v.connect)(function(e){return{info:e.postInfo.info,channelList:e.channelListInfo}})(A)}.call(this,a(97))},1639:function(e,t,a){"use strict";(function(e){a.d(t,"i",function(){return l}),a.d(t,"e",function(){return m}),a.d(t,"d",function(){return u}),a.d(t,"b",function(){return p}),a.d(t,"g",function(){return f}),a.d(t,"f",function(){return d}),a.d(t,"c",function(){return y}),a.d(t,"h",function(){return E}),a.d(t,"a",function(){return g}),a.d(t,"l",function(){return v}),a.d(t,"j",function(){return N}),a.d(t,"k",function(){return h});a(361);var n=a(20),c=a.n(n),r=a(48),s=a(2);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){i(e,t,a[t])})}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function(e){return{type:s.xb,data:e}},m=function(e,t,a){return function(n){var s="init"===e?"/news/shownews":"/post/search";Object(r.i)("get",s,t?o({},t,{createrType:0}):{},function(e){if(1===e.code){var t=e.obj;n(b({list:t.inforList})),n(h({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),a&&a(t)}else c.a.error(e.msg)})}},u=function(e,t){return function(a){Object(r.i)("post","/news/getbyid",o({},e),function(e){if(1===e.code){var n=e.obj;a(b({info:n})),t&&t(n)}else c.a.error(e.msg)})}},p=function(e,t){return function(e){var a=localStorage.getItem("articleData");if(!a)return!1;e(b({info:JSON.parse(a)})),t&&t(JSON.parse(a))}},f=function(e,t){return function(a){Object(r.i)("post","/crawler/social/source/importNewsInfo",o({},e),function(e){if(t&&t(e.obj),1===e.code){console.log(e.obj);var n=e.obj;a(b({info:n}))}else c.a.error(e.msg)})}},d=function(e,t){return function(a){Object(r.i)("post","/crawler/social/source/importStrategyInfo",o({},e),function(e){if(t&&t(e.obj),1===e.code){var n=e.obj;a(b({info:n}))}else c.a.error(e.msg)})}},y=function(e,t){return function(a){Object(r.i)("post","/merge/parseurl",o({},e),function(e){if(t&&t(e.obj),1===e.code){var n=e.obj;a(b({info:n}))}else c.a.error(e.msg)})}},E=function(e,t){return function(a){Object(r.i)("post","/news/setorder",o({},e),function(a){1===a.code?(0===parseInt(e.topOrder)?c.a.success("取消置顶成功！"):c.a.success("置顶成功！"),t&&t()):c.a.error(a.msg)})}},b=function(e){return{type:s.mb.ADD_DATA,data:e}},g=function(e,t){return{type:s.mb.EDIT_LIST_ITEM,data:e,index:t}},v=function(e){return{type:s.mb.SET_SEARCH_QUERY,data:e}},N=function(e){return{type:s.mb.SET_FILTER_DATA,data:e}},h=function(e){return{type:s.mb.SET_PAGE_DATA,data:e}}}).call(this,a(97))}}]);