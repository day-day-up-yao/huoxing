(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1435:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),o=a.n(n),r=(a(247),a(183)),l=a.n(r),i=(a(1390),a(1391)),s=a.n(i),u=(a(361),a(20)),c=a.n(u),p=(a(678),a(363)),f=a.n(p),d=(a(184),a(1378)),h=a.n(d),m=(a(1376),a(1377)),b=a.n(m),g=(a(1379),a(1380)),y=a.n(g),v=a(0),O=a.n(v),E=a(246),w=a(10),S=a(248),C=a(1625),j=a(48);a(1611);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var q=y.a.Item,F=b.a.confirm,L=h.a.TextArea,R=f.a.Group,x=[{label:"普通",value:1},{label:"重要",value:2}],A=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=P(t).call(this),e=!n||"object"!==I(n)&&"function"!=typeof n?T(a):n,N(T(e),"channelIdChange",function(t){e.setState({channelId:t.target.value})}),N(T(e),"tagChange",function(t){e.setState({tag:t.target.value})}),N(T(e),"getReason",function(t){e.setState({reason:t.target.value})}),N(T(e),"handleSubmit",function(t){t.preventDefault();var a=t.target.getAttribute("data-status"),n=T(e);e.props.form.validateFields(function(e,t){e||(t.id=n.props.location.query.id,F("2"===a?{title:"提示",content:O.a.createElement("div",{className:"modal-input"},O.a.createElement("span",{style:{marginRight:10}},"请填写文章不通过原因："),O.a.createElement(L,{rows:3,autoFocus:!0,onChange:function(e){n.getReason(e)}})),onOk:function(){if(""===n.state.reason.trim())return c.a.error("请填写审核不通过的原因！"),!1;n.setState({loading:!0}),Object(j.i)("post","/lives/update",t,function(e){1===e.code?Object(j.i)("POST","/lives/nopasslivesreason",{livesId:t.id,reason:n.state.reason},function(e){1===e.code?Object(j.i)("POST","/lives/status",{id:t.id,status:2},function(e){1===e.code?(c.a.success("操作成功！"),w.hashHistory.push("/flash-audit")):(n.setState({loading:!1}),c.a.error(e.msg))}):(n.setState({loading:!1}),c.a.error(e.msg))}):(n.setState({loading:!1}),c.a.error(e.msg))})}}:{title:"提示",content:"确认要通过审核吗 ?",onOk:function(){n.setState({loading:!0}),Object(j.i)("post","/lives/update",t,function(e){1===e.code?Object(j.i)("post","/lives/status",{id:t.id,status:1},function(e){1===e.code?(c.a.success("操作成功！"),w.hashHistory.push("/flash-audit")):c.a.error(e.msg)}):c.a.error(e.msg)})}}))})}),e.state={updateOrNot:!1,inputVisible:!1,channelId:"1",inputValue:"",content:"",reason:"",title:"",loading:!0,tag:1,url:""},e}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,v["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location;a(Object(S.k)()),n.query.id?a(Object(C.a)({id:n.query.id},function(t){e.setState({content:t.content,title:t.title&&""!==t.title.trim()?t.title:"暂无",url:t.url,updateOrNot:!0,loading:!1})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.flashInfo,a=this.state,n=a.content,r=a.updateOrNot,i=a.tag,u=a.title,c={labelCol:{span:1},wrapperCol:{span:15,offset:1}};return O.a.createElement("div",{className:"flash-send"},O.a.createElement(o.a,{spinning:this.state.loading,size:"large"},O.a.createElement(y.a,{onSubmit:this.handleSubmit},O.a.createElement(q,V({},c,{label:"标题："}),e("title",{initialValue:r&&t?u:"",rules:[{required:!0,message:"请输入快讯标题！"}]})(O.a.createElement(h.a,{className:"flash",placeholder:"快讯标题"})),O.a.createElement("a",{target:"_blank",href:"https://www.baidu.com/s?wd=".concat(u)},"去百度中搜索")),O.a.createElement(q,V({},c,{label:"内容："}),e("content",{initialValue:r&&t?n:"",rules:[{required:!0,message:"请输入快讯内容！"}]})(O.a.createElement(L,{className:"flash",placeholder:"快讯内容"}))),O.a.createElement(q,V({},c,{label:"链接地址："}),e("url",{initialValue:r&&t?"".concat(t.url?t.url:""):"",rules:[{type:"url",message:"请输入正确的超链接地址！"}]})(O.a.createElement(h.a,{placeholder:"快讯中插入的超链接地址"}))),O.a.createElement(q,V({},c,{label:"频道："}),e("channelId",{initialValue:r&&t?"".concat(t.channelId):"0"})(O.a.createElement(R,{options:this.props.flashTypeList,onChange:this.channelIdChange,setFieldsValue:this.state.channelId}))),O.a.createElement(q,V({},c,{label:"快讯标识："}),e("tag",{initialValue:r&&t?0===t.tag?1:t.tag:1,rules:[{required:!0,message:"请选择快讯标识！"}]})(O.a.createElement(R,{options:x,onChange:this.tagChange,setFieldsValue:i}))),O.a.createElement(q,V({},c,{label:"利好数："}),e("upCounts",{initialValue:r&&t.upCounts?t.upCounts:0})(O.a.createElement(s.a,null))),O.a.createElement(q,V({},c,{label:"利空数："}),e("downCounts",{initialValue:r&&t.downCounts?t.downCounts:0})(O.a.createElement(s.a,null))),O.a.createElement(q,{wrapperCol:{span:12,offset:2}},O.a.createElement(l.a,{type:"primary","data-status":"2",className:"cancel",onClick:this.handleSubmit},"不通过审核"),O.a.createElement(l.a,{type:"primary","data-status":"1",htmlType:"submit",style:{marginLeft:"10px"}},"通过审核")))))}}])&&k(a.prototype,n),r&&k(a,r),t}();t.default=Object(E.connect)(function(e){return{userInfo:e.flashInfo.userInfo,flashInfo:e.flashInfo.info,flashTypeList:e.flashTypeListInfo}})(y.a.create()(A))}}]);