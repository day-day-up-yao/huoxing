(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{1506:function(e,t,n){"use strict";n.r(t);n(675);var a=n(676),r=n.n(a),i=(n(247),n(183)),o=n.n(i),l=(n(1376),n(1377)),s=n.n(l),c=(n(1388),n(1389)),u=n.n(c),p=(n(678),n(363)),f=n.n(p),m=(n(184),n(1378)),d=n.n(m),y=(n(1387),n(50)),b=n.n(y),h=(n(361),n(20)),g=n.n(h),v=(n(1379),n(1380)),w=n.n(v),E=n(0),O=n.n(E),S=n(246),j=n(10),I=n(1711),C=n(48);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=w.a.Item,_=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=x(t).call(this,e),n=!r||"object"!==N(r)&&"function"!=typeof r?L(a):r,V(L(n),"handleCancel",function(){return n.setState({previewVisible:!1})}),V(L(n),"handlePreview",function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),V(L(n),"handleChange",function(e){var t=e.file,a=e.fileList;n.setState({fileList:a}),"removed"===t.status&&n.setState({coverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&n.setState({coverImgUrl:t.response.obj}),"error"===t.status&&(g.a.error("网络错误，上传失败！"),n.setState({coverImgUrl:"",fileList:[]})))}),V(L(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.setFieldsValue({imgUrl:n.state.coverImgUrl}),n.props.form.validateFieldsAndScroll(function(e,t){e||(n.setState({loading:!0}),t.id=n.props.userInfo.id,Object(C.i)("post","/guestInfo/updateGuest",t,function(e){1===e.code?(g.a.success("修改成功"),j.hashHistory.push("/sto-userList")):g.a.error(e.msg)}))})}),n.state={previewVisible:!1,previewImage:"",fileList:[],coverImgUrl:"",description:"",loading:!0,userType:"1"},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,E["Component"]),n=t,(a=[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.location;n(Object(I.a)({id:a.query.id},function(t){var n=t.imgUrl;e.setState({updateOrNot:!0,fileList:[{uid:0,name:"xxx.png",status:"done",url:n}],description:t.description,coverImgUrl:n,loading:!1,userType:t.userType,userName:t.userName})}))}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.userInfo,a=t.getFieldDecorator,i={labelCol:{span:2},wrapperCol:{span:15,offset:1}},l=O.a.createElement("div",null,O.a.createElement(b.a,{type:"plus"}),O.a.createElement("div",{className:"ant-upload-text"},"上传图片"));return O.a.createElement(w.a,{onSubmit:this.handleSubmit},O.a.createElement(r.a,{spinning:this.state.loading,size:"large"},O.a.createElement(k,U({},i,{label:"顾问名"}),a("guestName",{initialValue:n.guestName?n.guestName:"",rules:[{required:!0,message:"请输入STO顾问名！"}]})(O.a.createElement(d.a,null))),O.a.createElement(k,U({},i,{className:"",label:"顾问类型"}),a("type",{initialValue:n.type?"".concat(n.type):"0"})(O.a.createElement(f.a.Group,null,O.a.createElement(f.a,{value:"0"},"个人"),O.a.createElement(f.a,{value:"1"},"机构")))),O.a.createElement(k,U({},i,{label:"顾问头像",className:"upload-div"}),O.a.createElement("div",{className:"dropbox"},a("imgUrl",{initialValue:n&&n.imgUrl?this.state.fileList:"",rules:[{required:!0,message:"请上传顾问头像！"}]})(O.a.createElement(u.a,{headers:{"Sign-Param":Object(C.A)()},action:"".concat(C.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:this.state.fileList,onPreview:this.handlePreview,onChange:this.handleChange},this.state.fileList.length>=1?null:l)),O.a.createElement(s.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},O.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),O.a.createElement("span",{className:"cover-img-tip",style:{display:"inline-block",marginTop:"70px"}},"用于STO顾问头像展示, 长宽比例: ",O.a.createElement("font",{style:{color:"red"}},"1 : 1")))),O.a.createElement(k,U({},i,{label:"顾问描述"}),a("introduction",{initialValue:n&&n.introduction?n.introduction:""})(O.a.createElement(d.a,{rows:4,type:"textarea"}))),O.a.createElement(k,{wrapperCol:{span:12,offset:2}},O.a.createElement(o.a,{type:"primary","data-status":"1",htmlType:"submit",style:{marginRight:"10px"}},"保存"),O.a.createElement(o.a,{type:"primary",className:"cancel",onClick:function(){j.hashHistory.goBack()}},"取消"))))}}])&&P(n.prototype,a),i&&P(n,i),t}();t.default=Object(S.connect)(function(e){return{userInfo:e.stoUserInfo.info}})(w.a.create()(_))}}]);