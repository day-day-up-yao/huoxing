(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{1493:function(e,t,a){"use strict";a.r(t),function(e){a(675);var n=a(676),c=a.n(n),r=(a(1394),a(1395)),s=a.n(r),o=(a(1381),a(1382)),i=a.n(o),l=(a(1383),a(1384)),m=a.n(l),u=(a(247),a(183)),p=a.n(u),d=(a(361),a(20)),f=a.n(d),v=(a(184),a(1378)),y=a.n(v),b=(a(1376),a(1377)),E=a.n(b),g=a(0),N=a.n(g),h=a(246),O=a(10),w=a(1605),S=a(1658),P=a(48),_=a(1617);a(1656),a(1610);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var M=E.a.confirm,R=y.a.TextArea,L=function(t){function a(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=this,n=A(a).call(this),e=!n||"object"!==j(n)&&"function"!=typeof n?T(t):n,x(T(e),"closeWindow",function(){e.setState({closeLoading:!0})}),x(T(e),"edit",function(){var t=e.props.info;O.hashHistory.push({pathname:"/audit-videoSend",query:{id:t.id}})}),x(T(e),"handleCancel",function(){return e.setState({previewVisible:!1})}),x(T(e),"showModal",function(t){e.setState({previewVisible:!0,previewImage:t})}),x(T(e),"getReason",function(t){e.setState({reason:t.target.value})}),x(T(e),"handleSubmit",function(t){var a=T(e),n=t.target.getAttribute("data-status"),c="通过审核";switch(n){case"1":c="通过审核并发表";break;case"4":c="暂存到审核中";break;case"2":c="驳回审核";break;default:c="通过审核"}t.preventDefault();var r=e.props.info;if("1"===n){if(!Object(P.G)(r.coverPic))return f.a.error("封面暂无，请先上传相关封面！"),!1;if(!JSON.parse(r.coverPic).pc&&!JSON.parse(r.coverPic).wap_small)return f.a.error("封面暂无，请先上传相关封面！"),!1}M({title:"提示",content:"确认要".concat(c,"吗 ?"),onOk:function(){var e={id:r.id,status:n};"2"===n?M({title:"提示",content:N.a.createElement("div",{className:"modal-input"},N.a.createElement("span",{style:{marginRight:10}},"请填写审核不通过原因："),N.a.createElement(R,{rows:3,autoFocus:!0,onChange:function(e){a.getReason(e)}})),onOk:function(){a.setState({loading:!0}),""!==a.state.reason.trim()&&Object(P.i)("POST","/video/status",{id:r.id,status:2,reason:a.state.reason},function(e){1===e.code?(f.a.success("操作成功！"),a.closeWindow()):(a.setState({loading:!1}),f.a.error(e.msg))})}}):Object(P.i)("POST","/video/status",J({},e),function(e){1===e.code?(f.a.success("操作成功"),a.closeWindow()):f.a.error(e.msg)})}})}),e.state={isEdit:!1,loading:!0,previewVisible:!1,previewImage:"",reason:"",closeLoading:!1},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(a,g["Component"]),n=a,(r=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.location;a(Object(S.b)({id:n.query.id},function(){e.setState({loading:!1})}))}},{key:"_delVideoAudit",value:function(){var e=this.props.location,t=this;M({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={status:-1,id:e.query.id};Object(P.i)("POST","/video/status",J({},a),function(e){1===e.code?(f.a.success("删除成功"),t.closeWindow()):f.a.error(e.msg)})}})}},{key:"_forbidcomment",value:function(t){var a=this.props,n=a.location,c=a.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(t)?"0":"1"};Object(P.i)("post","/post/forbidcomment",r,function(e){200===e.status?c(Object(S.b)({id:n.query.id})):f.a.error(e.msg)})}},{key:"_isTop",value:function(t){var a=this.props,n=a.location,c=a.dispatch,r={appId:e.cookie("gameId"),id:n.query.id,operate:parseInt(t)?"0":"1"};Object(P.i)("post","/post/top",r,function(e){200===e.status?c(Object(S.b)({id:n.query.id})):f.a.error(e.msg)})}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"channelName",value:function(e){var t="";return P.p.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"render",value:function(){var e=this,t={md:{span:15},lg:{span:7,offset:1}},a=this.props.info;return N.a.createElement("div",null,N.a.createElement(c.a,{spinning:this.state.loading,size:"large"},a.id?N.a.createElement("div",{className:"videoAudit-detail"},N.a.createElement(i.a,null,N.a.createElement(m.a,{className:""},N.a.createElement(p.a,{onClick:this.edit,className:"mr10",type:"primary"},N.a.createElement(w.a,{type:"icon-edit"}),"编辑"),N.a.createElement(p.a,{onClick:function(){return e._delVideoAudit()}},N.a.createElement(w.a,{type:"icon-clear"}),"删除"))),2===a.status?N.a.createElement(i.a,{className:"nopass"},N.a.createElement(m.a,{className:""},N.a.createElement("span",{className:"name"},"审核不通过：",a.nopassReason))):"",N.a.createElement(i.a,{className:"news-detail-info"},N.a.createElement(m.a,k({className:"section"},t),N.a.createElement("span",{className:"name"},"作者："),N.a.createElement("span",{className:"desc"},"".concat(a.author)," ")),N.a.createElement(m.a,k({className:"section"},t),N.a.createElement("span",{className:"name"},"视频来源："),N.a.createElement("span",{className:"desc"},a.author," ")),N.a.createElement(m.a,k({className:"section"},t),N.a.createElement("span",{className:"name"},"发布时间："),N.a.createElement("span",{className:"desc"},Object(P.w)(a.publishTime)," "))),N.a.createElement(i.a,{className:"news-tags"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"标签："),a.tags?a.tags.split(",").map(function(e,t){return N.a.createElement(s.a,{key:t,color:"blue",style:{marginLeft:5}},e)}):"无")),N.a.createElement(i.a,{className:"news-title"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"视频标题："),N.a.createElement("span",{className:"desc"},"".concat(a.title)," "))),N.a.createElement(i.a,{className:"news-summary"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"视频简介："),N.a.createElement("span",{className:"desc"},"".concat(a.content||"无")," "))),N.a.createElement(i.a,{className:"news-summary"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name",style:{verticalAlign:"middle"}},"视频："),N.a.createElement("ul",{className:"desc",style:{display:"inline-block",verticalAlign:"middle"}},Object(P.G)(a.url)&&0!==JSON.parse(a.url).length?JSON.parse(a.url).map(function(e,t){return N.a.createElement("li",{className:"clearfix",key:t,style:{margin:"5px 0"}},N.a.createElement("video",{width:"200",style:{verticalAlign:"middle"},src:e.fileUrl,preload:"metadata",controls:"controls"}))}):N.a.createElement("span",null,"暂无")))),Object(P.G)(a.coverPic)?N.a.createElement("div",null,Object(P.G)(a.url)&&0!==JSON.parse(a.url).length?N.a.createElement(i.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"PC-播放器封面："),JSON.parse(a.coverPic).video_pc?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).video_pc)},src:"".concat(JSON.parse(a.coverPic).video_pc)}):N.a.createElement("span",null,"暂无")),N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"M-播放器封面："),JSON.parse(a.coverPic).video_pc?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).video_m)},src:"".concat(JSON.parse(a.coverPic).video_m)}):N.a.createElement("span",null,"暂无"))):"",N.a.createElement(i.a,{className:"news-cover-img"},N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"PC-缩略图："),JSON.parse(a.coverPic).pc&&""!==JSON.parse(a.coverPic).pc?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).pc)},src:"".concat(JSON.parse(a.coverPic).pc)}):N.a.createElement("span",{style:{padding:6}},"暂无")),N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"PC-推荐缩略图："),JSON.parse(a.coverPic).pc_recommend&&""!==JSON.parse(a.coverPic).pc_recommend?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).pc_recommend)},src:"".concat(JSON.parse(a.coverPic).pc_recommend)}):N.a.createElement("span",{style:{padding:6}},"暂无")),N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-缩略图："),JSON.parse(a.coverPic).wap_small&&""!==JSON.parse(a.coverPic).wap_small?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).wap_small)},src:"".concat(JSON.parse(a.coverPic).wap_small)}):N.a.createElement("span",{style:{padding:6}},"暂无")),N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name",style:{width:"125px",verticalAlign:"top"}},"M-推荐缩略图："),JSON.parse(a.coverPic).wap_big&&""!==JSON.parse(a.coverPic).wap_big?N.a.createElement("img",{className:"desc",onClick:function(){return e.showModal(JSON.parse(a.coverPic).wap_big)},src:"".concat(JSON.parse(a.coverPic).wap_big)}):N.a.createElement("span",{style:{padding:6}},"暂无")))):N.a.createElement(i.a,null,N.a.createElement(m.a,{className:"section"},N.a.createElement("span",{className:"name"},"缩略图："),N.a.createElement("span",null,"暂无"))),N.a.createElement(E.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},N.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),N.a.createElement("div",{className:"btns",style:{margin:"20px 0"}},N.a.createElement(p.a,{type:"primary","data-status":"1",onClick:this.handleSubmit,style:{marginRight:"10px"}},"审核通过并发表"),N.a.createElement(p.a,{type:"primary","data-status":"4",onClick:this.handleSubmit,style:{marginRight:"10px"}},"暂存到审核中"),N.a.createElement(p.a,{type:"primary","data-status":"2",onClick:this.handleSubmit,style:{marginRight:"10px"}},"审核不通过"),N.a.createElement(p.a,{type:"primary",className:"cancel",onClick:this.closeWindow},"取消"))):N.a.createElement("div",{style:{height:300}},"加载中...")),this.state.closeLoading&&N.a.createElement(_.a,{handleCancel:function(t){clearInterval(t),e.setState({closeLoading:!1})},closeLoading:this.state.closeLoading}))}}])&&C(n.prototype,r),o&&C(n,o),a}();t.default=Object(h.connect)(function(e){return{info:e.videoAuditInfo.info}})(L)}.call(this,a(97))},1656:function(e,t,a){var n=a(1657);"string"==typeof n&&(n=[[e.i,n,""]]);var c={transform:void 0};a(186)(n,c);n.locals&&(e.exports=n.locals)},1657:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])},1658:function(e,t,a){"use strict";a.d(t,"e",function(){return l}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"a",function(){return f}),a.d(t,"h",function(){return v}),a.d(t,"f",function(){return y}),a.d(t,"g",function(){return b});a(361);var n=a(20),c=a.n(n),r=a(48),s=a(2);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){i(e,t,a[t])})}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function(e){return{type:s.xb,data:e}},m=function(e,t,a){return function(n){var s="init"===e?"/video/getvideolist":"/post/search";Object(r.i)("get",s,t?o({},t,{createrType:1}):{},function(e){if(1===e.code){var t=e.obj;n(d({list:t.inforList})),n(b({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),a&&a(t)}else c.a.error(e.msg)})}},u=function(e,t){return function(a){Object(r.i)("post","/video/getbyid",o({},e),function(e){if(1===e.code){var n=e.obj;a(d({info:n})),t&&t(n)}else c.a.error(e.msg)})}},p=function(e,t){return function(a){Object(r.i)("post","/news/setorder",o({},e),function(a){1===a.code?(0===parseInt(e.topOrder)?c.a.success("取消置顶成功！"):c.a.success("置顶成功！"),t&&t()):c.a.error(a.msg)})}},d=function(e){return{type:s.Hb.ADD_DATA,data:e}},f=function(e,t){return{type:s.Hb.EDIT_LIST_ITEM,data:e,index:t}},v=function(e){return{type:s.Hb.SET_SEARCH_QUERY,data:e}},y=function(e){return{type:s.Hb.SET_FILTER_DATA,data:e}},b=function(e){return{type:s.Hb.SET_PAGE_DATA,data:e}}}}]);