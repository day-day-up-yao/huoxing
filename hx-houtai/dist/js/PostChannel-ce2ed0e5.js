(window.webpackJsonp=window.webpackJsonp||[]).push([[135,39],{1589:function(e,t,n){"use strict";n.r(t);n(184);var a=n(1378),r=n.n(a),i=(n(675),n(676)),c=n.n(i),l=(n(1385),n(1386)),o=n.n(l),s=(n(1381),n(1382)),u=n.n(s),p=(n(1383),n(1384)),f=n.n(p),d=(n(247),n(183)),h=n.n(d),m=(n(361),n(20)),b=n.n(m),y=(n(1379),n(1380)),v=n.n(y),g=(n(677),n(362)),E=n.n(g),k=(n(1376),n(1377)),O=n.n(k),S=(n(678),n(363)),w=n.n(S),P=n(0),j=n.n(P),C=n(246),I=(n(1609),n(1605)),D=n(48),N=n(2);function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){T(e,t,n[t])})}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){return{type:N.xb,data:e}},A=function(e){return{type:N.q.ADD_DATA,data:e}},q=function(e){return{type:N.q.SET_SEARCH_QUERY,data:e}},z=function(e){return{type:N.q.SET_FILTER_DATA,data:e}},F=function(e){return{type:N.q.SET_PAGE_DATA,data:e}},M=n(11),V=n.n(M);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){$(e,t,n[t])})}return e}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=w.a.Group,Y=O.a.confirm,B=E.a.Option,K={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},X=[],Z=v.a.Item,ee=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=J(t).call(this),e=!a||"object"!==L(a)&&"function"!=typeof a?U(n):a,$(U(e),"disabledDate",function(e){return e&&e<V()().endOf("hours")}),$(U(e),"handleChange1",function(t){(0,e.props.dispatch)(z({status:t})),e.doSearch("init",{currentPage:1,status:t})}),$(U(e),"cancelModal",function(){var t=e.props.form;e.setState({visible:!1}),t.resetFields()}),e.state={loading:!0,newsStatus:null,editNewsId:"",visible:!1},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,P["Component"]),n=t,(a=[{key:"channelName",value:function(e){var t="";return D.p.map(function(n,a){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.search,a=t.filter;this.doSearch("init",G({},a,{title:n.title})),X=[{title:"频道名称",key:"channelName",render:function(t,n){return n&&j.a.createElement("div",{className:"post-info clearfix"},j.a.createElement("div",null,j.a.createElement("h4",{title:n.channelName,dangerouslySetInnerHTML:e.createMarkup(Object(D.q)(n.channelName,30))}),j.a.createElement("div",null,parseInt(n.recommend)?j.a.createElement("div",{style:{display:"inline-block",verticalAlign:"middle"}},j.a.createElement("span",{className:"org-bg mr10"},"推荐")):"")))}},{title:"频道 ID",dataIndex:"channelId",key:"channelId"},{title:"频道状态",key:"status",render:function(e){return e&&0===e.status?j.a.createElement("span",{className:"news-status pre-publish"},"关闭 (禁用)"):e&&1===e.status?j.a.createElement("span",{className:"news-status"},"打开 (使用中)"):j.a.createElement("span",null,"暂无")}},{title:"创建时间",key:"createTime",render:function(e){return e&&Object(D.w)(e.createTime)}},{title:"排序权重",dataIndex:"rank",key:"rank"},{title:"操作",key:"action",render:function(t){return j.a.createElement("div",{className:"btns"},j.a.createElement("p",null,j.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.updateChannel(t)},style:{background:"#108ee9"}},"修改")),j.a.createElement("p",null,j.a.createElement("a",{className:"mr10 opt-btn",href:"javascript:void(0)",onClick:function(){return e._isPublish(t)},style:{background:"#f68e15"}},1===t.status?"禁用":0===t.status?"启用":void 0)),j.a.createElement("p",null,j.a.createElement("a",{onClick:function(){return e.delChannel(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(q({type:"init",nickName:""})),e(F({pageSize:20,totalCount:0}))}},{key:"updateChannel",value:function(e){this.props.dispatch(x(e)),this.setState({visible:!0})}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"doSearch",value:function(e,t){var n=this,a=this.props,r=a.dispatch,i=a.pageData,c=G({},a.filter,{pageSize:20,currentPage:i.currPage});r(function(e,t,n){return function(a){var r="init"===e?"/news/channel/showchannelist":"/post/search";Object(D.i)("get",r,t?_({},t):{},function(e){if(1===e.code){var t=e.obj;a(A({list:t.inforList})),a(F({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),n&&n(t)}else b.a.error(e.msg)})}}(e,c=G({},c,t),function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(q({type:"init"})),e(F({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,n=t.dispatch,a=t.search,r=t.filter;n(F({currPage:e})),this.doSearch(a.type,G({currentPage:e},r))}},{key:"delChannel",value:function(e){var t=this.props.dispatch,n=this;Y({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={id:e.id};Object(D.i)("POST","/news/channel/del",G({},a),function(e){1===e.code?(b.a.success("删除成功"),n.doSearch("init"),t(q({type:"init"}))):b.a.error(e.msg)})}})}},{key:"_isPublish",value:function(e){var t=this;Y({title:"提示",content:"确认要".concat(1===e.status?"禁用":"启用","吗 ?"),onOk:function(){var n={id:e.id,channelId:e.channelId,channelName:e.channelName,rank:e.rank,status:0===e.status?1:0};Object(D.i)("POST","/news/channel/update",G({},n),function(e){1===e.code?(b.a.success("操作成功"),t.doSearch("init")):b.a.error(e.msg)})}})}},{key:"submit",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.form,r=t.selectedData,i=this;a.validateFields(function(t,c){if(t)return!1;var l,o;c.id=r.id,r.id?Object(D.i)("post","/news/channel/update",c,function(t){1===t.code?(b.a.success("操作成功!"),e.setState({visible:!1}),a.resetFields(),i.doSearch("init")):b.a.success(t.msg)}):n((l=c,o=function(){e.setState({visible:!1}),a.resetFields(),e.doSearch("init")},function(e){Object(D.i)("post","/news/channel/add",_({},l),function(e){1===e.code?(b.a.success("添加成功！"),o&&o()):b.a.error(e.msg)})}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.filter,i=t.form,l=t.selectedData,s=t.pageData,p=t.dispatch,d=i.getFieldDecorator;return j.a.createElement("div",{className:"post-index"},j.a.createElement(u.a,null,j.a.createElement(f.a,null,j.a.createElement("span",{style:{marginLeft:15}},"推荐："),j.a.createElement(E.a,{defaultValue:"".concat(a.status),style:{width:100},onChange:this.handleChange1},j.a.createElement(B,{value:""},"全部"),j.a.createElement(B,{value:"1"},"使用中"),j.a.createElement(B,{value:"0"},"禁用")),j.a.createElement("span",null,j.a.createElement(h.a,{type:"primary",style:{margin:"0 0 0 15px"},onClick:function(){e.setState({visible:!0}),p(x({}))}},j.a.createElement(I.a,{type:"icon-post-send"}),"新增")))),j.a.createElement("div",{className:"mt30"},j.a.createElement(c.a,{spinning:this.state.loading,size:"large"},j.a.createElement(o.a,{dataSource:n.map(function(e,t){return G({},e,{key:t})}),columns:X,bordered:!0,pagination:{current:s.currPage,total:s.totalCount,pageSize:s.pageSize,onChange:function(t){return e.changePage(t)}}}))),j.a.createElement(O.a,{title:"添加/修改账号",visible:this.state.visible,onOk:function(){return e.submit()},onCancel:this.cancelModal},j.a.createElement(v.a,null,j.a.createElement(Z,R({},K,{label:"频道名称"}),d("channelName",{rules:[{required:!0,message:"请输入频道名称!"}],initialValue:""===l.channelName?"":l.channelName})(j.a.createElement(r.a,null))),j.a.createElement(Z,R({},K,{label:"频道 ID"}),d("channelId",{rules:[{required:!0,message:"请输入频道 ID!"},{pattern:/^[1-9]\d*$/,message:"请输入正确的频道 ID!"}],initialValue:""===l.channelId?"":l.channelId})(j.a.createElement(r.a,{disabled:l.channelId&&""!==l.channelId}))),j.a.createElement(Z,R({},K,{label:"排序权重"}),d("rank",{rules:[{required:!l.rank&&""!==l.rank,message:"请输入排序权重!"},{pattern:/^[0-9]\d*$/,message:"请输入正确的权重值!"}],initialValue:""===l.rank?"":l.rank})(j.a.createElement(r.a,{placeholder:"权重越大, 排序越靠前"}))),j.a.createElement(Z,R({},K,{label:"状态"}),d("status",{initialValue:(0===l.status?"0":"1")||"1"})(j.a.createElement(Q,null,j.a.createElement(w.a,{value:"1"},"启用"),j.a.createElement(w.a,{value:"0"},"禁用")))))))}}])&&H(n.prototype,a),i&&H(n,i),t}();t.default=Object(C.connect)(function(e){return{postInfo:e.postChannelInfo,list:e.postChannelInfo.list,search:e.postChannelInfo.search,filter:e.postChannelInfo.filter,pageData:e.postChannelInfo.pageData,selectedData:e.postChannelInfo.selectedData}})(v.a.create()(ee))},1609:function(e,t,n){var a=n(1613);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1613:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);