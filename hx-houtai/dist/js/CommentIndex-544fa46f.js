(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1441:function(e,t,n){"use strict";n.r(t);n(675);var a=n(676),r=n.n(a),c=(n(1385),n(1386)),o=n.n(c),i=(n(1381),n(1382)),s=n.n(i),u=(n(247),n(183)),l=n.n(u),f=(n(184),n(1378)),p=n.n(f),m=(n(1383),n(1384)),d=n.n(m),y=(n(361),n(20)),h=n.n(y),b=(n(1376),n(1377)),g=n.n(b),v=n(0),k=n.n(v),O=n(246),S=(n(1754),n(1756)),w=n(48);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){T(e,t,n[t])})}return e}function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=g.a.confirm,D=[],I=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=_(t).call(this),e=!a||"object"!==j(a)&&"function"!=typeof a?C(n):a,T(C(e),"onSelectChange",function(t,n){var a=[];n.map(function(e,t){a.push(e.id)}),e.setState({selectedRowKeys:t,idArr:a})}),T(C(e),"batchDelete",function(){var t=e.props.dispatch,n=C(e);x({title:"提示",content:"确认要删除选中的所有评论吗 ?",onOk:function(){var e={id:n.state.idArr.join(","),status:0};Object(w.i)("POST","/comment/status",E({},e),function(e){1===e.code?(h.a.success("删除成功"),n.setState({selectedRowKeys:[]}),n.doSearch("init"),t(Object(S.c)({type:"init"}))):h.a.error(e.msg)})}})}),e.state={newsStatus:null,loading:!1,selectedRowKeys:[],idArr:[]},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,v["Component"]),n=t,(a=[{key:"channelName",value:function(e){var t="";return w.p.map(function(n,a){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"componentWillMount",value:function(){var e=this,t=this.props.search;this.doSearch(t.type?t.type:"init",""===t.keys?{}:{keys:t.keys}),D=[{title:"新闻标题",width:"250px",key:"title",render:function(t,n){return k.a.createElement("div",{className:"comment-info clearfix"},k.a.createElement("div",{className:"news-link"},k.a.createElement("a",{target:"_blank",href:"//www.huoxing24.com/newsdetail?id=".concat(n.newsId)},k.a.createElement("h4",{title:n.title,dangerouslySetInnerHTML:e.createMarkup(Object(w.q)(n.title,40))}))))}},{title:"评论内容",key:"content",width:350,render:function(t){return k.a.createElement("span",{title:t.content,className:"reply-content",dangerouslySetInnerHTML:e.createMarkup(t.content)})}},{title:"昵称",dataIndex:"userNickName",key:"userNickName"},{title:"评论时间",key:"createTime",render:function(e){return Object(w.w)(e.createTime)}},{title:"操作",key:"action",render:function(t){return k.a.createElement("div",null,k.a.createElement("a",{onClick:function(){return e.delPost(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除"),k.a.createElement("a",{onClick:function(){return e.insertBlack(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#e59e21"}},"加入黑名单"))}}]}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(S.c)({keys:"",type:"init",nickName:"",title:""})),e(Object(S.b)({currPage:1,pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"doSearch",value:function(e,t){var n=this;this.setState({loading:!0});var a=this.props,r=a.dispatch,c=a.pageData,o=a.search,i={pageSize:20,currentPage:c.currPage};"init"!==e&&(i=E({},i,{keys:o.keys})),i=E({},i,t),r(Object(S.a)(e,i,function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props,t=e.dispatch,n="init";n=e.search.keys?"search":"init",this.doSearch(n,{currentPage:1}),t(Object(S.c)({type:n})),t(Object(S.b)({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,n=t.dispatch,a=t.search;n(Object(S.b)({currPage:e})),this.doSearch(a.type,{currentPage:e,keys:a.keys})}},{key:"delPost",value:function(e){var t=this.props.dispatch,n=this;x({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={id:e.id,status:0};Object(w.i)("POST","/comment/status",E({},a),function(e){1===e.code?(h.a.success("删除成功"),n.doSearch("init"),t(Object(S.c)({type:"init"}))):h.a.error(e.msg)})}})}},{key:"insertBlack",value:function(e){var t=this;x({title:"提示",content:"确认要将此账号加入黑名单吗 ?",onOk:function(){var n={nickname:e.userNickName};Object(w.i)("POST","/blacklist/addblacklist_by_nickname",E({},n),function(e){1===e.code?(h.a.success("操作成功"),t.doSearch("init")):h.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.pageData,c=t.dispatch,i=t.search,u=this.state,f=u.selectedRowKeys,m=u.loading,y={selectedRowKeys:f,onChange:this.onSelectChange},h=f.length>0;return k.a.createElement("div",{className:"comment-index"},k.a.createElement(s.a,{style:{width:800}},k.a.createElement(d.a,{span:2,className:"form-label"},"关键字："),k.a.createElement(d.a,{span:4},k.a.createElement(p.a,{value:i.keys,onChange:function(e){return c(Object(S.c)({keys:e.target.value}))},onPressEnter:function(){e._search()},placeholder:"请输入关键字搜索"})),k.a.createElement(d.a,{span:1,offset:1},k.a.createElement(l.a,{type:"primary",onClick:function(){e._search()}},"搜索")),k.a.createElement(d.a,{offset:2,span:5},k.a.createElement(l.a,{type:"primary",onClick:this.batchDelete,disabled:!h,loading:m},"批量删除"),k.a.createElement("span",{style:{marginLeft:8}},h?"已选择 ".concat(f.length," 条"):""))),k.a.createElement("div",{className:"mt30"},k.a.createElement(r.a,{spinning:this.state.loading,size:"large"},k.a.createElement(o.a,{rowSelection:y,dataSource:n.map(function(e,t){return E({},e,{key:t})}),columns:D,bordered:!0,pagination:{current:a.currPage,total:a.totalCount,pageSize:a.pageSize,onChange:function(t){return e.changePage(t)}}}))))}}])&&P(n.prototype,a),c&&P(n,c),t}();t.default=Object(O.connect)(function(e){return{commentInfo:e.commentInfo,list:e.commentInfo.list,search:e.commentInfo.search,filter:e.commentInfo.filter,pageData:e.commentInfo.pageData}})(I)},1754:function(e,t,n){var a=n(1755);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1755:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])},1756:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l});n(361);var a=n(20),r=n.n(a),c=n(48),o=n(2);var i=function(e,t,n){return function(a){var o="init"===e?"/comment/showcomment":"/comment/search";Object(c.i)("get",o,t||{},function(e){if(1===e.code){var t=e.obj;a(s({list:t.inforList})),a(l({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),n&&n(t)}else r.a.error(e.msg)})}},s=function(e){return{type:o.x.ADD_DATA,data:e}},u=function(e){return{type:o.x.SET_SEARCH_QUERY,data:e}},l=function(e){return{type:o.x.SET_PAGE_DATA,data:e}}}).call(this,n(97))}}]);