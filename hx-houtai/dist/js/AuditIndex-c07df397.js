(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1448:function(e,t,a){"use strict";a.r(t);a(1376);var n=a(1377),r=a.n(n),i=(a(675),a(676)),o=a.n(i),c=(a(1385),a(1386)),s=a.n(c),l=(a(1381),a(1382)),u=a.n(l),p=(a(1383),a(1384)),d=a.n(p),f=(a(247),a(183)),h=a.n(f),m=(a(184),a(1378)),b=a.n(m),y=(a(361),a(20)),g=a.n(y),v=(a(677),a(362)),w=a.n(v),S=a(0),k=a.n(S),E=a(246),O=(a(1627),a(1695)),j=a(48);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}function I(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=w.a.Option,z=[],V=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=C(t).call(this),e=!n||"object"!==N(n)&&"function"!=typeof n?_(a):n,x(_(e),"handleChange",function(t){(0,e.props.dispatch)(Object(O.c)({status:t})),e.setState({auditStatus:t,loading:!0}),e.doSearch("init",{currentPage:1,state:t})}),x(_(e),"typeChange",function(t){(0,e.props.dispatch)(Object(O.c)({type:t})),e.setState({loading:!0}),e.doSearch("init",{currentPage:1,type:t})}),x(_(e),"handleOk",function(t){e.setState({visible:!1})}),x(_(e),"handleCancel",function(t){e.setState({visible:!1})}),x(_(e),"handleImgModalCancel",function(){return e.setState({previewVisible:!1})}),x(_(e),"handlePreview",function(t){e.setState({previewImage:t.target.getAttribute("src"),previewVisible:!0})}),e.state={loading:!0,auditStatus:null,visible:!1,previewVisible:!1,previewImage:""},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,S["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.search,n=t.filter;this.doSearch(a.type?a.type:"init",{state:n.status}),z=[{title:"作者昵称",width:130,dataIndex:"nickName",key:"nickName",render:function(e,t){return k.a.createElement("h3",{title:t.nickName},t.nickName?Object(j.q)(t.nickName,30):"暂无")}},{title:"MarsBit账号",width:130,dataIndex:"phoneNum",key:"phoneNum",render:function(e,t){return k.a.createElement("h3",{title:t.phoneNum},t.phoneNum?Object(j.q)(t.phoneNum,30):"暂无")}},{title:"审核状态",key:"state",width:160,render:function(t){return 0===t.state?k.a.createElement("span",{className:"state-btns pre-identify"},e.auditStatus(t.state)):1===t.state?k.a.createElement("span",{className:"state-btns pass-identify"},e.auditStatus(t.state)):-1===t.state?k.a.createElement("div",null,k.a.createElement("span",{className:"state-btns cant-identify"},e.auditStatus(t.state))):-2===t.state?k.a.createElement("span",{className:"state-btns hasnot-identify"},e.auditStatus(t.state)):e.auditStatus(t.state)}},{title:"认证类型",dataIndex:"type",width:160,key:"type",render:function(e){return 3===e?k.a.createElement("span",{className:"state-btns company-v"},"企业认证"):1===e?k.a.createElement("span",{className:"state-btns personal-v"},"个人认证 "):2===e?k.a.createElement("span",{className:"state-btns media-v"},"媒体认证"):k.a.createElement("span",{className:"state-btns ordinary-v"},"普通")}},{title:"提交时间",key:"createTime",width:130,render:function(e){return Object(j.w)(e.createTime)}},{title:"操作",key:"action",width:110,render:function(t){return k.a.createElement("div",null,0===t.state?k.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.detailModal(t)},style:{background:"#108ee9"}},"开始审核"):-2===t.state?k.a.createElement("a",{disabled:!0,className:"mr10 opt-btn disabled"},"未提交信息"):k.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.detailModal(t)},style:{background:"#E95D01"}},"重新审核"))}}]}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(O.e)({type:"init",nickName:"",title:""})),e(Object(O.d)({pageSize:200,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"auditStatus",value:function(e){var t="";return j.g.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,i=n.pageData,o=n.search,c=n.filter,s={type:c.type,state:c.status,search:o.search,pageSize:20,currentPage:i.currPage};s=P({},s,t),r(Object(O.a)(e,s,function(){a.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(Object(O.d)({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.filter;a(Object(O.d)({currPage:e})),this.doSearch("init",{currentPage:e,state:n.status})}},{key:"detailModal",value:function(e){var t=this.props.dispatch,a={passportId:e.passportid};Object(j.i)("get","/account/getRealAuthByPassportId",a,function(a){1===a.code?(t(Object(O.b)(a.obj)),window.sessionStorage.setItem("hx_identify_info",JSON.stringify(a.obj)),window.location.href="".concat(window.location.origin,"/#/audit-details?id=").concat(e.passportid)):g.a.error(a.msg)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.filter,i=t.dispatch,c=t.search,l=t.pageData;return k.a.createElement("div",{className:"audit-index"},k.a.createElement(u.a,null,k.a.createElement(d.a,{span:22,className:"audit-position"},k.a.createElement("span",null,"审核状态："),k.a.createElement(w.a,{defaultValue:"".concat(n.status),style:{width:120},onChange:this.handleChange},j.g.map(function(e){return k.a.createElement(D,{value:e.value,key:e.value},e.label)})),k.a.createElement(b.a,{value:c.search,style:{width:150,margin:"0 15px"},onChange:function(e){return i(Object(O.e)({search:e.target.value}))},placeholder:"手机号/昵称/姓名",onPressEnter:function(){e._search()}}),k.a.createElement(h.a,{type:"primary",onClick:function(){e._search()}},"搜索"),k.a.createElement(h.a,{type:"primary",style:{marginLeft:15},onClick:function(){e.doSearch("init")},shape:"circle",icon:"reload"}))),k.a.createElement("div",{className:"mt30"},k.a.createElement(o.a,{spinning:this.state.loading,size:"large"},k.a.createElement(s.a,{dataSource:a.map(function(e,t){return P({},e,{key:t})}),columns:z,bordered:!0,pagination:{current:l.currPage,total:l.totalCount,pageSize:l.pageSize,onChange:function(t){return e.changePage(t)}}}))),k.a.createElement(r.a,{className:"pre-Modal",visible:this.state.previewVisible,footer:null,onCancel:this.handleImgModalCancel},k.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})))}}])&&I(a.prototype,n),i&&I(a,i),t}();t.default=Object(E.connect)(function(e){return{auditInfo:e.auditInfo,selectedData:e.auditInfo.selectedData,list:e.auditInfo.list,search:e.auditInfo.search,filter:e.auditInfo.filter,pageData:e.auditInfo.pageData}})(V)}}]);