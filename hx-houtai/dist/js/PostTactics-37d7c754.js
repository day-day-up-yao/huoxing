(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{1478:function(t,e,a){"use strict";a.r(e);a(184);var n=a(1378),r=a.n(n),s=(a(675),a(676)),i=a.n(s),o=(a(1385),a(1386)),c=a.n(o),l=(a(1381),a(1382)),u=a.n(l),f=(a(1383),a(1384)),p=a.n(f),m=(a(247),a(183)),g=a.n(m),y=(a(361),a(20)),d=a.n(y),h=(a(1379),a(1380)),b=a.n(h),v=(a(678),a(363)),C=a.n(v),k=(a(677),a(362)),E=a.n(k),O=(a(1376),a(1377)),w=a.n(O),S=a(0),j=a.n(S),T=a(246),P=(a(1797),a(48)),N=a(1608);function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(){return(I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){q(t,e,a[e])})}return t}function M(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var z=w.a.confirm,A=E.a.Option,F=C.a.Group,H={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},J=[],G=b.a.Item,R=function(t){function e(){var t,a,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,n=x(e).call(this),t=!n||"object"!==L(n)&&"function"!=typeof n?D(a):n,q(D(t),"handleTacticsList",function(e){var a=t.props.dispatch,n=D(t);a(Object(N.a)("post",{pageSize:20,status:e,currentPage:1},function(){n.setState({loading:!1})}))}),q(D(t),"handleImgModalCancel",function(){return t.setState({previewVisible:!1})}),q(D(t),"handleChange",function(e){var a=D(t);t.setState({statusChang:e},function(){a.handleTacticsList(e)})}),q(D(t),"cancelModal",function(){var e=t.props.form;t.setState({visible:!1}),e.resetFields()}),t.state={loading:!0,newsStatus:null,previewVisible:!1,previewImage:"",visible:!1,confirmLoading:!1,statusChang:1,strategyCat:"",strategyCatName:"",rank:"",status:"",id:""},t}var a,n,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,S["Component"]),a=e,(n=[{key:"componentWillMount",value:function(){var t=this;this.handleTacticsList(""),J=[{title:"分类名称",key:"strategyCatName",render:function(e,a){return a&&j.a.createElement("div",{className:"postAccount-info clearfix"},j.a.createElement("div",null,j.a.createElement("h4",{title:a.strategyCatName,dangerouslySetInnerHTML:t.createMarkup(Object(P.q)(a.strategyCatName,30))})))}},{title:"分类ID",key:"strategyCat",render:function(t){return j.a.createElement("div",{key:t.strategyCat},t.strategyCat)}},{title:"分类状态",width:150,key:"status",render:function(t){return 1===t.status?"可用":0===t.status?"禁用":"已删除"}},{title:"时间",width:300,key:"updateTime",render:function(e){return j.a.createElement("p",{dangerouslySetInnerHTML:t.createMarkup(Object(P.w)(e.updateTime,"-",!0))})}},{title:"权重",key:"rank",render:function(t){return j.a.createElement("span",null,t.rank)}},{title:"操作",key:"action",render:function(e){return j.a.createElement("div",{className:"btns"},j.a.createElement("p",null,j.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){t.updateAccount(e)},style:{background:"#108ee9"}},"编辑")),j.a.createElement("p",null,j.a.createElement("a",{onClick:function(){return t.delPostTactics(e)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"createMarkup",value:function(t){return{__html:t}}},{key:"changePage",value:function(t){this.setState({loading:!0});var e=this;(0,this.props.dispatch)(Object(N.a)("post",{pageSize:20,status:this.state.statechange,currentPage:t},function(){e.setState({loading:!1})}))}},{key:"delPostTactics",value:function(t){var e=this;z({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={id:t.id};Object(P.i)("POST","/news/strategyCategory/del",_({},a),function(t){1===t.code?(d.a.success("删除成功"),e.handleTacticsList(e.state.statusChang)):d.a.error(t.msg)})}})}},{key:"addTactics",value:function(){var t=this,e=this.props.form;e.validateFields(function(a,n){if(a)return!1;t.setState({confirmLoading:!0});var r={strategyCat:n.strategyCat,strategyCatName:n.strategyCatName,rank:n.rank,status:n.status};""!==t.state.strategyCat&&(r=_({},r,{id:t.state.id}));var s=""===t.state.strategyCat?"/news/strategyCategory/add":"/news/strategyCategory/update";Object(P.i)("post",s,r,function(a){1===a.code?(d.a.success("操作成功!"),t.setState({visible:!1,confirmLoading:!1}),t.handleTacticsList(),e.resetFields()):(t.setState({confirmLoading:!1}),d.a.success(a.msg))})})}},{key:"updateAccount",value:function(t){this.setState({visible:!0,strategyCat:t.strategyCat,strategyCatName:t.strategyCatName,rank:t.rank,status:t.status,id:t.id})}},{key:"render",value:function(){var t=this,e=this.props,a=e.list,n=e.pageData,s=e.form.getFieldDecorator,o=this.state,l=o.visible,f=o.loading;return j.a.createElement("div",{className:"postAccount-index"},j.a.createElement(u.a,null,j.a.createElement(p.a,null,j.a.createElement("span",null,"账号状态："),j.a.createElement(E.a,{defaultValue:"",style:{width:100},onChange:this.handleChange},j.a.createElement(A,{value:""},"全部"),j.a.createElement(A,{value:"1"},"启用"),j.a.createElement(A,{value:"0"},"禁用")),j.a.createElement(g.a,{type:"primary",style:{margin:"0 0 0 15px"},onClick:function(){t.setState({visible:!0,strategyCat:"",strategyCatName:"",rank:"",status:"",id:""})}},"新增账号"))),j.a.createElement("div",{className:"mt30"},j.a.createElement(i.a,{spinning:f,size:"large"},j.a.createElement(c.a,{dataSource:a.map(function(t,e){return _({},t,{key:e})}),columns:J,bordered:!0,pagination:{current:n.currPage,total:n.recordCount,pageSize:n.pageSize,onChange:function(e){return t.changePage(e)}}}))),j.a.createElement(w.a,{title:"添加/修改分类",visible:l,confirmLoading:this.state.confirmLoading,onOk:function(){return t.addTactics()},onCancel:this.cancelModal},j.a.createElement(b.a,null,j.a.createElement(G,I({},H,{label:"分类昵称"}),s("strategyCatName",{rules:[{required:!0,message:"请输入分类昵称!"}],initialValue:""!==this.state.strategyCatName?this.state.strategyCatName:""})(j.a.createElement(r.a,null))),j.a.createElement(G,I({},H,{label:"分类ID"}),s("strategyCat",{rules:[{required:!0,message:"请输入分类ID!"}],initialValue:""!==this.state.strategyCat?this.state.strategyCat:""})(j.a.createElement(r.a,null))),j.a.createElement(G,I({},H,{label:"排序权重"}),s("rank",{rules:[{required:!0,message:"请输排序权重!"}],initialValue:""!==this.state.rank?this.state.rank:""})(j.a.createElement(r.a,null))),j.a.createElement(G,I({},H,{label:"状态"}),s("status",{rules:[{required:!0,message:"请选择状态!"}],initialValue:""!==this.state.status?this.state.status:1})(j.a.createElement(F,null,j.a.createElement(C.a,{value:1},"启用"),j.a.createElement(C.a,{value:0},"禁用")))))))}}])&&M(a.prototype,n),s&&M(a,s),e}();e.default=Object(T.connect)(function(t){return{list:t.postTacticsInfo.list,pageData:t.postTacticsInfo.pageData}})(b.a.create()(R))},1608:function(t,e,a){"use strict";a.d(e,"a",function(){return o});a(361);var n=a(20),r=a.n(n),s=a(48),i=a(2),o=function(t,e,a){return function(n){Object(s.i)(t,"/news/strategyCategory/showStrategyCategorylist",e,function(t){if(1===t.code){var e=t.obj;n({type:i.nb.LIST_POST_TACTICS,data:e}),a&&a(e)}else r.a.error(t.msg)})}}},1797:function(t,e,a){var n=a(1798);"string"==typeof n&&(n=[[t.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(t.exports=n.locals)},1798:function(t,e,a){(t.exports=a(185)(!1)).push([t.i,"",""])}}]);