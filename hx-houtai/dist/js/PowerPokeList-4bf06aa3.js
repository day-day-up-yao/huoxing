(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1556:function(e,t,n){"use strict";n.r(t);n(675);var r=n(676),a=n.n(r),o=(n(1385),n(1386)),i=n.n(o),c=(n(361),n(20)),s=n.n(c),u=(n(1376),n(1377)),l=n.n(u),p=n(0),f=n.n(p),h=n(246),b=(n(1816),n(48)),d=n(2),y=function(e){return{type:d.rb.ADD_DATA,data:e}},m=function(e){return{type:d.rb.SET_FILTER_DATA,data:e}},g=function(e){return{type:d.rb.SET_PAGE_DATA,data:e}};function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){O(e,t,n[t])})}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"pokeType",function(){return j});var _=l.a.confirm,j=[{label:"全部",value:""},{label:"黑桃",value:"1"},{label:"红桃",value:"2"},{label:"梅花",value:"3"},{label:"方块",value:"4"}],C=[],I=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=P(t).call(this),e=!r||"object"!==v(r)&&"function"!=typeof r?S(n):r,O(S(e),"handleChange",function(t){(0,e.props.dispatch)(m({type:t})),e.setState({type:t}),e.doSearch("init",{currentPage:1,type:t})}),O(S(e),"handleStatusChange",function(t){(0,e.props.dispatch)(m({status:t})),e.doSearch("init",{currentPage:1,status:t})}),O(S(e),"handleImgModalCancel",function(){return e.setState({previewVisible:!1})}),O(S(e),"handlePreview",function(t){e.setState({previewImage:t.target.getAttribute("src"),previewVisible:!0})}),e.state={loading:!0,status:null,previewVisible:!1,previewImage:"",order:1},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,p["Component"]),n=t,(r=[{key:"componentWillMount",value:function(){var e=this;this.doSearch("init"),C=[{title:"扑克名",key:"desc",render:function(t,n){return f.a.createElement("h3",{title:n.desc,dangerouslySetInnerHTML:e.createMarkup(n.desc?Object(b.q)(n.desc,30):"暂无")})}},{title:"扑克图",key:"picSmall",render:function(t){return f.a.createElement("div",{className:"shrinkPic",key:t.picSmall,style:{background:"url(".concat(t.picSmall,") no-repeat center / cover")},src:t.picSmall,onClick:e.handlePreview})}},{title:"状态",key:"status",render:function(e,t){return 1!==t.status?f.a.createElement("span",{className:"powerPoke-status pre-publish"},"未展示"):1===t.status?f.a.createElement("span",{className:"powerPoke-status has-publish"},"展示中"):f.a.createElement("span",null,"暂无")}},{title:"排序/展示",key:"option",render:function(t){var n="";switch(t.status){case 0:n=f.a.createElement("p",null,f.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){return e._isPublish(t)},style:{background:"#00b45a"}},"翻开"));break;case 1:n=f.a.createElement("p",null,f.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){return e._isPublish(t)},style:{background:"#e9892f"}},"关闭"));break;default:n=""}return f.a.createElement("div",{className:"btns"},n)}}]}},{key:"componentWillUnmount",value:function(){var e,t=this.props.dispatch;t(g({pageSize:20,totalCount:0})),t((e={},{type:d.xb,data:e}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"adPosition",value:function(e){var t="";return j.map(function(n,r){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"doSearch",value:function(e,t){var n=this;this.setState({loading:!0});var r=this.props,a=r.dispatch,o=r.pageData,i=r.filter,c={status:i.status,type:i.type,pageSize:20,currentPage:o.currPage};a(function(e,t,n){return function(r){var a="init"===e?"/powerChongqing/getPokerList":"/post/search";Object(b.i)("post",a,t||{},function(e){if(1===e.code){var t=e.obj;r(y({list:t})),n&&n(t)}else s.a.error(e.msg)})}}(e,c=k({},c,t),function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(g({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,n=t.dispatch,r=t.filter;n(g({currPage:e})),this.doSearch("init",{currentPage:e,type:r.type,status:r.status})}},{key:"_isPublish",value:function(e){var t=this.props.dispatch,n=this;_({title:"提示",content:"确认要".concat(0===e.status?"翻开":"翻回扑克牌","吗 ?"),onOk:function(){var r={id:e.id,status:1===e.status?0:1};Object(b.i)("POST","/powerChongqing/setPokerStatus",k({},r),function(e){var r;1===e.code?(s.a.success("操作成功"),n.doSearch("init"),t((r={type:"init"},{type:d.rb.SET_SEARCH_QUERY,data:r}))):s.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props.list;return f.a.createElement("div",{className:"powerPoke-index"},f.a.createElement("div",{className:"mt30"},f.a.createElement(a.a,{spinning:this.state.loading,size:"large"},f.a.createElement(i.a,{dataSource:t.map(function(e,t){return k({},e,{key:t})}),columns:C,bordered:!0,pagination:{pageSize:20,onChange:function(t){return e.changePage(t)}}}))),f.a.createElement(l.a,{className:"pre-Modal",visible:this.state.previewVisible,footer:null,onCancel:this.handleImgModalCancel},f.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})))}}])&&w(n.prototype,r),o&&w(n,o),t}();t.default=Object(h.connect)(function(e){return{powerPokeInfo:e.powerPokeInfo,selectData:e.powerPokeInfo.selectedData,list:e.powerPokeInfo.list,search:e.powerPokeInfo.search,filter:e.powerPokeInfo.filter,pageData:e.powerPokeInfo.pageData}})(I)},1816:function(e,t,n){var r=n(1817);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(186)(r,a);r.locals&&(e.exports=r.locals)},1817:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);