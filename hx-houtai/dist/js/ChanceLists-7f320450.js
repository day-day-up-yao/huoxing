(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1584:function(e,t,n){"use strict";n.r(t);n(1379);var a=n(1380),r=n.n(a),c=(n(675),n(676)),i=n.n(c),o=(n(1385),n(1386)),u=n.n(o),l=(n(247),n(183)),s=n.n(l),f=(n(184),n(1378)),p=n.n(f),h=(n(361),n(20)),d=n.n(h),g=(n(1376),n(1377)),y=n.n(g),m=n(0),b=n.n(m),v=n(246),k=(n(1691),n(10)),E=n(48),w=n(2);var O=function(e,t){return function(n){Object(E.i)("get","/chance/list",e,function(e){if(1===e.code){var a=e.obj;n({type:w.p.CHANCE_LISTS,data:a}),n(S({totalCount:a.recordCount,pageSize:a.pageSize,currPage:a.currentPage})),t&&t(a)}else d.a.error(e.msg)})}},S=function(e){return{type:w.p.CHANCE_PAGE_DATA,data:e}},C=n(51),P=n.n(C);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){L(e,t,n[t])})}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=y.a.confirm,z=[],D=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=x(this,A(t).call(this))).state={visible:!1,loading:!0,searchVal:""},e}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,m["Component"]),n=t,(a=[{key:"componentWillMount",value:function(){var e=this;this.getChanceListFn(1),z=[{title:"机会标题",key:"title",width:300,render:function(e,t){return b.a.createElement("div",{className:"flash-info clearfix"},b.a.createElement("div",null,b.a.createElement("h3",null,t.title)))}},{title:"关联标签",key:"tagsV2",width:200,dataIndex:"tagsV2",render:function(e){return b.a.createElement("p",null,""===e?[]:JSON.parse(e).map(function(e){return b.a.createElement("span",{style:{marginLeft:"10px"},key:e.id},e.name)}))}},{title:"图片",dataIndex:"bgPicUrl",width:100,render:function(e,t){return b.a.createElement("img",{src:t.bgPicUrl,alt:""})}},{title:"发表时间",width:80,key:"publishTime",render:function(t){return b.a.createElement("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:e.createMarkup(Object(E.w)(1e3*t.publishTime,"-",!0))})}},{title:"操作",key:"action",width:70,render:function(t){return b.a.createElement("div",{className:"btns"},b.a.createElement("p",null,b.a.createElement(k.Link,{className:"mr10 opt-btn",onClick:function(){e.setEditorCookies(t)},to:{pathname:"/cc-chanceAdd",query:{id:t.id}},style:{background:"#e35ba3"}},"编辑")),b.a.createElement("p",null,b.a.createElement("a",{onClick:function(){return e.delChance(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"delChance",value:function(e){var t=this.props,n=t.dispatch,a=t.pageData,r=this;V({title:"提示",content:"确认要删除吗 ?",onOk:function(){var t={id:e.id};Object(E.i)("POST","/chance/delete",_({},t),function(e){1===e.code?(r.setState({loading:!0}),d.a.success("删除成功"),n(O({currentPage:a.currPage},function(){r.setState({loading:!1})}))):d.a.error(e.msg)})}})}},{key:"changePage",value:function(e){var t=this,n=this.props.dispatch;this.setState({loading:!0}),n(O({currentPage:e},function(){t.setState({loading:!1})}))}},{key:"getChanceListFn",value:function(e){var t=this,n=this.props.dispatch,a={pageSize:20,currentPage:e,search:this.state.searchVal};n(O(_({},a),function(){t.setState({loading:!1})}))}},{key:"searchValue",value:function(e){var t=e.target.value;this.setState({searchVal:t})}},{key:"setEditorCookies",value:function(e){for(var t in e)P.a.set("hx_chance_"+t,e[t])}},{key:"render",value:function(){var e=this,t=this.props,n=t.chanceList,a=t.pageData;return b.a.createElement("div",{className:"flash-index"},b.a.createElement("span",{style:{marginLeft:15}},"机会标题/内容："),b.a.createElement(p.a,{onPressEnter:function(){e.getChanceListFn(1)},style:{width:150,marginRight:15},onChange:function(t){e.searchValue(t)},placeholder:"请输入要搜索的内容"}),b.a.createElement(s.a,{type:"primary",style:{marginRight:15},onClick:function(){e.getChanceListFn(1)}},"搜索"),b.a.createElement(s.a,{type:"primary",onClick:function(){k.hashHistory.push("/cc-chanceAdd")}},"新增机会"),b.a.createElement("div",{style:{marginTop:15}},b.a.createElement(i.a,{spinning:this.state.loading,size:"large"},b.a.createElement(u.a,{dataSource:n.map(function(e,t){return _({},e,{key:t})}),columns:z,bordered:!0,pagination:{current:a.currPage,total:a.totalCount,pageSize:a.pageSize,onChange:function(t){return e.changePage(t)}}}))))}}])&&T(n.prototype,a),r&&T(n,r),t}();t.default=Object(v.connect)(function(e){return{chanceList:e.chanceInfo.chanceList,pageData:e.chanceInfo.pageData}})(r.a.create()(D))}}]);