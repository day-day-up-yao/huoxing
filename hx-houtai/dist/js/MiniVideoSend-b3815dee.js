(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{1491:function(e,t,a){"use strict";a.r(t),function(e){a(675);var i=a(676),r=a.n(i),n=(a(1381),a(1382)),o=a.n(n),l=(a(1383),a(1384)),s=a.n(l),c=(a(1376),a(1377)),p=a.n(c),m=(a(680),a(250)),u=a.n(m),d=(a(1394),a(1395)),f=a.n(d),v=(a(681),a(682)),g=a.n(v),h=(a(1392),a(1393)),b=a.n(h),y=(a(247),a(183)),w=a.n(y),I=(a(1388),a(1389)),S=a.n(I),E=(a(1387),a(50)),L=a.n(E),C=(a(361),a(20)),O=a.n(C),U=(a(184),a(1378)),P=a.n(U),M=(a(1379),a(1380)),N=a.n(M),j=a(0),V=a.n(j),_=a(246),x=a(10),k=a(1407),A=a.n(k),D=a(1398),T=(a(1606),a(11)),F=a.n(T),q=a(1682),Y=a(48);a(1681);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function J(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var K=N.a.Item,Q=P.a.TextArea,X="",Z=1,ee=!1,te=function(t){function a(t){var i,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,n=z(a).call(this,t),i=!n||"object"!==H(n)&&"function"!=typeof n?G(r):n,$(G(i),"insertState",function(e){e.map(function(e){i.state[e+"fileList"]=[],i.state[e+"coverImgUrl"]=""})}),$(G(i),"fileList",function(e,t){return e[t]&&""!==e[t]?[{uid:0,name:"xxx.png",status:"done",url:e[t]}]:[]}),$(G(i),"renderData",function(e){var t=Object(Y.G)(e.coverPic)?JSON.parse(e.coverPic):{pc_recommend:"",pc:"",wap_big:"",wap_small:"",video_pc:"",video_m:""},a=i.fileList(t,"pc_recommend"),r=i.fileList(t,"video_pc"),n=i.fileList(t,"video_m"),o=i.fileList(t,"pc"),l=i.fileList(t,"wap_small"),s=i.fileList(t,"wap_big");i.setState({updateOrNot:!0,videoPcfileList:r,videoMfileList:n,fileList:o,pcfileList:a,mfileList:l,mcfileList:s,videofileList:Object(Y.G)(e.url)?JSON.parse(e.url):[],tags:e.tags?e.tags.split(","):[],newsContent:e.content,coverImgUrl:t.pc,allcoverImgUrl:t.all,pccoverImgUrl:t.pc_recommend||"",mcoverImgUrl:t.wap_small,mccoverImgUrl:t.wap_big,videoMcoverImgUrl:t.video_m,videoPccoverImgUrl:t.video_pc,videoUrl:Object(Y.G)(e.url)?JSON.parse(e.url)[0].fileUrl:"",loading:!1,original:e.original||0,subject:e.subject||1,topOrder:e.topOrder||0})}),$(G(i),"channelIdChange",function(e){i.setState({channelId:e.target.value})}),$(G(i),"cateIdChange",function(e){i.setState({cateId:e.target.value})}),$(G(i),"handleClose",function(e){var t=i.state.tags.filter(function(t){return t!==e});i.setState({tags:t})}),$(G(i),"showInput",function(){i.setState({inputVisible:!0},function(){return i.input.focus()})}),$(G(i),"handleInputChange",function(e){i.setState({inputValue:e.target.value})}),$(G(i),"handleInputConfirm",function(){var e=i.state,t=e.inputValue,a=e.tags;t&&-1===a.indexOf(t)&&(a=[].concat(J(a),[t.slice(0,8)])),i.setState({tags:a,inputVisible:!1,inputValue:""})}),$(G(i),"saveInputRef",function(e){i.input=e}),$(G(i),"handleCancel",function(){return i.setState({previewVisible:!1})}),$(G(i),"handlePreview",function(e){if(e.hasOwnProperty("target")){var t=e.target.getAttribute("data-type");""!==i.state[t]?i.setState({previewImage:i.state[t],previewVisible:!0}):O.a.info("请先上传图片")}else i.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),$(G(i),"handleChange",function(e){var t=e.file,a=e.fileList;i.setState({fileList:a}),"removed"===t.status&&i.setState({coverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&i.setState({coverImgUrl:t.response.obj}),"error"===t.status&&(O.a.error("网络错误，上传失败！"),i.setState({coverImgUrl:"",fileList:[]})))}),$(G(i),"handleMiniVideoPcChange",function(e){var t=e.file,a=e.fileList;i.setState({videoPcfileList:a}),"removed"===t.status&&i.setState({videoPccoverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&i.setState({videoPccoverImgUrl:t.response.obj}),"error"===t.status&&(O.a.error("网络错误，上传失败！"),i.setState({videoPccoverImgUrl:"",videoPcfileList:[]})))}),$(G(i),"handleMiniVideoMChange",function(e){var t=e.file,a=e.fileList;i.setState({videoMfileList:a}),"removed"===t.status&&i.setState({videoMcoverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&i.setState({videoMcoverImgUrl:t.response.obj}),"error"===t.status&&(O.a.error("网络错误，上传失败！"),i.setState({videoMcoverImgUrl:"",videoMfileList:[]})))}),$(G(i),"handlePcChange",function(e){var t=e.file,a=e.fileList;i.setState({pcfileList:a}),"removed"===t.status&&i.setState({pccoverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&i.setState({pccoverImgUrl:t.response.obj}),"error"===t.status&&(O.a.error("网络错误，上传失败！"),i.setState({pccoverImgUrl:"",pcfileList:[]})))}),$(G(i),"handleMobileChange",function(e){var t=e.file,a=e.fileList;i.setState({mfileList:a}),"removed"===t.status&&i.setState({mcoverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&i.setState({mcoverImgUrl:t.response.obj}),"error"===t.status&&(O.a.error("网络错误，上传失败！"),i.setState({mcoverImgUrl:"",mfileList:[]})))}),$(G(i),"handleMobileCommentChange",function(e){var t=e.file,a=e.fileList;i.setState({mcfileList:a}),"removed"===t.status&&i.setState({mccoverImgUrl:""}),t.response&&(1===t.response.code&&"done"===t.status&&i.setState({mccoverImgUrl:t.response.obj}),"error"===t.status&&(O.a.error("网络错误，上传失败！"),i.setState({mccoverImgUrl:"",mcfileList:[]})))}),$(G(i),"handleUpload",function(){var e=i.state.videoList[0],t=e.size,a=Math.ceil(t/2097152),r=new FormData;r.append("fileName",e.name),r.append("blockCount",a),r.append("currIndex",Z),r.append("uploadId",X),r.append("uploadFile",null),r.append("type","video"),i.setState({uploading:!0}),i.UploadMiniVideo(e,r,t,a,2097152)}),$(G(i),"UploadMiniVideo",function(e,t,a,r,n){if(!ee)try{var o=(Z-1)*n,l=Math.min(a,o+n),s=e.slice(o,l);t.set("uploadFile",s),t.set("currIndex",Z),t.set("uploadId",X),Object(Y.l)("post","/file/upload",t,function(o){if(o.request)return clearInterval(i.timeOut),i.timeOut=setTimeout(function(){i.UploadMiniVideo(e,t,a,r,n)},1e4),!1;if(o.response)return/^(5|4)\d{2}/.test(o.response.status)&&(clearInterval(i.timeOut),i.timeOut=setTimeout(function(){i.UploadMiniVideo(e,t,a,r,n)},1e4)),!1;if(1===o.code){clearInterval(i.timeOut),1===Z&&(X=o.obj);var l=Z/r*100;Z+1===r&&(l=99),i.setState({progressNum:parseFloat(l.toFixed(2))}),Z<r&&(Z+=1,i.UploadMiniVideo(e,t,a,r,n))}else if(o.code<0)X="",Z=1,O.a.error(o.msg);else if(2===o.code){clearInterval(i.timeOut),X="",Z=1;var s=i.state.videofileList,c=[];s.map(function(e,t){c.push({uid:e.uid,fileName:e.name,name:e.name,fileUrl:o.obj})}),i.setState({videoUrl:o.obj,videoList:[],videofileList:c,uploading:!1}),O.a.success("文件上传成功!")}})}catch(e){console.log(e)}}),$(G(i),"newsVisibleHide",function(){i.setState({newsVisible:!1})}),$(G(i),"newsVisibleShow",function(){i.setState({newsVisible:!0})}),$(G(i),"delMiniVideo",function(){i.setState({videofileList:[]})}),$(G(i),"uploadAllImg",function(t){var a=t.file,r=t.fileList,n=G(i);i.setState({allfileList:r}),"removed"===a.status&&(i.setState({allfilelist:[],allcoverImgUrl:""}),i.state.cropImgRule.map(function(e,t){var a;n.setState(($(a={},e.coverName,""),$(a,e.coverList,[]),a))})),a.response&&(1===a.response.code&&"done"===a.status&&i.setState({allcoverImgUrl:a.response.obj,uploadAllImgModal:!0,focusImg:-1},function(){var t=document.querySelector("#croppedImg");t.src=a.thumbUrl,n.setState({cropper:new D.a(t,{aspectRatio:i.state.ratio,crop:function(t){var a=this.cropper.getCroppedCanvas().toDataURL("image/jpeg"),i=e(".crop-preview-item"),r=n.state.focusImg;-1===r?i.each(function(t,i){e(this).children("img").attr("src",a)}):i.eq(r).children("img").attr("src",a)}})})}),"error"===a.status&&(O.a.error("网络错误，上传失败！"),i.setState({allcoverImgUrl:"",allfileList:[]})))}),$(G(i),"sureCropImg",function(){var t=G(i);i.setState({uploadAllImgModal:!1,loading:!0}),O.a.warning("上传中，请稍候！"),i.state.cropper.destroy(),e(".crop-preview-item").each(function(a,i){var r,n=e(this).data("type"),o=e(this).data("list");t.setState(($(r={},n,""),$(r,o,[]),r)),A()(e(this).get(0)).then(function(i){i.toBlob(function(i){var r=new FormData;r.append("uploadFile",i),e.ajax("".concat(Y.a,"/pic/upload"),{headers:{"Sign-Param":Object(Y.A)()},method:"POST",data:r,processData:!1,contentType:!1,success:function(e){var i;0===a&&(t.setState({loading:!1}),O.a.success("上传完毕！")),t.setState(($(i={},n,e.obj),$(i,o,[{uid:0,name:"xxx.png",status:"done",url:e.obj}]),i),function(){})},error:function(){console.log("Upload error")}})})})})}),$(G(i),"uploadAllImgCancel",function(){i.setState({uploadAllImgModal:!1}),i.state.cropper.destroy()}),$(G(i),"handleSubmit",function(e){e.preventDefault();var t=e.target.getAttribute("data-status");if(i.state.uploading)return O.a.warning("视频正在上传, 请稍候提交!"),!1;var a=Date.parse(i.props.form.getFieldValue("publishTime").format("YYYY-MM-DD HH:mm:ss")),r=Date.parse(new Date);return"3"===t&&a<=r?(O.a.warning("预发布时间应 大于 当前时间，请重新设置!"),!1):"1"===t&&a>r?(O.a.warning("直接发布的时间应 小于等于 当前时间，请重新设置!"),!1):(i.props.form.setFieldsValue({tags:i.state.tags.join(","),pc_recommend:i.state.pccoverImgUrl,pc:i.state.coverImgUrl,wap_small:i.state.mcoverImgUrl,wap_big:i.state.mccoverImgUrl,url:i.state.videofileList[0]&&i.state.videofileList[0].fileUrl?JSON.stringify(i.state.videofileList):""}),void i.props.form.validateFieldsAndScroll(function(e,a){e||(i.setState({loading:!0}),a.coverPic=JSON.stringify({pc_recommend:a.pc_recommend||"",pc:a.pc,wap_big:a.wap_big,wap_small:a.wap_small,video_pc:i.state.videoPccoverImgUrl,video_m:i.state.videoMcoverImgUrl}),a.publishTime=Date.parse(a.publishTime.format("YYYY-MM-DD HH:mm:ss")),a.createdBy="fff9d400cb94444fadaefd429516c276",a.topOrder=i.state.topOrder,delete a.pc,delete a.pc_recommend,delete a.wap_big,delete a.wap_small,delete a.video_pc,delete a.video_m,a.id=i.props.location.query.id||"",a.status="0"===t?"0":1,(!i.state.updateOrNot||!i.props.location.query.id)&&delete a.id,Object(Y.i)("post","".concat(i.state.updateOrNot&&i.props.location.query.id?"/miniappvideo/update":"/miniappvideo/add"),a,function(e){i.setState({loading:!1}),1===e.code?(O.a.success(i.state.updateOrNot?"修改成功！":"添加成功！"),x.hashHistory.push("/miniVideo-list")):O.a.error(e.msg)}))}))}),$(G(i),"sendVideo",function(e){var t={newsTitle:e.postTitle||"",newsContent:"".concat(e.postContent)||""};i.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){$(e,t,a[t])})}return e}({},i.state,t))}),$(G(i),"createMarkup",function(e){return{__html:e}}),$(G(i),"CropperImgCroped",function(e){console.log(e)}),$(G(i),"FormItem",function(e,t,a,r,n,o,l,s,c){var p=i.state.updateOrNot,m=i.props.form.getFieldDecorator,u=V.a.createElement("div",null,V.a.createElement(L.a,{type:"plus"}),V.a.createElement("div",{className:"ant-upload-text"},"上传图片"));return V.a.createElement(K,R({},{labelCol:{span:1},wrapperCol:{span:15,offset:1}},{label:a}),V.a.createElement("div",{className:"dropbox"},m(t,{initialValue:p&&n?o:"",rules:[{required:e,message:"请上传".concat(a,"封面！")}]})(V.a.createElement(S.a,{headers:{"Sign-Param":Object(Y.A)()},action:"".concat(Y.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:o,onPreview:i.handlePreview,onChange:l},o.length>=1?null:u)),c?"":V.a.createElement(w.a,{"data-type":r,onClick:i.handlePreview,className:"img-preview",type:"primary"},"预览"),V.a.createElement("span",{className:"cover-img-tip"},"用于 ",a," 的封面展示, 建议尺寸: ",V.a.createElement("font",{style:{color:"red"}},s))))}),i.state={updateOrNot:!1,topOrder:0,tags:[],videofileList:[],videoList:[],inputVisible:!1,inputValue:"",channelId:"1",newsVisible:!1,cateId:"1",previewVisible:!1,previewImage:"",videoUrl:"",uploading:!1,progressNum:0,loading:!0,original:0,subject:0,uploadAllImgModal:!1,cropper:null,focusImg:-1,ratio:2,cropImgRule:[{coverName:"mccoverImgUrl",coverList:"mcfileList",width:"640px",height:"320px",ratio:2,intro:"M端推荐新闻的滚动:640 * 320"},{coverName:"pccoverImgUrl",coverList:"pcfileList",width:"232px",height:"220px",ratio:232/220,intro:"PC端推荐位新闻封面:232 * 220"},{coverName:"coverImgUrl",coverList:"fileList",width:"280px",height:"205px",ratio:280/205,intro:"PC 端新闻封面:280 * 205"},{coverName:"mcoverImgUrl",coverList:"mfileList",width:"145px",height:"110px",ratio:145/110,intro:"M端新闻封面:145 * 110"}]},i}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(a,j["Component"]),i=a,(n=[{key:"componentWillMount",value:function(){this.insertState(["videoPc","videoM","all","","pc","m","mc"])}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,i=t.location;i.query.id||i.query.url?a(Object(q.b)({id:i.query.id},function(t){e.renderData(t)})):(this.setState({loading:!1}),sessionStorage.setItem("hx_content",""))}},{key:"changeActiveImg",value:function(e,t,a){var i=this;if(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a===this.state.focusImg)return!1;this.setState({ratio:t.ratio,focusImg:a},function(){i.state.cropper.setAspectRatio(t.ratio)})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,i=this.props.newsInfo,n=this.state,l=n.focusImg,c=n.allfileList,m=n.uploadAllImgModal,d=n.progressNum,v=n.videoPcfileList,h=n.videoMfileList,y=n.videofileList,I=n.uploading,E=n.previewVisible,C=n.previewImage,O=n.fileList,U=n.pcfileList,M=n.mfileList,j=n.mcfileList,_=n.tags,k=n.inputVisible,A=n.inputValue,D=n.newsContent,T=n.updateOrNot,q=n.newsVisible,H={labelCol:{span:1},wrapperCol:{span:15,offset:1}},J={action:"/file/upload",onRemove:function(t){e.setState(function(e){var a=e.fileList,i=a.indexOf(t),r=a.slice();return r.splice(i,1),{videoList:r,videofileList:r}})},beforeUpload:function(t){return e.setState({videoList:[t],videofileList:[t]}),!1},fileList:this.state.videofileList},B=V.a.createElement("div",null,V.a.createElement(L.a,{type:"plus"}),V.a.createElement("div",{className:"ant-upload-text"},"上传图片"));return V.a.createElement("div",{className:"miniVideo-send"},V.a.createElement(r.a,{spinning:this.state.loading,size:"large"},V.a.createElement(N.a,{onSubmit:this.handleSubmit},V.a.createElement(K,R({},H,{label:"作者: "}),a("author",{initialValue:T&&i?"".concat(i.author):"",rules:[{required:!0,message:"请输入视频作者！"}]})(V.a.createElement(P.a,{ref:function(t){e.authorInput=t},className:"news-author",placeholder:"请输入视频作者"}))),V.a.createElement(K,R({},H,{label:"来源: "}),a("source",{initialValue:T&&i?"".concat(i.source||""):"",rules:[{required:!0,message:"请输入视频来源！"}]})(V.a.createElement(P.a,{className:"news-source",placeholder:"请输入视频来源"}))),V.a.createElement(K,R({},H,{label:"发布日期: "}),a("publishTime",{rules:[{required:!0,message:"请选择新闻发布时间！"}],initialValue:T&&i?F()(Object(Y.w)(i.publishTime),"YYYY-MM-DD HH:mm:ss"):F()()})(V.a.createElement(b.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))),V.a.createElement(K,R({},H,{label:"视频上传"}),a("url",{rules:[{required:!0,message:"请上传视频！"}]})(V.a.createElement(S.a,R({},J,{name:"uploadFile"}),V.a.createElement(w.a,null,V.a.createElement(L.a,{type:"upload"})," 选择视频"))),0===y.length?"":y[0].fileName?V.a.createElement("div",null,V.a.createElement("video",{controls:!0,style:{width:150},src:e.state.videoUrl}),V.a.createElement("p",null,V.a.createElement("span",null,y[0].fileName),V.a.createElement("span",{onClick:e.delMiniVideo,style:{marginLeft:15,color:"#52b8fc",cursor:"pointer"}},"删除"))):void 0,V.a.createElement(w.a,{style:{marginTop:16},className:"upload-demo-start",type:"primary",onClick:this.handleUpload,disabled:0===this.state.videoList.length,loading:I},I?"上传中":"开始上传"),I&&V.a.createElement(g.a,{strokeWidth:5,style:{width:300,display:"block"},percent:d,status:"active"})),V.a.createElement(K,R({},H,{label:"PC播放器封面: "}),V.a.createElement("div",{className:"dropbox"},a("video_pc",{initialValue:T&&i?v:"",rules:[{required:!0,message:"请上传视频 PC 端播放器封面！"}]})(V.a.createElement(S.a,{headers:{"Sign-Param":Object(Y.A)()},action:"".concat(Y.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:v,onPreview:this.handlePreview,onChange:this.handleMiniVideoPcChange},v.length>=1?null:B)),V.a.createElement("span",{className:"cover-img-tip"},"用于 PC 端视频播放器的封面展示, 建议尺寸: ",V.a.createElement("font",{style:{color:"red"}},"850 * 480")))),V.a.createElement(K,R({},H,{label:"M播放器封面: "}),V.a.createElement("div",{className:"dropbox"},a("video_m",{initialValue:T&&i?h:"",rules:[{required:!0,message:"请上传视频 M 端播放器封面！"}]})(V.a.createElement(S.a,{headers:{"Sign-Param":Object(Y.A)()},action:"".concat(Y.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:h,onPreview:this.handlePreview,onChange:this.handleMiniVideoMChange},h.length>=1?null:B)),V.a.createElement("span",{className:"cover-img-tip"},"用于 M 端视频播放器的封面展示, 建议尺寸: ",V.a.createElement("font",{style:{color:"red"}},"640 * 视频高")))),V.a.createElement(K,R({},H,{label:"视频标题: "}),a("title",{initialValue:T&&i?"".concat(i.title):"",rules:[{required:!0,message:"请输入视频标题！"}]})(V.a.createElement(P.a,{placeholder:"请输入视频标题"}))),V.a.createElement(K,R({},H,{label:"视频简介: "}),a("content",{initialValue:T&&i?"".concat(i.content):"",rules:[{required:!0,message:"请输入视频简介"}]})(V.a.createElement(Q,{className:"news-summary",placeholder:"请输入视频简介",rows:4}))),V.a.createElement(K,R({},H,{label:"标签: "}),a("tags",{initialValue:this.state.tags.join(","),rules:[{required:!0,message:"至少输入一个标签！"}]})(V.a.createElement(P.a,{className:"tag-item",style:{display:"none"}})),V.a.createElement("div",null,_.map(function(t,a){var i=t.length>8,r=V.a.createElement(f.a,{color:"blue",key:t,closable:-1!==a,afterClose:function(){return e.handleClose(t)}},i?"".concat(t.slice(0,8)):t);return i?V.a.createElement(u.a,{title:t,key:t},r):r}),k&&V.a.createElement(P.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:120},value:A,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!k&&_.length<3&&V.a.createElement(f.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},V.a.createElement(L.a,{type:"plus"})," New Tag"),V.a.createElement("span",null,"建议每条视频最多 ",V.a.createElement("font",{style:{color:"red"}},"3")," 个标签, 每个标签最多",V.a.createElement("font",{style:{color:"red"}}," 8 "),"个字"))),V.a.createElement(K,R({},H,{label:"热度: "}),a("hotCounts",{initialValue:T&&i&&i.hotCounts||0,rules:[{required:!0,pattern:/^[0-9]+$/,message:"请输入视频热度值(正整数)！"}]})(V.a.createElement(P.a,{className:"news-source",placeholder:"请输入视频热度值"}))),V.a.createElement(K,R({},H,{label:"统一上传图片: "}),V.a.createElement("div",{className:"dropbox"},V.a.createElement(S.a,{headers:{"Sign-Param":Object(Y.A)()},action:"".concat(Y.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:c,onPreview:this.handlePreview,onChange:this.uploadAllImg},c.length>=1?null:B),V.a.createElement("span",{className:"cover-img-tip all-img"},"统一上传所有尺寸图片，自动剪裁适配尺寸"))),this.FormItem(!0,"pc","PC列表缩略图","coverImgUrl",i,O,this.handleChange,"285 * 160"),this.FormItem(!1,"pc_recommend","PC-推荐位","pccoverImgUrl",i,U,this.handlePcChange,"285 * 160 (暂定)"),this.FormItem(!0,"wap_small","M列表缩略图","mcoverImgUrl",i,M,this.handleMobileChange,"640 * 360"),this.FormItem(!1,"wap_big","M-推荐位","mccoverImgUrl",i,j,this.handleMobileCommentChange,"640 * 360(暂定)"),V.a.createElement(K,{wrapperCol:{span:12,offset:2}},V.a.createElement(w.a,{type:"primary","data-status":"1",onClick:this.handleSubmit,style:{marginRight:"10px"}},"发表"),V.a.createElement(w.a,{type:"primary","data-status":"3",onClick:this.handleSubmit,style:{marginRight:"10px"}},"定时发表"),V.a.createElement(w.a,{type:"primary","data-status":"0",onClick:this.handleSubmit,style:{marginRight:"10px"}},"存为草稿"),V.a.createElement(w.a,{type:"primary",className:"cancel",onClick:function(){x.hashHistory.goBack()}},"取消")),V.a.createElement(p.a,{height:"700px",width:"1280px",style:{top:"50px"},visible:m,onOk:this.sureCropImg,onCancel:this.uploadAllImgCancel},V.a.createElement("div",{className:"croper-wrap clearfix"},V.a.createElement("div",{className:"crop-img",id:"cropImgWrap"},V.a.createElement("img",{id:"croppedImg",src:"",alt:"Picture"})),V.a.createElement("div",{onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.setState({focusImg:-1})},className:"crop-preview"},this.state.cropImgRule.map(function(e,a){return V.a.createElement("div",{key:a,onClick:function(i){t.changeActiveImg(i,e,a)},className:"cropper-intro"},V.a.createElement("div",{className:"cropper-item-wrap ".concat(l===a?"active":"")},V.a.createElement("div",{"data-type":e.coverName,"data-list":e.coverList,className:"crop-preview-item",style:{width:e.width,height:e.height}},V.a.createElement("img",{src:"",alt:"",style:{width:"100%",height:"100%"}}))),V.a.createElement("span",null,e.intro))})))),V.a.createElement(p.a,{visible:q,footer:null,className:"newsModal",onCancel:this.newsVisibleHide,width:1e3},V.a.createElement(o.a,null,V.a.createElement(s.a,{className:"previewNews simditor"},V.a.createElement("p",{className:"simditor-body",style:{padding:10},dangerouslySetInnerHTML:this.createMarkup(D)})))),V.a.createElement(p.a,{visible:E,footer:null,onCancel:this.handleCancel},V.a.createElement("img",{alt:"example",style:{width:"100%"},src:C})))))}}])&&B(i.prototype,n),l&&B(i,l),a}();t.default=Object(_.connect)(function(e){return{userInfo:e.miniVideoInfo.userInfo,newsInfo:e.miniVideoInfo.info}})(N.a.create()(te))}.call(this,a(97))}}]);