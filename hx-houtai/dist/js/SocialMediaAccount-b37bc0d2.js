(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{1596:function(e,t,n){"use strict";n.r(t);n(675);var a=n(676),r=n.n(a),i=(n(1385),n(1386)),c=n.n(i),o=(n(1381),n(1382)),l=n.n(o),u=(n(1383),n(1384)),s=n.n(u),p=(n(247),n(183)),f=n.n(p),m=(n(184),n(1378)),d=n.n(m),y=(n(361),n(20)),h=n.n(y),b=(n(1379),n(1380)),g=n.n(b),v=(n(677),n(362)),w=n.n(v),E=(n(678),n(363)),S=n.n(E),k=(n(1376),n(1377)),O=n.n(k),P=n(0),j=n.n(P),A=n(246),D=(n(1837),n(1605)),_=n(48),C=n(2);function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){I(e,t,n[t])})}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){return{type:C.xb,data:e}},x=function(e){return{type:C.Db.ADD_DATA,data:e}},z=function(e){return{type:C.Db.SET_FILTER_DATA,data:e}},F=function(e){return{type:C.Db.SET_PAGE_DATA,data:e}};function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){L(e,t,n[t])})}return e}function V(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=O.a.confirm,H=S.a.Group,Q=w.a.Option,Y={labelCol:{xs:{span:2},sm:{span:4}},wrapperCol:{xs:{span:4},sm:{span:16}}},B=[],K=g.a.Item,X=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=q(t).call(this),e=!a||"object"!==W(a)&&"function"!=typeof a?G(n):a,L(G(e),"handleChange",function(t){(0,e.props.dispatch)(z({type:t})),e.setState({newsStatus:t}),e.doSearch("init",{currentPage:1,type:t})}),L(G(e),"cancelModal",function(){var t=e.props.form;e.setState({visible:!1}),t.resetFields()}),e.state={loading:!0,newsStatus:null,editNewsId:"",visible:!1,confirmDirty:!1},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,P["Component"]),n=t,(a=[{key:"channelName",value:function(e){var t="";return _.W.map(function(n,a){parseInt(n.value)===e&&(t=n.label)}),t}},{key:"componentWillMount",value:function(){var e=this;this.doSearch("init"),B=[{title:"ID",key:"id",render:function(e,t){return t.id}},{title:"链接",width:500,key:"url",render:function(e){return j.a.createElement("a",{target:"_blank",title:e.url,href:e.url},e.url)}},{title:"描述",key:"description",render:function(e){return j.a.createElement("span",null,e.description||"暂无")}},{title:"媒体类型",key:"type",render:function(e){return e&&1===e.type?j.a.createElement("span",{className:"twitter-type medium1"},"medium 作者"):e&&2===e.type?j.a.createElement("span",{className:"twitter-type medium2"},"medium 专题"):e&&3===e.type?j.a.createElement("span",{className:"twitter-type medium3"},"twitter作者"):e&&4===e.type?j.a.createElement("span",{className:"twitter-type medium4"},"新浪微博作者"):j.a.createElement("span",{className:"twitter-type"},"暂无")}},{title:"创建时间",key:"createTime",render:function(e){return Object(_.w)(e.create_time)}},{title:"操作",key:"action",render:function(t){return j.a.createElement("div",{className:"btns"},j.a.createElement("p",null,j.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.updateAccount(t)},style:{background:"#108ee9"}},"修改")),j.a.createElement("p",null,j.a.createElement("a",{onClick:function(){return e.delTwitterAccount(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(F({pageSize:20,totalCount:0}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"submitAccount",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.form,r=t.selectedData,i=this;a.validateFields(function(t,c){if(t)return!1;var o,l;delete c.confirm,r.id?Object(_.i)("post","/crawler/social/source/update",{id:r.id,type:c.type,description:c.description,url:c.url},function(t){1===t.code?(h.a.success("操作成功!"),e.setState({visible:!1}),a.resetFields(),i.doSearch("init")):h.a.success(t.msg)}):n((o=c,l=function(){e.setState({visible:!1}),a.resetFields(),e.doSearch("init")},function(e){Object(_.i)("post","/crawler/social/source/add",T({},o),function(e){l&&l(),1===e.code?h.a.success("添加成功！"):h.a.error(e.msg)})}))})}},{key:"updateAccount",value:function(e){this.props.dispatch(N(e)),this.setState({visible:!0})}},{key:"doSearch",value:function(e,t){var n=this,a=this.props,r=a.dispatch,i=a.pageData,c=a.search,o=a.filter;this.setState({loading:!0});var l=R({},o,""===c.like.trim()?{}:{like:c.like},{pageSize:20,currentPage:i.currPage});r(function(e,t,n){return function(a){var r="init"===e?"/crawler/social/source/list":"/post/search";Object(_.i)("get",r,t?T({},t):{},function(e){if(1===e.code){var t=e.obj;a(x({list:t.inforList})),a(F({totalCount:t.recordCount,pageSize:t.pageSize,currPage:t.currentPage})),n&&n(t)}else h.a.error(e.msg)})}}(e,l=R({},l,t),function(){n.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(F({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,n=t.dispatch,a=t.filter;n(F({currPage:e})),this.doSearch("init",R({currentPage:e},a))}},{key:"delTwitterAccount",value:function(e){var t=this;U({title:"提示",content:"确认要删除吗?",onOk:function(){var n={id:e.id};t.setState({loading:!0}),Object(_.i)("POST","/crawler/social/source/delete",R({},n),function(e){t.setState({loading:!1}),1===e.code?(h.a.success("删除成功"),t.doSearch("init")):h.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.pageData,i=t.filter,o=t.search,u=t.dispatch,p=t.form,m=t.selectedData,y=p.getFieldDecorator;return j.a.createElement("div",{className:"twitterAccount-index"},j.a.createElement(l.a,null,j.a.createElement(s.a,null,j.a.createElement("span",null,"账号类型："),j.a.createElement(w.a,{defaultValue:"".concat(i.type),style:{width:100},onChange:this.handleChange},j.a.createElement(Q,{value:""},"全部"),_.W.map(function(e,t){return j.a.createElement(Q,{value:e.value,key:t},e.label)})),j.a.createElement(d.a,{value:o.like,style:{width:150,margin:"0 15px"},onChange:function(e){return u((t={value:e.target.value},{type:C.Db.SET_SEARCH_QUERY,data:t}));var t},placeholder:"输入关键字进行搜索"}),j.a.createElement("span",null,j.a.createElement(f.a,{type:"primary",onClick:function(){e._search()}},j.a.createElement(D.a,{type:"icon-search"}),"搜索"),j.a.createElement(f.a,{type:"primary",style:{margin:"0 0 0 15px"},onClick:function(){e.setState({visible:!0}),u(N({}))}},j.a.createElement(D.a,{type:"icon-post-send"}),"新增")))),j.a.createElement("div",{className:"mt30"},j.a.createElement(r.a,{spinning:this.state.loading,size:"large"},j.a.createElement(c.a,{dataSource:n.map(function(e,t){return R({},e,{key:t})}),columns:B,bordered:!0,pagination:{current:a.currPage,total:a.totalCount,pageSize:a.pageSize,onChange:function(t){return e.changePage(t)}}}))),j.a.createElement(O.a,{title:"添加/修改账号",visible:this.state.visible,onOk:function(){return e.submitAccount()},onCancel:this.cancelModal},j.a.createElement(g.a,null,j.a.createElement(K,M({},Y,{label:"简介"}),y("description",{rules:[{required:!0,message:"请输入相关简介!"}],initialValue:m.description?m.description:""})(j.a.createElement(d.a,{placeholder:"请输入相关简介"}))),j.a.createElement(K,M({},Y,{label:"链接"}),y("url",{rules:[{required:!0,message:"请输入手机号!"},{type:"url",message:"请输入正确的链接地址"}],initialValue:m.url?m.url:""})(j.a.createElement(d.a,{placeholder:"请输入链接地址"}))),j.a.createElement(K,M({},Y,{label:"媒体类型"}),y("type",{initialValue:m.type?"".concat(m.type):"1"})(j.a.createElement(H,null,_.W.map(function(e,t){return j.a.createElement(S.a,{value:e.value,key:t},e.label)})))))))}}])&&V(n.prototype,a),i&&V(n,i),t}();t.default=Object(A.connect)(function(e){return{twitterAccountInfo:e.twitterAccountInfo,list:e.twitterAccountInfo.list,search:e.twitterAccountInfo.search,filter:e.twitterAccountInfo.filter,pageData:e.twitterAccountInfo.pageData,selectedData:e.twitterAccountInfo.selectedData}})(g.a.create()(X))},1837:function(e,t,n){var a=n(1838);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(186)(a,r);a.locals&&(e.exports=a.locals)},1838:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);