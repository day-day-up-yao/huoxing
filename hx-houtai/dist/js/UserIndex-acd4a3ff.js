(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{1442:function(e,t,n){"use strict";n.r(t);n(1385);var r=n(1386),a=n.n(r),o=(n(1381),n(1382)),u=n.n(o),c=(n(247),n(183)),i=n.n(c),s=(n(1383),n(1384)),f=n.n(s),l=(n(184),n(1378)),p=n.n(l),d=(n(1387),n(50)),m=n.n(d),y=n(0),b=n.n(y),g=n(246),h=n(1645),O=n(1666),E=(n(1646),n(10)),v=n(1605);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=[],w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,y["Component"]),n=t,(r=[{key:"componentWillMount",value:function(){var e=this;this.doSearch({}),C=[{title:"发帖用户信息",key:"name",render:function(e,t){return b.a.createElement("div",{className:"user-info"},b.a.createElement("div",{className:"img-box"},b.a.createElement("img",{src:t.userIcon})),b.a.createElement("div",null,t.nickName))}},{title:"发帖数 ",dataIndex:"postsCount",key:"postsCount"},{title:"评论数 ",dataIndex:"replyCount",key:"replyCount"},{title:"状态",key:"lastTime",render:function(e){return b.a.createElement("div",null,O.b[e.status])}},{title:"操作",key:"action",render:function(t){return b.a.createElement("div",null,b.a.createElement(E.Link,{className:"mr10",onClick:function(){return e.resetPageData()},to:{pathname:"/postUser-detail",query:{userName:t.userName,userId:t.userId}}},"详情"),b.a.createElement("a",{className:"mr10",onClick:function(){return e.changeStatus(t)},href:"javascript:void(0)"},t.status?"禁用":"启用"))}}]}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(Object(h.n)({searchQuery:""})),e(Object(h.m)({currPage:1,pageSize:10,totalCount:0}))}},{key:"resetPageData",value:function(){var e=this.props.dispatch,t={currPage:1,pageSize:10,totalCount:0};e(Object(h.k)(t)),e(Object(h.l)(t))}},{key:"doSearch",value:function(e){var t=this.props,n=t.dispatch,r=t.search,a=t.pageData,o=e?P({nickName:r.searchQuery,page:a.currPage},e):{nickName:r.searchQuery,page:a.currPage};n(Object(h.j)(o))}},{key:"changeStatus",value:function(e){var t=this,n=this.props.dispatch,r={userId:e.userId,operate:e.status?"0":"1"};n(Object(h.b)(r,function(){t.doSearch()}))}},{key:"changePage",value:function(e){this.props.dispatch(Object(h.m)({currPage:e})),this.doSearch({page:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.pageData,o=t.search,c=t.dispatch;return b.a.createElement("div",{className:"postUser-index"},b.a.createElement(u.a,null,b.a.createElement(f.a,{span:5},b.a.createElement(p.a,{value:o.searchQuery,onChange:function(e){return c(Object(h.n)({searchQuery:e.target.value}))},placeholder:"请输入发帖昵称",prefix:b.a.createElement(m.a,{type:"search"})})),b.a.createElement(f.a,{offset:1,span:2},b.a.createElement(i.a,{type:"primary",onClick:function(){return e.doSearch({page:1})}},b.a.createElement(v.a,{type:"icon-search"}),"搜索"))),b.a.createElement("div",{className:"mt30"},b.a.createElement(a.a,{dataSource:n.map(function(e,t){return P({},e,{key:t})}),columns:C,bordered:!0,pagination:{current:r.currPage,total:r.totalCount,pageSize:r.pageSize,onChange:function(t){return e.changePage(t)}}})))}}])&&k(n.prototype,r),o&&k(n,o),t}();t.default=Object(g.connect)(function(e){return{list:e.userPostInfo.list,search:e.userPostInfo.search,pageData:e.userPostInfo.pageData}})(w)},1645:function(e,t,n){"use strict";(function(e){n.d(t,"j",function(){return s}),n.d(t,"h",function(){return f}),n.d(t,"g",function(){return l}),n.d(t,"b",function(){return p}),n.d(t,"i",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return y}),n.d(t,"a",function(){return g}),n.d(t,"f",function(){return h}),n.d(t,"e",function(){return O}),n.d(t,"n",function(){return E}),n.d(t,"m",function(){return v}),n.d(t,"k",function(){return S}),n.d(t,"l",function(){return P});n(361);var r=n(20),a=n.n(r),o=n(48),u=n(2);function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(t,n){return function(r){Object(o.i)("POST","/user/list",c({},t,{appId:e.cookie("gameId")}),function(e){if(200===e.status){var t=e.data;r(b({list:t?t.datas:[]})),r(v({totalCount:t.totalCount,pageSize:t.pageSize,currPage:t.currentIndex})),n&&n(t)}else a.a.error(e.msg)})}},f=function(t,n){return function(r){Object(o.i)("POST","/post/getByUserName",c({},t,{appId:e.cookie("gameId")}),function(e){if(200===e.status){var t=e.data;r(b({postList:t.datas})),r(S({totalCount:t.totalCount,pageSize:t.pageSize,currPage:t.currentIndex})),n&&n(t)}else a.a.error(e.msg)})}},l=function(t,n){return function(r){Object(o.i)("POST","/reply/getByUserName",c({},t,{appId:e.cookie("gameId")}),function(e){if(200===e.status){var t=e.data;r(b({commentList:t.datas})),r(P({totalCount:t.totalCount,pageSize:t.pageSize,currPage:t.currentIndex})),n&&n(t)}else a.a.error(e.msg)})}},p=function(t,n){return function(r){Object(o.i)("post","/user/forbid",c({},t,{appId:e.cookie("gameId")}),function(e){200===e.status?n&&n():a.a.error(e.msg)})}},d=function(e){return function(t){Object(o.i)("post","/user/getbyid",c({},e),function(e){200===e.status?t(b({query:e.data})):a.a.error(e.msg)})}},m=function(t,n){return function(r){Object(o.i)("post","/post/del",c({},t,{appId:e.cookie("gameId")}),function(e){200===e.status?(a.a.success("删除成功"),n&&n()):a.a.error(e.msg)})}},y=function(t,n){return function(r){Object(o.i)("POST","/reply/del",c({},t,{appId:e.cookie("gameId")}),function(e){200===e.status?(a.a.success("删除成功"),n&&n()):a.a.error(e.msg)})}},b=function(e){return{type:u.Eb.ADD_DATA,data:e}},g=function(e){return{type:u.Eb.ADD_QUERY,data:e}},h=function(e,t){return{type:u.Eb.EDIT_USER_POST_LIST_ITEM,data:e,index:t}},O=function(e,t){return{type:u.Eb.EDIT_COMMENT_LIST_ITEM,data:e,index:t}},E=function(e){return{type:u.Eb.SET_SEARCH_QUERY,data:e}},v=function(e){return{type:u.Eb.SET_PAGE_DATA,data:e}},S=function(e){return{type:u.Eb.SET_POST_LIST_PAGE_DATA,data:e}},P=function(e){return{type:u.Eb.SET_COMMENT_LIST_PAGE_DATA,data:e}}}).call(this,n(97))},1646:function(e,t,n){var r=n(1670);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(186)(r,a);r.locals&&(e.exports=r.locals)},1670:function(e,t,n){(e.exports=n(185)(!1)).push([e.i,"",""])}}]);