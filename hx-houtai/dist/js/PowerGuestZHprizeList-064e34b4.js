(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{1590:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),i=(a(1385),a(1386)),o=a.n(i),l=(a(1381),a(1382)),c=a.n(l),u=(a(1383),a(1384)),s=a.n(u),d=(a(247),a(183)),p=a.n(d),f=(a(184),a(1378)),m=a.n(f),h=(a(361),a(20)),b=a.n(h),y=(a(1376),a(1377)),w=a.n(y),g=a(0),v=a.n(g),S=a(246),O=(a(1390),a(1391)),E=a.n(O),k=(a(1379),a(1380)),j=a.n(k),C=a(48);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=j.a.Item,x=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=N(this,V(t).call(this,e))).state={previewVisible:!1,loading:!0},a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,g["Component"]),a=t,(n=[{key:"agendaAddSubmit",value:function(){var e=this,t=this;this.props.form.validateFields(function(a,n){if(a)return!1;var r=e.props.data.id?"/power3/award/update":"/power3/award/add";Object(C.i)("POST",r,{id:e.props.data.id,awardName:n.awardName,awardTime:n.awardTime,winner:n.winner,awardSeq:n.awardSeq},function(a){1===a.code&&(e.props.onCancel(),location.reload(),t.setState({loading:!1}))})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,r=t.form,i=t.loading,o=t.data,l=r.getFieldDecorator,c={labelCol:{span:4},wrapperCol:{span:18,offset:1}};return v.a.createElement(w.a,{visible:a,title:"添加/编辑奖项",okText:"确定",onCancel:n,onOk:function(){e.agendaAddSubmit()},confirmLoading:i},v.a.createElement(j.a,null,v.a.createElement(I,T({},c,{label:"奖项名称"}),l("awardName",{initialValue:o.id?"".concat(o.awardName):"",rules:[{required:!0,message:"请选择奖项名称！"}]})(v.a.createElement(m.a,{rows:2,type:"text"}))),v.a.createElement(I,T({},c,{label:"揭晓时间"}),l("awardTime",{initialValue:o.id?"".concat(o.awardTime):"",rules:[{required:!0,message:"请选择揭晓时间！"}]})(v.a.createElement(m.a,{rows:2,type:"text"}))),v.a.createElement(I,T({},c,{label:"获奖人员"}),l("winner",{initialValue:o.id?o.winner:"",rules:[{required:!0,message:'请输入获奖人员"！'}]})(v.a.createElement(m.a,{rows:4,type:"textarea"}))),v.a.createElement(I,T({},c,{className:"collection-create-form_last-form-item",label:"排序权重"}),l("awardSeq",{initialValue:o.id?o.awardSeq:0,rules:[{required:!0,message:'请输入择排序权重"！'}]})(v.a.createElement(E.a,{placeholder:"权重越大排序越靠前"})))))}}])&&_(a.prototype,n),r&&_(a,r),t}(),z=j.a.create()(x),L=(a(1637),a(1638));function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){J(e,t,a[t])})}return e}function A(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Z=w.a.confirm,G=[],W=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=R(t).call(this),e=!n||"object"!==M(n)&&"function"!=typeof n?F(a):n,J(F(e),"getOrderNum",function(t){e.setState({order:t})}),J(F(e),"showModal",function(){e.setState({data:{visible:!0}})}),J(F(e),"handleCancel",function(){e.setState({data:{visible:!1}})}),J(F(e),"handleImgModalCancel",function(){return e.setState({previewVisible:!1})}),J(F(e),"handlePreview",function(t){e.setState({previewImage:t.target.getAttribute("src"),previewVisible:!0})}),J(F(e),"onChangeVal",function(t){var a=t.target.value;e.setState({searchVal:a})}),J(F(e),"onSearchVal",function(){e.doSearch(1,e.state.searchVal)}),J(F(e),"handleCompile",function(t){e.setState({data:{visible:!0,awardName:t.awardName,awardTime:t.awardTime,id:t.id,winner:t.winner,awardSeq:t.awardSeq}})}),e.state={loading:!0,dateType:"",agendaType:"",data:{visible:!1,holdingTime:"",holdingDate:"",id:"",hallId:"",hallName:"",agendaTheme:"",guestIntroduce:"",agendaSeq:""},searchVal:"",previewVisible:!1,previewImage:"",order:1,confirmLoading:!1},e}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,g["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this;this.doSearch(1,""),G=[{title:"揭晓时间",key:"awardTime",render:function(e){return e.awardTime?v.a.createElement("p",null,e.awardTime):"无"}},{title:"奖项名称",key:"awardName",render:function(e){return v.a.createElement("p",null,e.awardName)}},{title:"获奖人员 ",key:"winner",width:600,render:function(e){return v.a.createElement("p",null,e.winner)}},{title:"排序",key:"awardSeq",render:function(e){return v.a.createElement("p",null,e.awardSeq)}},{title:"操作",key:"action",render:function(t){return v.a.createElement("div",null,v.a.createElement("p",null,v.a.createElement("a",{onClick:function(){e.handleCompile(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#108ee9"}},"编辑")),v.a.createElement("p",{style:{marginTop:10}},v.a.createElement("a",{onClick:function(){return e.delIco(t)},className:"mr10 opt-btn",href:"javascript:void(0)",style:{background:"#d73435"}},"删除")))}}]}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n={pageSize:20,currentPage:e||1,search:t};(0,this.props.dispatch)(Object(L.g)(n,function(){a.setState({loading:!1})}))}},{key:"changePage",value:function(e){this.setState({loading:!0}),this.doSearch(e,"")}},{key:"delIco",value:function(e){var t=this;Z({title:"提示",content:"确认要删除吗 ?",onOk:function(){var a={id:e.id};Object(C.i)("POST","/power2/deleteAgenda",D({},a),function(e){1===e.code?(b.a.success("删除成功"),t.doSearch()):b.a.error(e.msg)})}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.prizeList,n=t.pageData;return v.a.createElement("div",{className:"powerGuest-index"},v.a.createElement(c.a,null,v.a.createElement(s.a,null,v.a.createElement("span",null,"搜索："),v.a.createElement(m.a,{onChange:this.onChangeVal,style:{width:250,marginRight:15}}),v.a.createElement(p.a,{type:"primary",onClick:this.onSearchVal,style:{marginRight:100}},"确定"),v.a.createElement(p.a,{type:"primary",onClick:this.showModal},"添加奖项"))),v.a.createElement("div",{className:"mt30"},v.a.createElement(r.a,{spinning:this.state.loading,size:"large"},v.a.createElement(o.a,{dataSource:a.map(function(e,t){return D({},e,{key:t})}),columns:G,bordered:!0,pagination:{current:n.page,total:n.recordCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))),v.a.createElement(w.a,{className:"pre-Modal",visible:this.state.previewVisible,footer:null,onCancel:this.handleImgModalCancel},v.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),this.state.data.visible&&v.a.createElement(z,{loading:this.state.confirmLoading,visible:this.state.data.visible,onCancel:this.handleCancel,data:this.state.data}))}}])&&A(a.prototype,n),i&&A(a,i),t}();t.default=Object(S.connect)(function(e){return{prizeList:e.powerZHPrizeList.prizeList,pageData:e.powerZHAgendaList.pageData}})(W)}}]);