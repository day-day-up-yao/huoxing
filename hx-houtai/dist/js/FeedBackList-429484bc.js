(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1592:function(e,t,a){"use strict";a.r(t);a(675);var n=a(676),r=a.n(n),c=(a(1385),a(1386)),i=a.n(c),s=(a(1381),a(1382)),l=a.n(s),o=(a(1383),a(1384)),u=a.n(o),p=(a(247),a(183)),f=a.n(p),d=(a(184),a(1378)),m=a.n(d),h=(a(361),a(20)),y=a.n(h),b=(a(677),a(362)),g=a.n(b),v=(a(1376),a(1377)),k=a.n(v),E=a(0),w=a.n(E),S=a(246),N=(a(1827),a(10)),P=a(48),O=a(2);var C=function(e){return{type:O.xb,data:e}},_=function(e){return{type:O.D.ADD_DATA,data:e}},j=function(e){return{type:O.D.SET_SEARCH_QUERY,data:e}},I=function(e){return{type:O.D.SET_FILTER_DATA,data:e}},D=function(e){return{type:O.D.SET_PAGE_DATA,data:e}};function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){W(e,t,a[t])})}return e}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var V=k.a.confirm,H=g.a.Option,L=[],R=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=M(t).call(this),e=!n||"object"!==T(n)&&"function"!=typeof n?A(a):n,W(A(e),"handleChange",function(t){(0,e.props.dispatch)(I({status:t})),e.setState({status:t}),e.doSearch("init",{currentPage:1,status:t})}),W(A(e),"incAd",function(){N.hashHistory.push("/adM-edit")}),W(A(e),"handleOk",function(t){e.setState({visible:!1})}),W(A(e),"handleCancel",function(t){e.setState({visible:!1})}),W(A(e),"handleImgModalCancel",function(){return e.setState({previewVisible:!1})}),W(A(e),"handlePreview",function(t){e.setState({previewImage:t.target.getAttribute("src"),previewVisible:!0})}),e.state={loading:!0,status:null,visible:!1,previewVisible:!1,previewImage:"",order:1},e}var a,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,E["Component"]),a=t,(n=[{key:"componentWillMount",value:function(){var e=this;this.doSearch("init"),L=[{title:"昵称",key:"nickName",render:function(t,a){return w.a.createElement("div",{className:"feedBack-info clearfix"},w.a.createElement("div",null,w.a.createElement("h4",{title:a.nickName,dangerouslySetInnerHTML:e.createMarkup(a.nickName?Object(P.q)(a.nickName,30):"暂无")})))}},{title:"状态",key:"status",render:function(e){return 1!==e.status?w.a.createElement("span",{className:"feedBack-status pre-publish"},"未处理"):1===e.status?w.a.createElement("span",{className:"feedBack-status has-publish"},"已处理"):w.a.createElement("span",null,"暂无")}},{title:"反馈图片",width:230,key:"picture",render:function(t){return t.picture?t.picture.split(";").map(function(t,a){return t&&w.a.createElement("div",{className:"feedPic",key:a,style:{background:"url(".concat(t,") no-repeat center")},src:t,onClick:e.handlePreview})}):"无"}},{title:"反馈内容",dataIndex:"content",key:"content",render:function(t){return w.a.createElement("h4",{title:t,dangerouslySetInnerHTML:e.createMarkup(t?Object(P.q)(t,50):"暂无")})}},{title:"邮箱 ",dataIndex:"email",key:"email",render:function(e){return e||"暂无"}},{title:"发布时间",key:"createTime",render:function(e){return Object(P.w)(e.createTime)}},{title:"操作",key:"action",width:90,render:function(t){return w.a.createElement("div",{className:"btns"},w.a.createElement("p",null,w.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e.detailModal(t)},style:{background:"#2b465f"}},"查看")),w.a.createElement("p",null,w.a.createElement("a",{className:"mr10 opt-btn",onClick:function(){e._isPublish(t)},disabled:1===t.status,style:{background:"".concat(1!==t.status?"#3d9ae2":"#afafaf")}},1===t.status?"已处理":"处理")))}}]}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e(j({type:"init",title:""})),e(D({pageSize:20,totalCount:0})),e(C({}))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"adPosition",value:function(e){var t="";return P.M.map(function(a,n){parseInt(a.value)===e&&(t=a.label)}),t}},{key:"doSearch",value:function(e,t){var a=this;this.setState({loading:!0});var n=this.props,r=n.dispatch,c=n.pageData,i=n.search,s={status:i.status,search:i.search,pageSize:20,currentPage:c.currPage};r(function(e,t,a){return function(e){Object(P.i)("post","/feedback/list",t||{},function(t){if(1===t.code){var n=t.obj;e(_({list:n.inforList})),e(D({totalCount:n.recordCount,pageSize:n.pageSize||20,currPage:n.currentPage})),a&&a(n)}else y.a.error(t.msg)})}}(0,s=B({},s,t),function(){a.setState({loading:!1})}))}},{key:"_search",value:function(){var e=this.props.dispatch;this.doSearch("init",{currentPage:1}),e(D({currPage:1}))}},{key:"changePage",value:function(e){this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.search;a(D({currPage:e})),this.doSearch(n.type,{currentPage:e})}},{key:"_isPublish",value:function(e){var t=this.props.dispatch,a=this;V({title:"提示",content:"确认".concat(1===e.status?"改为未处理状态":"已处理完毕","吗 ?"),onOk:function(){var n={id:e.id,status:1===e.status?0:1};Object(P.i)("POST","/feedback/status",B({},n),function(e){1===e.code?(y.a.success("操作成功"),a.doSearch("init"),t(j({type:"init"}))):y.a.error(e.msg)})}})}},{key:"detailModal",value:function(e){this.setState({visible:!0}),(0,this.props.dispatch)(C(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pageData,c=t.search,s=t.selectData,o=t.dispatch;return w.a.createElement("div",{className:"feedBack-index"},w.a.createElement(l.a,null,w.a.createElement(u.a,{span:22,className:"feedBack-position"},w.a.createElement("span",null,"状态："),w.a.createElement(g.a,{defaultValue:"".concat(c.status),style:{width:140},onChange:this.handleChange},w.a.createElement(H,{value:""},"全部"),w.a.createElement(H,{value:"0"},"未处理"),w.a.createElement(H,{value:"1"},"已处理")),w.a.createElement(m.a,{value:c.search,style:{width:150,margin:"0 15px"},onChange:function(e){return o(j({search:e.target.value}))},placeholder:"昵称/手机号/邮箱/内容",onPressEnter:function(){e._search()}}),w.a.createElement(f.a,{type:"primary",onClick:function(){e._search()}},"搜索"))),w.a.createElement("div",{className:"mt30"},w.a.createElement(r.a,{spinning:this.state.loading,size:"large"},w.a.createElement(i.a,{dataSource:a.map(function(e,t){return B({},e,{key:t})}),columns:L,bordered:!0,pagination:{current:n.currPage,total:n.totalCount,pageSize:n.pageSize,onChange:function(t){return e.changePage(t)}}}))),w.a.createElement(k.a,{style:{zIndex:2},className:"pre-Modal",visible:this.state.previewVisible,footer:null,onCancel:this.handleImgModalCancel},w.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})),w.a.createElement(k.a,{title:"反馈详情",className:"feed-detail-modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},w.a.createElement("div",{className:"feedBackInfo",style:{padding:"0 10px 10px"}},w.a.createElement(l.a,{className:"detail-row"},w.a.createElement(u.a,{span:10,className:"",style:{fontWeight:"bold"}},"用户名: ",s.nickName||"无"),w.a.createElement(u.a,{span:8,className:""},"手机号: ",s.phoneNum||"无"),w.a.createElement(u.a,{span:6,className:""},"状态: ",0===s.status?"未处理":"已处理")),w.a.createElement(l.a,{className:"detail-row"},w.a.createElement(u.a,{span:4,className:"feedBack-title",style:{fontWeight:"bold"}},"邮箱: "),w.a.createElement(u.a,{span:20,className:""},s.email)),w.a.createElement(l.a,{className:"detail-row"},w.a.createElement(u.a,{span:4,className:"",style:{fontWeight:"bold"}},"反馈时间: "),w.a.createElement(u.a,{span:20,className:""},Object(P.w)(s.createTime))),w.a.createElement(l.a,{className:"detail-row"},w.a.createElement(u.a,{span:4,className:"feedBack-title",style:{fontWeight:"bold"}},"内容: "),w.a.createElement(u.a,{span:20,className:""},s.content))),w.a.createElement(l.a,{className:"detail-row"},s.picture?s.picture.split(";").map(function(t,a){return w.a.createElement(u.a,{className:"feedPic",key:a,style:{background:"url(".concat(t,") no-repeat center")},src:t,onClick:e.handlePreview})}):"")))}}])&&x(a.prototype,n),c&&x(a,c),t}();t.default=Object(S.connect)(function(e){return{feedBackInfo:e.feedBackInfo,selectData:e.feedBackInfo.selectedData,list:e.feedBackInfo.list,search:e.feedBackInfo.search,pageData:e.feedBackInfo.pageData}})(R)},1827:function(e,t,a){var n=a(1828);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(186)(n,r);n.locals&&(e.exports=n.locals)},1828:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])}}]);