(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1446:function(e,t,a){"use strict";a.r(t),function(e){a(1376);var i=a(1377),r=a.n(i),s=(a(1392),a(1393)),n=a.n(s),l=(a(675),a(676)),c=a.n(l),o=(a(184),a(1378)),p=a.n(o),u=(a(1388),a(1389)),m=a.n(u),h=(a(1387),a(50)),d=a.n(h),g=(a(247),a(183)),f=a.n(g),b=(a(361),a(20)),y=a.n(b),v=(a(677),a(362)),I=a.n(v),S=(a(679),a(249)),x=a.n(S),w=(a(678),a(363)),E=a.n(w),k=(a(1379),a(1380)),P=a.n(k),T=a(0),O=a.n(T),C=a(246),L=a(10),N=a(1612),j=a(248),V=a(11),A=a.n(V),F=a(48),R=a(1398),D=(a(1606),a(1626),a(51)),z=a.n(D);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function J(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){Q(e,t,a[t])})}return e}function Y(e,t,a,i,r,s,n){try{var l=e[s](n),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(i,r)}function _(e){return function(){var t=this,a=arguments;return new Promise(function(i,r){var s=e.apply(t,a);function n(e){Y(s,i,r,n,l,"next",e)}function l(e){Y(s,i,r,n,l,"throw",e)}n(void 0)})}}function H(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var K,X,Z=P.a.Item,$=E.a.Group,ee=x.a.Group,te=I.a.Option,ae=[{label:"PC",value:"1",disabled:!1},{label:"Web",value:"4",disabled:!1},{label:"App",value:"2",disabled:!1}],ie=function(t){function a(){var t,i,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i=this,r=B(a).call(this),t=!r||"object"!==q(r)&&"function"!=typeof r?W(i):r,Q(W(t),"label",function(e){var t={};switch(e){case"1":t={label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"};break;case"3":t={label:"新闻 ID",message:"请输入新闻 ID",placeholder:"新闻 ID",type:""};break;case"4":t={label:"跳转频道",message:"请选择新闻频道",placeholder:"新闻 ID",type:""};break;case"5":t={label:"专题ID",message:"请输入专题ID",placeholder:"示例：火星特训营/20180725170844035121",type:""};break;case"6":t={label:"关键字",message:"请输入搜索的关键字/标签",placeholder:"关键字/标签",type:""};break;default:t={label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"}}return t}),Q(W(t),"positionChange",function(e){(0,t.props.dispatch)(Object(N.d)({adPcPlace:e.target.value})),t.setState({adPlace:e.target.value});var a=e.target.value,i=F.N.filter(function(e){return e.value===a}),r=[],s=JSON.parse(t.getImgSizeArr(a)),n=s.sizeArr;n.map(function(e,t){if(0===t){var a={coverName:"pcImgSrc",coverList:"fileList"};a.width=n[t].width,a.height=n[t].height,a.intro=i[0].label+":"+s.pcImgSize,a.ratio=n[t].width/n[t].height,r.push(a)}else if(1===t){var l={coverName:"mImg",coverList:"mImgSrcFileList"};l.width=n[t].width,l.height=n[t].height,l.intro=i[0].label+s.mImgSize,l.ratio=n[t].width/n[t].height,r.push(l)}}),t.setState({cropImgRule:r});var l=e.target.value;"1"===l||"5"===l||"2"===l||"3"===l||"12"===l||"30"===l||"31"===l?t.setState({typeArr:["1","4","2"]}):"16"===l?t.setState({typeArr:["1","4"]}):t.setState({typeArr:["1"]})}),Q(W(t),"getImgSizeArr",function(e){var t="",a="",i=[];switch(parseInt(e)){case 1:t="532px * 335px",a="690px * 230px",i.push({width:532,height:335}),i.push({width:690,height:230});break;case 2:t="758px * 133px",a="690px * 191px",i.push({width:758,height:133}),i.push({width:690,height:191});break;case 11:t="100px * 100px",a="",i.push({width:100,height:100});break;case 16:t="800px * 100px",a="640px * 80px",i.push({width:800,height:100}),i.push({width:640,height:80});break;case 10:t="150px * 150px",i.push({width:150,height:150});break;case 5:t="1200px * 100px",a="690px * 155px",i.push({width:1200,height:100}),i.push({width:690,height:155});break;case 7:t="360px * 220px",a="",i.push({width:360,height:220});break;case 20:t="360px * 200px",a="",i.push({width:360,height:200});break;case 9:t="318px * 175px",a="",i.push({width:318,height:175});break;case 3:t="800px * 140px",a="690px * 191px",i.push({width:800,height:140}),i.push({width:690,height:191});break;case 12:t="",a="",i.push({width:"",height:""});break;case 17:t="250px * 160px",a="",i.push({width:250,height:160});break;case 30:t="884px * 80px",a="690px * 230px",i.push({width:884,height:80}),i.push({width:690,height:230});break;case 31:t="884px * 300px",a="690px * 230px",i.push({width:884,height:300}),i.push({width:690,height:230});break;case 32:t="1200px * 80px",i.push({width:1200,height:80})}return JSON.stringify({pcImgSize:t,mImgSize:a,sizeArr:i})}),Q(W(t),"typeChange",function(e){t.props.form.setFieldsValue({type:e}),t.setState({type:e})}),Q(W(t),"adType",function(e){t.setState({adType:e.target.value,text:t.label(e.target.value)})}),Q(W(t),"offlineType",function(e){t.setState({offlineType:e.target.value})}),Q(W(t),"specialIdChange",function(e){var a=W(t);t.setState({specialActive:e.target.value}),Object(F.i)("post","/topic/getTagsByTopicId",{id:e.target.value},function(e){if(1===e.code){var t=e.obj;a.setState({specialValShow:!0}),a.setState({specialVal:t||[]})}else a.setState({specialValShow:!1})})}),Q(W(t),"specialValClick",function(e){var a=e.target.getAttribute("data-val");t.setState({specialActive:"".concat(a,"/").concat(t.state.specialActive)}),t.setState({specialValShow:!1})}),Q(W(t),"channelIdChange",function(e){t.setState({url:e})}),Q(W(t),"changeOffLineType",function(){"0"===t.state.offlineType&&t.setState({offlineType:"1"})}),Q(W(t),"handleCancel",function(){return t.setState({previewVisible:!1})}),Q(W(t),"handlePreview",function(e){t.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),Q(W(t),"handleChange",function(){var e=_(regeneratorRuntime.mark(function e(a){var i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a.file,r=a.fileList,t.setState({fileList:r}),"removed"===i.status&&t.setState({coverImgUrl:""}),i.response&&(1===i.response.code&&"done"===i.status&&t.setState({pcImgSrc:i.response.obj,fileList:[{uid:0,name:"xxx.png",status:"done",url:i.response.obj}]},function(){console.log(this.state.pcImgSrc),console.log(this.state.mImg),console.log(this.state.mImgSrcFileList)}),"error"===i.status&&(y.a.error("网络错误，上传失败！"),t.setState({coverImgUrl:"",fileList:[]})));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Q(W(t),"handleMImgChange",function(e){var a=e.file,i=e.fileList;t.setState({mImgSrcFileList:i}),"removed"===a.status&&t.setState({mImgSrc:""}),a.response&&(1===a.response.code&&"done"===a.status&&t.setState({mImgSrc:a.response.obj},function(){console.log(this.state.mImg),console.log(this.state.mImgSrcFileList)}),"error"===a.status&&(y.a.error("网络错误，上传失败！"),t.setState({mImgSrc:"",mImgSrcFileList:[]})))}),Q(W(t),"newsVisibleHide",function(){t.setState({newsVisible:!1})}),Q(W(t),"newsVisibleShow",function(){t.setState({newsVisible:!0})}),Q(W(t),"handleSubmit",function(e){var a=e.target.getAttribute("data-status");e.preventDefault(),t.props.form.setFieldsValue({pcImgSrc:t.state.pcImgSrc,mImgSrc:t.state.mImgSrc}),t.props.form.validateFieldsAndScroll(function(e,i){if(!e){t.setState({loading:!0});for(var r=0,s=0;s<i.type.length;s++)r+=parseInt(i.type[s]);if("0"===t.state.offlineType)i.expiredTime=0;else{var n=i.expiredTime?Date.parse(i.expiredTime.format("YYYY-MM-DD HH:mm:ss")):0;i.expiredTime=n/1e3}if(i.type=r,i.id=t.props.location.query.id||"",i.status=a||1,i.url="4"===i.useType?i.channelId:i.url||t.state.specialActive,!t.state.updateOrNot&&delete i.id,3!==parseInt(t.state.adPlace)&&12!==parseInt(t.state.adPlace)||(i.topOrder=999),i.tagsV2)if(0===i.tagsV2.length)i.tagsV2="";else{var l=[];i.tagsV2.forEach(function(e){l.push(U({name:e.label},JSON.parse(e.key)))}),i.tagsV2=JSON.stringify(l)}30!==parseInt(i.adPlace)&&31!==parseInt(i.adPlace)||i.url.indexOf("/live")>-1&&(i.url=i.url.replace(/live/,"imlive/detail")),Object(F.i)("post","".concat(t.state.updateOrNot?"/ad/update":"/ad/add"),i,function(e){1===e.code?(y.a.success(t.state.updateOrNot?"修改成功！":"添加成功！"),L.hashHistory.push("/ad-pc")):y.a.error(e.msg)})}})}),Q(W(t),"handleTagsChange",function(e,a){e.map(function(e){e.title=Object(F.R)(JSON.parse(e.key).type,e.label)}),t.setState({value:e})}),Q(W(t),"judgeExist",function(e,a){0===(a&&0!==a.length?a.filter(function(t){return t.name===e}):[]).length&&0!==a.length?t.setState({noCurrResult:!0}):t.setState({noCurrResult:!1})}),Q(W(t),"getTagList",function(e){K&&(clearTimeout(K),K=null),X=e;K=setTimeout(function(){t.setState({searching:!0,data:[]}),Object(F.i)("post","/tagmgr/like",{name:e},function(a){if(t.setState({searching:!1}),t.judgeExist(X,a.obj),0===a.obj.length&&""!==e.trim()?t.setState({searchText:O.a.createElement("div",null,O.a.createElement("span",null,"未查询到相关标签, 是否创建?"),O.a.createElement(f.a,{type:"primary",loading:t.state.tagsIconLoading,style:{margin:"0 10px"},onClick:t.addNewTag,size:"small"},"是"),O.a.createElement(f.a,{type:"primary",size:"small",onClick:function(){t.setState({searchText:""})}},"否")),noCurrResult:!1}):t.setState({searchText:""}),X===e){var i=a.obj;t.setState({data:i})}})},500)}),Q(W(t),"handleSelect",function(e,t){e.type=t.props.dataType}),Q(W(t),"handleDeselect",function(e,a){var i=t.state.selectedTags.filter(function(t){return JSON.parse(t).id!==JSON.parse(e.key).id});t.setState({selectedTags:i})}),Q(W(t),"addNewTag",function(e){e.target.disabled=!0;var a=t.props.form;t.setState({tagsIconLoading:!0}),Object(F.i)("post","/tagmgr/addSimpleTag",{name:X,creator:z.a.get("hx_passportId")},function(e){t.setState({searchText:"",tagsIconLoading:!1,noCurrResult:!1});var i=[{title:"".concat(e.obj.name,"-聚合"),key:JSON.stringify({id:e.obj.id,type:e.obj.type}),type:e.obj.type,label:e.obj.name}];a.setFieldsValue({tagsV2:[].concat(J(a.getFieldValue("tagsV2")),i)})})}),Q(W(t),"transTags",function(e){var t=[];return e.forEach(function(e){t.push({title:"".concat(Object(F.R)(e.type,e.name)),label:e.name,key:JSON.stringify({id:e.id,type:e.type})})}),t}),Q(W(t),"handleBlur",function(){t.setState({searchText:""})}),Q(W(t),"uploadAllImg",function(a){var i=a.file,r=a.fileList,s=W(t);if(i.size/1048576>=2)return y.a.error("图片大小超过2M, 请重新选择"),t.setState({allfileList:[],allImg:""}),!1;t.setState({allfileList:r}),"removed"===i.status&&(t.setState({allfileList:[],allImg:""}),t.state.cropImgRule.map(function(e,t){var a;s.setState((Q(a={},e.coverName,""),Q(a,e.coverList,[]),a))})),i.response&&(1===i.response.code&&"done"===i.status&&t.setState({allImg:i.response.obj,uploadAllImgModal:!0,focusImg:-1},function(){var a=document.querySelector("#croppedImg");a.src=i.thumbUrl,s.setState({cropper:new R.a(a,{aspectRatio:t.state.ratio,viewMode:1,crop:function(t){var a=this.cropper,i=s.state.focusImg,r=s.state.cropImgRule[-1===i?0:i],n=a.getCroppedCanvas({width:2*parseInt(r.width),height:2*parseInt(r.height),imageSmoothingQuality:"high"}).toDataURL("image/jpeg",1),l=e(".crop-preview-item");-1===i?l.each(function(t,a){e(this).children("img").attr("src",n)}):l.eq(i).children("img").attr("src",n)}})})}),"error"===i.status&&(y.a.error("网络错误，上传失败"),t.setState({allImg:"",allfileList:[]})))}),Q(W(t),"sureCropImg",function(){var a=W(t),i=0;t.setState({loading:!0,uploadAllImgModal:!1,confirmLoading:!0}),y.a.warning("上传中,请稍后"),t.state.cropper.destroy(),e(".crop-preview-item").each(function(t,r){var s=this;setTimeout(function(){var t,r=e(s).data("type"),n=e(s).data("list");a.setState((Q(t={},r,""),Q(t,n,[]),t));var l=Object(F.r)(e(s).find("img").prop("src")),c=new FormData;c.append("uploadFile",l),e.ajax("".concat(F.a,"/pic/upload"),{headers:{"Sign-Param":Object(F.A)()},method:"POST",data:c,processData:!1,timeout:3e4,contentType:!1,success:function(e){var t;1===e.code?i+=1:400===e.code&&console.log("上传失败"),2===i&&(a.setState({loading:!1,confirmLoading:!1}),y.a.success("上传完毕")),a.setState((Q(t={},r,e.obj),Q(t,n,[{uid:0,name:"xxx.png",status:"done",url:e.obj}]),t),function(){console.log(this.state.pcImgSrc),console.log(this.state.mImg)})},error:function(e,t){a.setState({confirmLoading:!1,loading:!1}),"timeout"===t?y.a.error("上传超时，请检查网络后重新上传"):y.a.error("网络故障，请尝试重新上传！"),e.abort()}})},2e3*t)})}),Q(W(t),"uploadAllImgCancel",function(){t.setState({uploadAllImgModal:!1}),t.state.cropper.destroy()}),Q(W(t),"FormItem",function(e){var a=t.state.updateOrNot,i=t.props.form.getFieldDecorator,r=O.a.createElement("div",null,O.a.createElement(d.a,{type:"plus"}),O.a.createElement("div",{className:"ant-upload-text"},e.label));return O.a.createElement(Z,{labelCol:{span:1},wrapperCol:{span:15,offset:1}},O.a.createElement("div",{className:"dropbox"},i(e.imgName,{initialValue:a&&e.adInfo?e.fileList:"",rules:[{required:e.require,message:"请上传相应封面"}]})(O.a.createElement(m.a,{headers:{"Sign-Param":Object(F.A)()},action:"".concat(F.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:e.fileList,onPreview:t.handlePreview,onChange:e.changeEvent},e.fileList.length>=1?null:r)),e.noBtn?"":O.a.createElement(f.a,{"data-type":e.imgUrl,onClick:t.handlePreview,className:"img-preview",type:"primary"},"预览"),O.a.createElement("p",{className:"cover-imag-tip"},O.a.createElement("span",{style:{color:"#249aef"}},e.size))))}),Q(W(t),"handleMobileChange",function(){var e=_(regeneratorRuntime.mark(function e(a){var i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.file,r=a.fileList,"removed"!==i.status){e.next=5;break}t.setState({mImg:""}),e.next=11;break;case 5:return e.next=7,t.beforeUpload(i.originFileObj);case 7:if(e.sent){e.next=11;break}return y.a.warning("单张图片上传尺寸不能大于 800 * 800, 请重新选择图片或使用统一上传!"),e.abrupt("return",!1);case 11:t.setState({mImgSrcFileList:r}),i.response&&(1===i.response.code&&"done"===i.status&&t.setState({mImg:i.response.obj}),"error"===i.status&&(y.a.error("网络错误，上传失败！"),t.setState({mImg:"",mImgSrcFileList:[]})));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),t.state={confirmLoading:!1,updateOrNot:!1,adPlace:"1",newsVisible:!1,type:[],previewVisible:!1,previewImage:"",newsTitle:"",newsContent:"",fileList:[],mImgSrcFileList:[],coverImgUrl:"",mImgSrc:"",loading:!0,adType:1,offlineType:"0",channelId:"",text:{label:"链接",message:"请输入正确的链接地址",placeholder:"链接地址",type:"url"},specialValShow:!0,specialVal:[],typeArr:["1","4","2"],data:[],searchText:"",searching:!1,tagsIconLoading:!1,noCurrResult:!1,dateDisabled:!0,selectedTags:[],uploadAllImgModal:!1,cropper:null,focusImg:-1,ratio:2,cropImgRule:[{coverName:"pcImgSrc",coverList:"fileList",width:"532px",height:"335px",ratio:532/335,intro:"PC首页轮播: 532 * 335"},{coverName:"mImgSrc",coverList:"mImgSrcFileList",width:"690px",height:"230px",ratio:3,intro:"M首页轮播：690 * 230"}]},t}var i,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(a,T["Component"]),i=a,(s=[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,i=t.location;a(Object(j.f)()),a(Object(j.k)()),i.query.id?a(Object(N.a)({id:i.query.id},function(t){var a=F.N.filter(function(e){return e.value===t.adPlace.toString()}),i=JSON.parse(e.getImgSizeArr(t.adPlace)),r=i.sizeArr,s=[];r.map(function(e,t){if(0===t){var n={coverName:"pcImgSrc",coverList:"fileList"};n.width=r[t].width,n.height=r[t].height,n.intro=a[0].label+":"+i.pcImgSize,n.ratio=r[t].width/r[t].height,s.push(n)}else if(1===t){var l={coverName:"mImg",coverList:"mImgSrcFileList"};l.width=r[t].width,l.height=r[t].height,l.intro=a[0].label+i.mImgSize,l.ratio=r[t].width/r[t].height,s.push(l)}}),e.setState({updateOrNot:!0,fileList:[{uid:0,name:"xxx.png",status:"done",url:t.pcImgSrc}],mImgSrcFileList:[{uid:1,name:"xxx.png",status:"done",url:t.mImgSrc}],coverImgUrl:t.pcImgSrc,pcImgSrc:t.pcImgSrc,mImgSrc:t.mImgSrc,loading:!1,adType:t.useType.toString(),adPlace:t.adPlace.toString(),text:e.label("".concat(t.useType)),offlineType:t.expiredTime?"1":"0",cropImgRule:s})})):this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e,t){e.adInfo.url!==this.props.adInfo.url&&this.setState({specialActive:this.props.adInfo.url})}},{key:"sendPost",value:function(e){var t={newsTitle:e.postTitle||"",newsContent:"".concat(e.postContent)||""};this.setState(U({},this.state,t))}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"changeActiveImg",value:function(e,t,a){var i=this;if(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a===this.state.focusImg)return!1;this.setState({ratio:t.ratio,focusImg:a},function(){i.state.cropper.setAspectRatio(t.ratio)})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,i=this.props,s=i.adInfo,l=i.channelList,o=i.flashTypeList,u=this.state,h=u.allfileList,g=u.fileList,b=u.previewVisible,y=u.previewImage,v=u.updateOrNot,S=u.mImgSrcFileList,x=u.text,w=u.uploadAllImgModal,k=u.focusImg,T={labelCol:{span:2},wrapperCol:{span:20,offset:1}},C=[];""!==s.type&&(3===s.type?C=["1","2"]:5===s.type?C=["1","4"]:6===s.type?C=["2","4"]:7===s.type?C=["1","2","4"]:1===s.type?C=["1"]:2===s.type?C=["2"]:4===s.type&&(C=["4"]));var N=O.a.createElement("div",null,O.a.createElement(d.a,{type:"plus"}),O.a.createElement("div",{className:"ant-upload-text"},"上传图片")),j="",V="";switch(parseInt(this.state.adPlace)){case 1:j="532px * 335px",V="690px * 230px";break;case 2:j="758px * 133px",V="690px * 191px";break;case 11:j="100px * 100px",V="";break;case 16:j="800px * 100px",V="640px * 80px";break;case 10:j="150px * 150px";break;case 5:j="1200px * 100px",V="690px * 155px";break;case 6:j="758px * 133px(单个) / 488px * 270px(两个以上)",V="";break;case 7:j="360px * 220px",V="";break;case 20:j="360px * 200px",V="";break;case 9:j="318px * 175px",V="";break;case 3:j="800px * 140px",V="690px * 191px";break;case 12:j="",V="";break;case 17:j="250px * 160px",V="";break;case 30:j="884px * 80px",V="690px * 230px";break;case 31:j="884px * 300px",V="690px * 230px";break;case 32:j="1200px * 80px"}"1"===this.state.adPlace||"5"===this.state.adPlace||"2"===this.state.adPlace||"3"===this.state.adPlace||"12"===this.state.adPlace||"30"===this.state.adPlace||"31"===this.state.adPlace?(ae[0].disabled=!1,ae[1].disabled=!1,ae[2].disabled=!1):"16"===this.state.adPlace?(ae[0].disabled=!1,ae[1].disabled=!1,ae[2].disabled=!0):(ae[0].disabled=!1,ae[1].disabled=!0,ae[2].disabled=!0);var R=this.state.data.map(function(e){return O.a.createElement(te,{title:Object(F.R)(e.type,e.name),dataType:e.type,className:"tagType-".concat(e.type),value:JSON.stringify({id:e.id,type:e.type}),key:e.id},e.name)});return O.a.createElement("div",{className:"post-send"},O.a.createElement(c.a,{spinning:this.state.loading,size:"large"},O.a.createElement(P.a,{onSubmit:this.handleSubmit},O.a.createElement(Z,M({},T,{label:"标题: "}),a("remake",{initialValue:v&&s?"".concat(s.remake):"",rules:[{required:!0,message:"请输入广告标题！"}]})(O.a.createElement(p.a,{placeholder:"输入广告标题"}))),O.a.createElement(Z,M({},T,{label:"描述: "}),a("description",{initialValue:v&&s?"".concat(s.description||""):"",rules:[{required:!0,message:"请输入广告描述！"}]})(O.a.createElement(p.a,{placeholder:"请输入广告描述"}))),O.a.createElement(Z,M({},T,{label:"位置: "}),a("adPlace",{initialValue:v&&s?this.state.adPlace.toString():"1",rules:[{required:!0,message:"请选择广告位置！"}]})(O.a.createElement($,{options:F.N,onChange:this.positionChange,setFieldsValue:this.state.adPlace}))),3===parseInt(this.state.adPlace)||12===parseInt(this.state.adPlace)?O.a.createElement(Z,M({},T,{label:"嵌入频道"}),a("secondPosition",{initialValue:v&&s?"".concat(s.secondPosition):12===parseInt(this.state.adPlace)?"0":"10002",rules:[{required:!0,message:"请选择广告所属栏目！"}]})(O.a.createElement(I.a,{style:{width:100},onChange:this.channelIdChange},3===parseInt(this.state.adPlace)?l.map(function(e){return O.a.createElement(te,{value:e.value,key:e.value},e.label)}):o.map(function(e){return O.a.createElement(te,{value:e.value,key:e.value},e.label)})))):"",O.a.createElement(Z,M({},T,{label:"类型:"}),a("useType",{initialValue:this.state.adType,rules:[{required:!0,message:"请选择类型！"}]})(O.a.createElement($,{onChange:this.adType,setFieldsValue:this.state.adType},F.d.map(function(e,t){return O.a.createElement(E.a,{key:t,value:e.value},e.label)})))),"4"===this.state.adType?O.a.createElement(Z,M({},T,{label:x.label}),a("channelId",{initialValue:v&&s?"".concat(s.url):"10002",rules:[{required:!0,type:"".concat(x.type),message:"".concat(x.message)}]})(O.a.createElement(I.a,{style:{width:100},onChange:this.channelIdChange},this.props.channelList.map(function(e){return O.a.createElement(te,{value:e.value,key:e.value},e.label)})))):"5"===this.state.adType?O.a.createElement(Z,M({},T,{label:x.label}),O.a.createElement("div",{className:"special-cont"},O.a.createElement(p.a,{placeholder:x.placeholder,value:this.state.specialActive,onChange:this.specialIdChange.bind(event)}),O.a.createElement("div",{className:"special-select",style:{display:this.state.specialValShow?"block":"none"}},this.state.specialVal.map(function(t,a){return O.a.createElement("p",{key:a,"data-val":t,onClick:e.specialValClick.bind(event)},t)})))):O.a.createElement(Z,M({},T,{label:x.label}),a("url",{initialValue:v&&s?"".concat(s.url):"",rules:[{required:4!==parseInt(this.state.adPlace),type:"".concat(x.type),message:"".concat(x.message)}]})(O.a.createElement(p.a,{placeholder:x.placeholder}))),17===parseInt(this.state.adPlace)&&O.a.createElement(Z,M({},T,{label:"新版标签："}),a("tagsV2",{initialValue:v&&s&&s.tagsV2&&0!==JSON.parse(s.tagsV2).length?this.transTags(JSON.parse(s.tagsV2)):[],rules:[{required:!0,message:"请选择相关标签！"}]})(O.a.createElement(I.a,{mode:"multiple",showSearch:!0,labelInValue:!0,notFoundContent:this.state.searching?O.a.createElement(c.a,{size:"small"}):this.state.searchText,filterOption:!1,optionFilterProp:"children",style:{width:"100%"},onSearch:this.getTagList,onSelect:this.handleSelect,onDeselect:this.handleDeselect,onChange:this.handleTagsChange,onBlur:this.handleBlur},R)),this.state.noCurrResult&&O.a.createElement("p",{style:{position:"absolute",right:"-160px",bottom:0}},O.a.createElement("span",null,"未找到结果?"),O.a.createElement(f.a,{type:"primary",loading:this.state.tagsIconLoading,style:{margin:"0 10px"},onClick:this.addNewTag,size:"small"},"创建"),O.a.createElement("span",null,"一个"))),3!==parseInt(this.state.adPlace)&&12!==parseInt(this.state.adPlace)&&O.a.createElement(Z,M({},T,{label:"权重: "}),a("topOrder",{initialValue:v&&s?s.topOrder:"0",rules:[{required:!0,message:"请输入广告权重！"}]})(O.a.createElement(p.a,{placeholder:"请输入广告权重！"}))),(3===parseInt(this.state.adPlace)||12===parseInt(this.state.adPlace))&&O.a.createElement(Z,M({},T,{label:"权重: "}),a("weight",{initialValue:v&&s?s.weight:"0",rules:[{required:!0,message:"请输入广告权重！"}]})(O.a.createElement(p.a,{placeholder:"请输入广告权重！"}))),O.a.createElement(Z,M({},T,{label:"平台: "}),a("type",{initialValue:v&&s?C:this.state.typeArr,rules:[{required:!0,message:"请选择平台！"}]})(O.a.createElement(ee,{options:ae,onChange:this.typeChange}))),O.a.createElement(Z,M({className:"offlineTime"},T,{label:"定时下线："}),O.a.createElement(E.a.Group,{onChange:this.offlineType,value:this.state.offlineType},O.a.createElement(E.a,{value:"0"},"永久"),O.a.createElement(E.a,{value:"1"},"定时")),a("expiredTime",{rules:[{required:!1,message:"请选择下线时间！"}],initialValue:v&&s?s.expiredTime?"0"===this.state.offlineType?null:A()(Object(F.w)(s.expiredTime),"YYYY-MM-DD HH:mm:ss"):null:"1"===this.state.offlineType?A()():null})(O.a.createElement(n.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onOk:this.changeOffLineType,style:{marginRight:15}}))),12!==parseInt(this.state.adPlace)&&17!==parseInt(this.state.adPlace)?O.a.createElement(Z,{labelCol:{span:2},wrapperCol:{span:20,offset:1},label:"图片自动裁切："},O.a.createElement("div",{className:"newcss",style:{display:"flex"}},O.a.createElement("div",{className:"dropbox"},O.a.createElement(m.a,{headers:{"Sign-Param":Object(F.A)()},action:"".concat(F.a,"/pic/upload"),name:"uploadFile",listType:"picture-card",fileList:h,onPreview:this.handlePreview,onChange:this.uploadAllImg},h&&h.length>=1?null:N)),12!==parseInt(this.state.adPlace)&&17!==parseInt(this.state.adPlace)?O.a.createElement("div",{className:"test"},this.FormItem({imgName:"pcImgSrc",label:"Web封面",imgUrl:"fileList",adInfo:s,fileList:g,changeEvent:this.handleChange,size:"PC首页轮播: ".concat(j),noBtn:!0,require:!0})):"",1===parseInt(this.state.adPlace)||16===parseInt(this.state.adPlace)||5===parseInt(this.state.adPlace)||2===parseInt(this.state.adPlace)||3===parseInt(this.state.adPlace)||30===parseInt(this.state.adPlace)||31===parseInt(this.state.adPlace)?O.a.createElement("div",{className:"test"},this.FormItem({imgName:"mImgSrc",label:"App封面",imgUrl:"mImgSrcFileList",adInfo:s,fileList:S,changeEvent:this.handleMImgChange,size:"M首页轮播：".concat(V),noBtn:!0,require:!0})):"")):"",O.a.createElement(Z,{wrapperCol:{span:12,offset:2}},O.a.createElement(f.a,{type:"primary","data-status":"1",htmlType:"submit",style:{marginRight:"10px"}},"发布"),O.a.createElement(f.a,{type:"primary","data-status":"2",onClick:this.handleSubmit,style:{marginRight:"10px"}},"放入草稿箱"),O.a.createElement(f.a,{type:"primary",className:"cancel",onClick:function(){L.hashHistory.goBack()}},"取消"))),O.a.createElement(r.a,{confirmLoading:this.state.confirmLoading,height:"700px",width:"1400",style:{top:"50px"},visible:w,onOk:this.sureCropImg,maskClosable:!1,onCancel:this.uploadAllImgCancel},O.a.createElement("div",{className:"croper-wrap post clearfix"},O.a.createElement("div",{className:"crop-img",id:"cropImgWrap"},O.a.createElement("img",{id:"croppedImg",src:"",alt:"Picture"})),O.a.createElement("div",{onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.setState({focusImg:-1})},className:"crop-preview"},this.state.cropImgRule.map(function(e,a){return O.a.createElement("div",{key:a,onClick:function(i){t.changeActiveImg(i,e,a)},className:"cropper-intro"},O.a.createElement("div",{className:"cropper-item-wrap ".concat(k===a?"active":"")},O.a.createElement("div",{"data-type":e.coverName,"data-list":e.coverList,className:"crop-preview-item",style:{fontSize:0,width:e.width,height:e.height}},O.a.createElement("img",{src:"",alt:"",style:{width:"100%",height:"100%"}})),O.a.createElement("p",null,e.intro)))})))),O.a.createElement(r.a,{visible:b,footer:null,onCancel:this.handleCancel},O.a.createElement("img",{alt:"example",style:{width:"100%"},src:y}))))}}])&&H(i.prototype,s),l&&H(i,l),a}();t.default=Object(C.connect)(function(e){return{adInfo:e.adInfo.info,channelList:e.channelListInfo,flashTypeList:e.flashTypeListInfo}})(P.a.create()(ie))}.call(this,a(97))},1626:function(e,t,a){var i=a(1647);"string"==typeof i&&(i=[[e.i,i,""]]);var r={transform:void 0};a(186)(i,r);i.locals&&(e.exports=i.locals)},1647:function(e,t,a){(e.exports=a(185)(!1)).push([e.i,"",""])}}]);