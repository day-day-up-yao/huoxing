(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[56],{1727:function(e,t,a){},1728:function(e,t,a){},1729:function(e,t,a){e.exports=a.p+"m-time-68310a01.png"},1730:function(e,t,a){},1731:function(e,t,a){},1732:function(e,t,a){e.exports=a.p+"m-search-3fc67de6.png"},1733:function(e,t,a){},1734:function(e,t,a){e.exports=a.p+"m-search-358aef42.svg"},297:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(5),s=a.n(c),l=a(6),o=a.n(l),i=a(7),u=a.n(i),h=a(8),m=a.n(h),p=a(42),d=a.n(p),y=a(9),g=a.n(y),f=a(0),E=a.n(f),S=a(27),v=(a(1727),a(1)),w=function(e){return e.cont.map(function(t,a){return E.a.createElement("div",{className:"news-item",key:a},E.a.createElement("div",{className:"news-item-content"},E.a.createElement("p",{className:"content-title"},E.a.createElement("a",{title:t.title,href:"/newsdetail/".concat(t.id,".html"),dangerouslySetInnerHTML:{__html:Object(v.z)(t.title,e.searchKey)}})),E.a.createElement("p",{className:"content-sup"},E.a.createElement("span",null,t.author),E.a.createElement("span",null,Object(v.l)(t.createTime,"yyyy-MM-dd hh:mm")))),E.a.createElement("div",{className:"news-item-img"},E.a.createElement("img",{src:"".concat(JSON.parse(t.coverPic).wap_small),className:"img-pic",alt:t.title})))})},b=(a(1728),a(1729)),C=a.n(b),N=function(e){return e.cont.map(function(t,a){t.title||t.content.replace(/【([^【】]+)】/g,function(){t.title=arguments[1]});var n="https://flash.huoxing24.com/".concat(t.id,".html");return E.a.createElement("div",{className:"lives-item",key:a},E.a.createElement("div",{className:"lives-item-time"},E.a.createElement("img",{className:"iconfont-time",src:C.a}),Object(v.l)(t.createdTime,"yyyy-MM-dd hh:mm")),E.a.createElement("div",{className:"lives-item-content"},E.a.createElement("p",{className:"content-title"},E.a.createElement("a",{title:t.title,href:n,dangerouslySetInnerHTML:{__html:Object(v.z)(t.title,e.searchKey)}})),E.a.createElement("p",{className:"content-msg",dangerouslySetInnerHTML:{__html:Object(v.z)(t.content,e.searchKey)}})))})},k=(a(1730),function(e){return E.a.createElement("div",{className:"market-box"},E.a.createElement("div",{className:"search-result"},'"',E.a.createElement("span",null,e.searchKey),"共搜索出 ".concat(e.cont.length," 条结果")),E.a.createElement("table",null,E.a.createElement("thead",null,E.a.createElement("tr",null,E.a.createElement("td",null,"货币"),E.a.createElement("td",null,"当前价格(CNY)"),E.a.createElement("td",null,"24H涨跌榜"))),E.a.createElement("tbody",null,e.cont.map(function(t,a){return E.a.createElement("tr",{key:a,onClick:function(){return e=t.symbol,void window.open("https://token.huoxing24.com/".concat(e,".html"),"_self");var e}},E.a.createElement("td",null,E.a.createElement("img",{src:t.icon,alt:""}),t.symbol),E.a.createElement("td",null,(e.price*t.price).toFixed(2)),E.a.createElement("td",null,E.a.createElement("span",{className:100*t.change_percent>0?"rise":"fall"},100*t.change_percent>0?"+"+(100*t.change_percent).toFixed(2):(100*t.change_percent).toFixed(2),"%")))}))))}),j=(a(1731),a(1732)),T=a.n(j),L=function(e){return E.a.createElement("div",{className:"result-img"},E.a.createElement("img",{src:T.a,alt:""}),E.a.createElement("p",null,"很抱歉，没有找到",E.a.createElement("span",null,e.searchKey),"相关结果，请修改或者尝试其他搜索词"))},_=a(113),D=(a(1733),a(1734)),P=a.n(D),O=a(1187),K=a(2),x=a.n(K),I=a(4),R=a.n(I),H=a(11),M=a(101),B=function(e){return Object(v.d)({type:"get",url:"/market/tickers/coin/list",params:e})},z=function(e){return function(){var t=R()(x.a.mark(function t(a){var n;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B({page:1,size:2e3,search:e.search,order:"rank",sort:"asc",limit:0});case 3:return 1===(n=t.sent).code&&a({type:M.b,data:n.data}),t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(0),a({type:H.a,data:t.t0}),new Error(t.t0);case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},Q=Object(O.a)().searchMTabType,A=function(e){function t(e){var a;return s()(this,t),(a=u()(this,m()(t).call(this,e))).isSearching=!1,a.nowScrollTop=0,a.bindHandleScroll=function(e){var t=e.target,n=t.scrollHeight,r=t.clientHeight,c=t.scrollTop;c>a.nowScrollTop&&!a.isSearching&&3!==a.state.showType&&c+r+50>n&&a.handleSearchList({page:parseInt(a.state.currPage)+1}),a.nowScrollTop=c},a.searchEnter=function(e){if(!a.isSearching&&e.keyCode&&13!==e.keyCode)return!1;""!==Object(v.J)(e.target.value)&&(a.setState({searchQuery:e.target.value,searchKey:e.target.value,showType:1}),a.handleSearchList({page:1}))},a.searchChange=function(e){a.setState({searchQuery:Object(v.J)(e.target.value)}),""===Object(v.J)(e.target.value)&&a.setState({isResShow:!1})},a.handleSearchList=function(e){var t=a.props.dispatch,n=d()(a),c={q:a.state.searchQuery,keyWord:a.state.searchQuery,page:a.state.currPage,pageSize:a.state.pageSize,type:a.state.showType};if(e&&(c=r()({},c,e)),!(c.page>1&&c.page>a.state.total))switch(a.isSearching=!0,c.type){case 1:t(Object(_.c)(c)).then(function(e){if(n.isSearching=!1,1===e.code)if(e.obj&&e.obj.inforList){var t=[];t=1===c.page?e.obj.inforList:n.state.listData.concat(e.obj.inforList),n.setState({listData:t,recordCount:e.obj.recordCount,total:e.obj.totalIndex,currPage:c.page,showType:c.type,isResShow:!0})}else n.setState({listData:[],recordCount:0,total:0,currPage:c.page,showType:c.type,isResShow:!0});else n.setState({listData:[],recordCount:0,total:0,currPage:c.page,showType:c.type,isResShow:!0})});break;case 2:t(Object(_.a)(c)).then(function(e){if(n.isSearching=!1,1===e.code)if(e.obj&&e.obj.inforList){var t=[];t=1===c.page?e.obj.inforList:n.state.listData.concat(e.obj.inforList),n.setState({listData:t,recordCount:e.obj.recordCount,total:e.obj.totalIndex,currPage:c.page,showType:c.type,isResShow:!0})}else n.setState({listData:[],recordCount:0,total:0,currPage:c.page,showType:c.type,isResShow:!0});else n.setState({listData:[],recordCount:0,total:0,currPage:c.page,showType:c.type,isResShow:!0})});break;case 3:t(z({search:a.state.searchQuery})).then(function(e){if(n.isSearching=!1,1===e.code)if(e.data&&e.data.inforList){var t=[];t=1===c.page?e.data.inforList:n.state.listData.concat(e.data.inforList),n.setState({listData:t,recordCount:e.data.recordCount,total:e.data.totalIndex,currPage:c.page,showType:c.type,isResShow:!0})}else n.setState({listData:[],recordCount:0,total:0,currPage:c.page,showType:c.type,isResShow:!0});else n.setState({listData:[],recordCount:0,total:0,currPage:c.page,showType:c.type,isResShow:!0})})}},a.renderStr=function(e,t,n){if(!a.isSearching){if(!t.length&&1===n)return E.a.createElement(L,{searchKey:a.state.searchKey});switch(parseInt(e)){case 1:return E.a.createElement(w,{cont:t,searchKey:a.state.searchKey});case 2:return E.a.createElement(N,{cont:t,searchKey:a.state.searchKey});case 3:return E.a.createElement(k,{cont:t,price:a.state.cnyPrice,searchKey:a.state.searchKey})}}},a.onBtnCancelClick=function(){window.history.go(-1)},a.onBtnSearchtabClick=function(e){a.state.showType!==e&&a.handleSearchList({page:1,type:e})},a.state={isResShow:!1,listData:[],recordCount:0,searchQuery:"",searchKey:"",showType:1,currPage:0,pageSize:10,total:0,cnyPrice:0},a}return g()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("searchPage").addEventListener("scroll",e.bindHandleScroll,!1),Object(v.d)({type:"post",url:"/market/tickers/fiatmap"}).then(function(t){if(1===t.code)for(var a=0;a<t.data.length;a++)if("CNY"===t.data[a].quote){var n=t.data[a].price;e.setState({cnyPrice:n});break}})}},{key:"componentWillUnmount",value:function(){document.getElementById("searchPage").removeEventListener("scroll",this.bindHandleScroll)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isResShow,n=t.showType,r=t.searchQuery,c=t.listData,s=t.currPage;return E.a.createElement("div",{className:"m-search-content"},E.a.createElement("div",{className:"search-group"},E.a.createElement("div",{className:"input-group"},E.a.createElement("img",{src:P.a}),E.a.createElement("input",{type:"search",className:"input search",placeholder:"请输入关键词",value:r,onChange:this.searchChange,onKeyDown:this.searchEnter})),E.a.createElement("span",{className:"cancel-search ".concat(""!==r?"input-in":""),onClick:this.onBtnCancelClick},"取消")),E.a.createElement("div",{className:"search-main"},E.a.createElement("div",{className:"search-res",style:{display:a?"block":"none"}},E.a.createElement("ul",{className:"res-tab"},Q.map(function(t){var a=n===t.type?"active":"";return E.a.createElement("li",{className:a,key:t.type,onClick:function(){e.onBtnSearchtabClick(t.type)}},t.label)})),E.a.createElement("div",{className:"scroll-box",id:"searchPage"},this.renderStr(n,c,s)))))}}]),t}(f.Component);t.default=Object(S.b)(function(e){return{newsChannelId:e.multi.newsChannelId}})(A)}}]);
//# sourceMappingURL=containers-m-Search-4340ff1b.js.map